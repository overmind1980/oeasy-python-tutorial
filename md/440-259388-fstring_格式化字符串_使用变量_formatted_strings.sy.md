---
show: step
version: 1.0
enable_checker: true
---

# fstring

## ä¼šè®®

- ä¸Šæ¬¡äº†è§£çš„æ˜¯ 
	- bitwise è¿ç®—ç¬¦

|æ•ˆæœ|è‹±æ–‡|ç¬¦å·|æ“ä½œæ•°|
|---|---|---|---|
|æŒ‰ä½ä¸|bitwise and|& | 2 |
|æŒ‰ä½æˆ–|bitwise or| \| | 2 |
|æŒ‰ä½é|bitwise not | ~ | 1 |
|æŒ‰ä½å¼‚æˆ–|bitwise exclusive or | ^ | 2 |

- è¿™ä¸€åˆ‡éƒ½æ˜¯ä»str.formatå¼•å‘å‡ºæ¥çš„
- str.format å¯ä»¥ä½¿ç”¨ ä¸Šä¸‹æ–‡ ä¸­çš„ å˜é‡å—ï¼ŸğŸ¤”

### pep-498

- https://peps.python.org/pep-0498/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676605955886)

- ä¸formatå‡½æ•°ä¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676606267295)

- f-stringå¯ä»¥
	- ç›´æ¥è®¿é—®ä¸Šä¸‹æ–‡å˜é‡
- å¯ä»¥æ§åˆ¶
	- å®½åº¦
	- ç²¾åº¦
	- æ­£è´Ÿå·
	- è¿™äº›å—ï¼Ÿ

### æ ¼å¼æ§åˆ¶

- å›é¡¾format

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676607345144)

- f-stringçš„æ ¼å¼è¯­æ³•
	- å®Œå…¨ä¸€è‡´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676607376368)

### åŠ¨æ‰‹æ”¹æ”¹

```
import math
print(f"{math.e:8.3f}")
print(f"{math.e:^8.3f}")
print(f"{math.e:_^8.3f}")
print(f"{math.e:_^+8.3f}")
print(f"{math.e*1000:_^+16,.5f}")
print(f"{math.e*1000:_^+16,.5f}")
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240202-1706876854417)

- å¯ä»¥æ˜¾ç¤º ä¸åŒè¿›åˆ¶å½¢æ€å—ï¼Ÿ

### æ•´æ•°æ ¼å¼æ§åˆ¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676607584480)

- æ•´æ•°æ ¼å¼æ§åˆ¶
	- ä¹Ÿä¸formatä¸€è‡´

|ç¬¦å·|æ¥æº|å«ä¹‰|
|---|---|---|
|e|exponent of 10 | ç§‘å­¦è®¡æ•°æ³•|
|E|Exponent of 10 | å¤§å†™ç§‘å­¦è®¡æ•°æ³•|
|f|float | æµ®ç‚¹å°æ•° |
|F|Float | å¤§å†™æµ®ç‚¹å°æ•° |
|g |general  | é€šç”¨æ ¼å¼|
|G |General  | å¤§å†™é€šç”¨æ ¼å¼|
|n|number  | æ•°å­—æ ¼å¼|
|% |percent  | ç™¾åˆ†æ¯”|
|None |   | é»˜è®¤æ ¼å¼|

- ä¸€é€šç™¾é€š
- ä¸Šä¸‹æ–‡çš„å˜é‡éƒ½èƒ½è¢«æ‰¾åˆ°å—ï¼Ÿ

### ä¾‹å­

- æœ‰çš„æ—¶å€™å¯èƒ½æ‰¾ä¸åˆ°
	- æ¯”å¦‚ä¸‹å›¾ä¸­innerå‡½æ•°
	- æ‰¾ä¸åˆ°outerçš„xå˜é‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676612092848)

- é™¤é
	- åœ¨å­å‡½æ•°é‡Œé¢å£°æ˜äº†x
	- x å¼•ç”¨outerä¸­çš„ å‚æ•°x
	- å°±å¯ä»¥ç”¨äº†
- å¦‚æœå°±æƒ³åœ¨f-stringé‡Œé¢
	- ä½¿ç”¨å¤§æ‹¬å·æ€ä¹ˆåŠå‘¢ï¼Ÿ

### ä½¿ç”¨å¤§æ‹¬å·

- ä¸¤ä¸ª{æ‹¬å· åˆæˆä¸€ä¸ª{
- ä¸¤ä¸ª}æ‹¬å· åˆæˆä¸€ä¸ª}
- å¾ˆåƒè½¬ä¹‰å­—ç¬¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676612886594)

- f-string æœ‰ä»€ä¹ˆç”¨å—?

### æ•°å­—ç²¾ç¡®ä½æ•°

- ä»¥å‰ç ”ç©¶è¿‡çš„
	- 0.1 + 0.2 == 0.3

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231210-1702181742797)

- åœ¨äºŒåä½å°æ•°çš„æƒ…å†µä¸‹å°±æ¸…æ¸…æ¥šæ¥šäº†

### å¤„ç†å‡½æ•°

- çœ‹èµ·æ¥

|  ç¬¦å· | ä½œç”¨ |
|---|---|
|!a | å¯¹ç›®æ ‡è°ƒç”¨asciiå‡½æ•°|
|!r | å¯¹ç›®æ ‡è°ƒç”¨reprå‡½æ•°|
|!s | å¯¹ç›®æ ‡è°ƒç”¨strå‡½æ•°|

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676612941158)


- å…·ä½“æ•ˆæœå¦‚ä½•å‘¢ï¼Ÿ

### å…·ä½“æ•ˆæœ

- ç¡®å®æœ‰è¿™æ ·çš„å¯¹åº”å…³ç³»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676613035896)

| !a | !s | !r |
| --- | --- | --- |
| ascii()| str() | repr() |

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676613106339)

- å…·ä½“æ€ä¹ˆåº”ç”¨å‘¢ï¼Ÿ

### å…·ä½“åº”ç”¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240202-1706878574355)

### æ€»ç»“

- ä¹‹å‰æœ‰ ä¸¤ç§å¤„ç†å­—ç¬¦ä¸²çš„æ–¹å¼
	- % modulo å–æ¨¡
	- str.format()

- æˆ‘ä»¬è¿™æ¬¡ç ”ç©¶äº†f-string
	- f-stringçš„æ„æ€æ˜¯ 
	- æ ¼å¼åŒ–åçš„å­—ç¬¦ä¸²
	- formatted string
- æ ¼å¼åŒ–çš„è¿‡ç¨‹ä¸­
	- å¯ä»¥ å¼•ç”¨ ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡
	- ä»è€Œ å¾—åˆ°ç›¸åº”çš„ æœ€ç»ˆå€¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230217-1676613676557)

- é™¤äº†f-stringä¹‹å¤–
	- å¥½åƒè¿˜æœ‰ä¸€ç§r-string
- è¿™r-stringæ€ä¹ˆç”¨å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ğŸ‘‹ğŸ»