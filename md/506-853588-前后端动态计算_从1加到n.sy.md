---
show: step
version: 1.0
enable_checker: true
---

# å‰ç«¯å’Œåç«¯
## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ ğŸ˜Œ

- ä¸Šæ¬¡äº†è§£äº†	
	- ä»€ä¹ˆæ˜¯åç«¯
	- ä»€ä¹ˆåˆæ˜¯å‰ç«¯ï¼ŸğŸ¤”
- å‰ç«¯
	- è´Ÿè´£å‘é€è¯·æ±‚(requests)
	- è´Ÿè´£æ¥æ”¶å“åº”(response)
	- ç½‘é¡µè®¾è®¡åšå›¾åˆ‡ç‰‡
	- ç®¡çš„æ˜¯çœ‹å¾—è§å¬å¾—ç€çš„éƒ¨åˆ†
	- å‰ç«¯javascriptä»£ç 
- åç«¯
	- è´Ÿè´£æ¥æ”¶è¯·æ±‚(requests)
	- è´Ÿè´£å‘é€å“åº”(response)
	- javaè¯­è¨€
	- åº”ç”¨æœåŠ¡å™¨ä½¿ç”¨
	- åå°æ•°æ®åº“æ“ä½œ
- è®¡ç®— ä»0åˆ°100 å¤ªå›ºå®šäº†
	- å¯ä»¥ç»™ä¸ªå‚æ•°å—?
	- ä¸€ä¸ªæ•´æ•°n
	- è®¡ç®—ä»0åˆ°nçš„å’Œ
- èƒ½ç®—å—ï¼ŸğŸ¤¨

### ä»é›¶å¼€å§‹

```
cd ~
mkdir sum_pro
cd sum_pro
vi app.py
```

- å»ºç«‹ webappçš„æ ¹ç›®å½•
	- è¿›å…¥ æ ¹ç›®å½•
	- æ–°å»ºapp.py

```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return str("hello")


if __name__ == "__main__":
    app.run(debug=True,host="0.0.0.0",port=8080)
```

- è¿è¡Œåº”ç”¨


```
nohup python3 app.py >> f.log 2>&1 &
firefox http://localhost:8080 &
```

- å›è½¦åˆ‡å›å‘½ä»¤è¡Œ

### å‰ç«¯è®¡ç®—

```
mkdir static
vi static/cal.html
```

- åœ¨staticä¸‹é¢å»ºç«‹ç½‘é¡µ

```html
<html lang="zh">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<script type="text/javascript">
			function calculate(){
				var result = 0;
				var num = document.getElementById("num").value
				for(var i=1;i<=num;i++){
					result += i;
				}
				result_div = document.getElementById("result")
				result_div.innerHTML = result+"";
			}
		</script>
	</head>
	<body>
		<input type="text" id="num">
		<input type="button" onclick="calculate()" value="go"/>
		<div id="result">
	</body>
</html>
```

- å†™å¥½äº†ç›´æ¥ä¿å­˜

### è®¿é—®ç»“æœ

```
firefox http://localhost:8080/static/cal.html &
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676858220808)

- å‰ç«¯çš„è¿ç®—è¿‡ç¨‹
	- è¿˜åœ¨æœ¬åœ°æµè§ˆå™¨
	- å‰ç«¯jsä»£ç é‡Œé¢
	- å†™å¾—æ˜æ˜ç™½ç™½
	- çœ‹å¾—æ¸…æ¸…æ¥šæ¥š

- åœ¨ç½‘ç»œé‡Œé¢
	- ä¹Ÿæ²¡æœ‰ ä»»ä½•çš„ æ–°è¯·æ±‚/å“åº”
- è¿™æ˜¯æŠŠè®¡ç®—æ”¾åˆ°äº†å‰ç«¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676858232912)

- å¯ä»¥æŠŠè®¡ç®—æ”¾åˆ°åç«¯å—ï¼Ÿ

### åç«¯è®¡ç®—

```
vi static/preCalculate.html 
```

- é¦–å…ˆå»ºç«‹æäº¤é¡µé¢

```
<html lang="zh">
	<head>
        <title>preCalculate</title>
	</head>
	<body>
        <form method="GET" id="preCal" action="../cal">
            <input type="text" id="num" name="num">
            <input type="submit" value="go"/>
        </form>
	</body>
</html>
```

- åŠ è½½é¡µé¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676858663933)

### è®¿é—®

- è§‚å¯Ÿurl
	- å¯ä»¥çœ‹åˆ°
		- æäº¤ä½ç½®
		- å‚æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676860076912)

- ç¡®å®å‘å‡ºäº†è¯·æ±‚
	- ä½†æ˜¯æ²¡æœ‰å¾—åˆ° æ­£ç¡®çš„å“åº”
- çŠ¶æ€ç  404
	- å› ä¸ºè·¯ç”±æ²¡æœ‰ä¸“é—¨çš„å¤„ç†å‡½æ•°

### å¤„ç†è·¯ç”±

```
vi app.py
```

- é‡å†™app.py

```
from flask import request
from flask import Flask

app = Flask(__name__)

@app.route('/', methods=['POST', 'GET'])
def hello():
    return "hello"

@app.route('/cal', methods=['POST', 'GET'])
def cal():
    num = request.args.get("num")
    if num == "" or num == None:
        return 0
    else:
        result = 0
        num = int(num)
        for i in range(num+1):
            result += i
        return str(result)

if __name__ == "__main__":
    app.run(debug=True)
```

- åç«¯å¤„ç†ä¹‹å
- å‰ç«¯æµè§ˆå™¨åªçœ‹åˆ°æœ€ç»ˆç»“æœ

### æœ€ç»ˆæ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676860468052)

- æŸ¥çœ‹æºç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230220-1676860485708)

- åç«¯éƒ½å¤„ç†å¥½äº†
- å‰ç«¯çš„é¡µé¢æºä»£ç éå¸¸ç®€å•
- å¯ä»¥æŠŠç´¯åŠ ä¿®æ”¹ä¸ºç´¯ä¹˜å—ï¼Ÿ

### è§‚å¯Ÿç™¾åº¦æœç´¢çš„å‚æ•°

- å¯ä»¥çœ‹åˆ° 
	- è·¯ç”±s å¯¹åº”ç€ æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240417-1713319094470)

### æ€»ç»“ ğŸ¤¨
- è¿™æ¬¡äº†è§£äº†	
	- ä»€ä¹ˆæ˜¯åç«¯
	- ä»€ä¹ˆåˆæ˜¯å‰ç«¯ï¼ŸğŸ¤”
- å‰ç«¯
	- è´Ÿè´£å‘é€è¯·æ±‚(requests)
	- è´Ÿè´£æ¥æ”¶å“åº”(response)
	- ç½‘é¡µè®¾è®¡åšå›¾åˆ‡ç‰‡
	- ç®¡çš„æ˜¯çœ‹å¾—è§å¬å¾—ç€çš„éƒ¨åˆ†
	- å‰ç«¯javascriptä»£ç 
- åç«¯
	- è´Ÿè´£æ¥æ”¶è¯·æ±‚(requests)
	- è´Ÿè´£å‘é€å“åº”(response)
	- javaè¯­è¨€
	- åº”ç”¨æœåŠ¡å™¨ä½¿ç”¨
	- åå°æ•°æ®åº“æ“ä½œ
- è®¡ç®—ä»0åˆ°100æ²¡ä»€ä¹ˆæ„æ€
- å¯ä»¥ç»™å‡ºä¸€ä¸ªæ•´æ•°nè®¡ç®—ä»0åˆ°nçš„å’Œå—ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220505-1651727871909)

- å¯æ˜¯ç©¶ç«Ÿ
	- ä»€ä¹ˆæ˜¯è¯·æ±‚
	- ä»€ä¹ˆåˆæ˜¯å“åº”å‘¢ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹