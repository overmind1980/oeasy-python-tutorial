---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº† numpy.ndarrayçš„
	- ç´¢å¼•å’Œåˆ‡ç‰‡
- åŸºç¡€ç´¢å¼•å’Œåˆ‡ç‰‡ 
	- å’Œ åˆ—è¡¨ä¸€è‡´
- å¤šç»´ç´¢å¼•å’Œåˆ‡ç‰‡
	- åœ¨å¤§æ‹¬å·ä¸­å®ç°
	- ä¸åŒç»´åº¦ é€šè¿‡é€—å·åˆ’åˆ†

### åˆ›å»ºçº¯0é»‘è‰²å›¾

```
import numpy as np        
import cv2             
array = np.zeros((50,50),np.uint8)
print(array)           
cv2.imshow("image",array)
cv2.waitKey()          
cv2.destroyAllWindows()
```

- ç»“æœ
	- ç¡®å®æ˜¯50 * 50çš„çº¯é»‘å›¾

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944242714)

- å¯ä»¥åˆ›å»ºéçº¯0çš„å›¾å—ï¼Ÿ

### åˆ›å»ºçº¯1å›¾
```
import numpy as np        
import cv2             
array = np.ones((50,50),np.uint8)
print(array)           
cv2.imshow("image",array)
cv2.waitKey()          
cv2.destroyAllWindows()
```

- ç»“æœ
	- çœ‹èµ·æ¥è¿˜æ˜¯çº¯é»‘
	- ä½†æ˜¯å…·ä½“æ•°å€¼ä¸º1

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944338885)

- å¯ä»¥åˆ›å»ºçº¯ç™½çš„å›¾å—ï¼Ÿ

### åˆ›å»ºç™½è‰²å›¾
```
import numpy as np
import cv2         
array = np.ones((200,100),np.uint8)
array[:,:] = 255                                                            
print(array)       
cv2.imshow("image",array)
cv2.waitKey()   
cv2.destroyAllWindows()
```

- çº¯ç™½çš„é¢œè‰²æ˜¯255

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944439017)

- å¯ä»¥é»‘ä¸­å¸¦ç™½å—ï¼Ÿ

### é»‘è‰²å›¾åƒä¸­åˆ›å»ºç™½è‰²çŸ©å½¢
```
import cv2
import numpy as np
width = 400
height = 300
img = np.zeros((height, width), np.uint8)
img[100:200,250:300] = 255 #çºµåæ ‡èŒƒå›´100ï¼Œ200ï¼Œæ¨ªåæ ‡èŒƒå›´250,300
cv2.imshow("img", img)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»˜ç”»ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944545676)

- åˆ†æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240225-1708868681759)

- å¯ä»¥åè¿‡æ¥å—ï¼Ÿ
	- åœ¨ ç™½è‰²ç”»å¸ƒä¸Šç»˜åˆ¶é»‘è‰²

### é»‘ç™½æ¡çº¹
```
import cv2
import numpy as np
width = 400
height = 300
img = np.zeros ((height, width), np.uint8)
for i in range(0,width,40):
    img[ : , i:(i + 20)] = 255# çºµåæ ‡ç¼ºçœå°±æ˜¯ä»é¡¶åˆ°åº•
cv2.imshow("img", img)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944635238)

- çœ‹èµ·æ¥ä¼¼ä¹å¯ä»¥åšä¸ªé’¢ç´å·å¸˜
- å›¾åƒçš„åƒç´ çŸ©é˜µå¯ä»¥å¤åˆ¶å—ï¼Ÿ


### è®¾ç½®åƒç´ ç‚¹çš„é¢œè‰²

- ä½¿ç”¨ç´¢å¼• 
	- æ§åˆ¶åƒç´ ç‚¹çš„é¢œè‰²

```
import cv2       
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)     
image[6,25] = 0  
cv2.imshow("black pixel",image)
image[6,25] = 255
cv2.imshow("white pixel",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- æ³¨æ„è§‚å¯Ÿ
	- (y=6,x=25)ç‚¹å¤„çš„é¢œè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931663161)

- å¯ä»¥ä½¿ç”¨çŸ©é˜µæ‰¹é‡è®¾ç½®é¢œè‰²å—ï¼Ÿ

### è®¾ç½®çŸ©é˜µèŒƒå›´å†…çš„é¢œè‰²
```
import cv2     
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)   
image[38:75,184:231] = 0
cv2.imshow("black rectangle",image)
image[38:75,184:231] = 128
cv2.imshow("gray rectangle",image)
image[38:75,184:231] = 255
cv2.imshow("white rectangle",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- åœ¨çŸ©é˜µèŒƒå›´å†…çš„åƒç´ 
	- ç»Ÿä¸€è¢«è®¾ç½®ä¸ºä¸€ä¸ªå…·ä½“é¢œè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931972078)

- å¦‚æœå¿½ç•¥èµ·ç‚¹æˆ–è€…ç»ˆç‚¹ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### å¿½ç•¥èµ·ç‚¹æˆ–è€…ç»ˆç‚¹
```
import cv2              
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)            
image[:,184:231] = 255  
cv2.imshow("omit x",image)
image[38:75,:] = 255    
cv2.imshow("omit y",image)
image[:,:] = 255        
cv2.imshow("omit x and y",image)
key = cv2.waitKey()     
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703932338881)

### å¿½ç•¥xåæ ‡çš„æœ€å¤§å€¼
```
import cv2             
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)           
image[38:204,300:] = 255
cv2.imshow("omit x max",image)
key = cv2.waitKey()    
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ
	- xç›¸å½“äºä»300åˆ°æœ€å¤§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703932476456)

- å¿½ç•¥yçš„æœ€å°å€¼åˆä¼šå¦‚ä½•å‘¢ï¼Ÿ

### å¿½ç•¥yåæ ‡çš„æœ€å°å€¼
```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)
image[:80,150:300] = 255
cv2.imshow("omit y min",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ
	- yç›¸å½“äºä»0åˆ°80

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703933698098)


### å¤åˆ¶åƒç´ çŸ©é˜µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092352166)

- gear.jpg
	- åº”è¯¥å·²ç»å­˜åœ¨äº/home/shiyanlou

### å¤åˆ¶å›¾ç‰‡ä¸€éƒ¨åˆ†åƒç´ 

```
import cv2 
import numpy as np         
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)
y2 = 120
y1 = 84
x2 = 260
x1 = 180
width = x2 - x1
height = y2 - y1
img_dest = np.zeros((height, width), np.uint8)
img_dest[:,:] = image[y1:y2,x1:x2]
cv2.imshow("copy rectangle selection",img_dest )
cv2.imwrite("new_image.jpg",img_dest)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944780127)


### çŸ©å½¢é€‰åŒºçš„å¤åˆ¶äºç²˜è´´

```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)        
height, width = image.shape         
print(image)                        
y2 = 187                            
y1 = 84                             
x2 = 300                            
x1 = 150 
image[0:(y2-y1),0:(x2-x1)] = image[y1:y2,x1:x2]
cv2.imshow("copy rectangle selection",image)
key = cv2.waitKey()                 
if key & 0xFF == ord("q"):          
    cv2.destroyAllWindows()
```

- å®Œæˆå¤åˆ¶çŸ©é˜µåŒºåŸŸåƒç´ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703943627354)

### å›¾åƒçš„å¤åˆ¶
```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)
y2 = 120
y1 = 84
x2 = 260
x1 = 180
for y_num in range(2):
    for x_num in range(3):
        print(y_num,x_num)
        print((y_num+1)*(y2-y1))
        print((x_num+1)*(x2-x1))
        image[y_num * (y2-y1):(y_num+1)*(y2-y1),x_num*(x2-x1):(x_num+1)*(x2-x1)] = image[y1:y2,x1:x2]
cv2.imshow("copy rectangle selection",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- å¤åˆ¶äº†ä¸€ä¸ª2 * 3çŸ©é˜µçš„åƒç´ å†…å®¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703943724300)


- æˆ‘å¯ä»¥æŠŠåˆæˆå›¾æ‹†æˆä¸€å¸§å¸§çš„å›¾åƒå—ï¼Ÿ

### å›¾åƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092372695)

- ä¸Šå›¾horse.pngåº”è¯¥åœ¨~

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703943850264)

- å¦‚æœæ²¡æœ‰å¯ä»¥åˆ·æ–°è“æ¡¥ç¯å¢ƒ

### å›¾åƒåˆ‡åˆ†

- å°†4 * 4 çš„è·‘é©¬å›¾
	- éƒ½å˜æˆåŒä¸€å¼ çš„å›¾åƒ

```
import cv2         
image = cv2.imread("/home/shiyanlou/horse.png",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
y2 = int(height / 4)
y1 = 0             
x2 = int(width / 4)
x1 = 0             
for y_num in range(4):
    for x_num in range(4):
        print(y_num,x_num)
        print((y_num+1)*(y2-y1))
        print((x_num+1)*(x2-x1))
        image[y_num * (y2-y1):(y_num+1)*(y2-y1),x_num*(x2-x1):(x_num+1)*(x2-x1)] = image[y1:y2,x1:x2]
cv2.imshow("copy rectangle selection",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703944019335)

- èƒ½å¦æŠŠè¿™äº›å›¾åƒåƒç´ å¤åˆ¶åˆ°æ–°å›¾åƒä¸Šå‘¢ï¼Ÿ

### åˆ¶ä½œå›¾ç‰‡åºåˆ—æˆ–è€…ä¹å®«æ ¼
```
import cv2                 
import numpy as np         
image = cv2.imread("/home/shiyanlou/horse.png",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
y2 = int(height / 4)       
y1 = 0                     
x2 = int(width / 4)        
x1 = 0                     
for y_num in range(4):     
    for x_num in range(4): 
        print(y_num,x_num) 
        print((y_num+1)*(y2-y1))
        print((x_num+1)*(x2-x1))
        num = y_num * 4 + x_num
        new_image = np.zeros((y2-y1,x2-x1),np.uint8)
        new_image[:] = image[y_num * (y2-y1):(y_num+1)*(y2-y1),x_num*(x2-x1):(x_num+1)*(x2-x1)]
        new_image_name = "horse_" + str(num) + ".jpg"
        cv2.imwrite(new_image_name,new_image)
key = cv2.waitKey()        
if key & 0xFF == ord("q"): 
    cv2.destroyAllWindows()
```

- è¿›å…¥Codeæ–‡ä»¶å¤¹è¿è¡Œæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703946188738)

- æˆåŠŸå®Œæˆå›¾ç‰‡åˆ‡åˆ†
- æ€»ç»“ä¸€ä¸‹å§

### æ€»ç»“
- è¿™æ¬¡äº†è§£äº†åŸºç¡€å›¾åƒçš„æ„æˆ
	- é»‘åº•
	- ç™½åº•
	- é»‘åº•ç™½å—
	- ç™½åº•é»‘å—ç­‰
- å¯ä»¥å¤åˆ¶å›¾åƒä¸­çš„ä¸€éƒ¨åˆ†åƒç´ çŸ©é˜µ
- ä¹Ÿå¯ä»¥å°†å›¾åƒæŒ‰ç…§æŸç§æ–¹å¼åˆ‡å¼€
	- å°±åƒåˆ‡åˆ†ä¹å®«æ ¼é‚£æ ·	

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703947055192)

- ä¸è¿‡ç›®å‰ç©çš„éƒ½æ˜¯ç°åº¦è‰²å½©æ¨¡å¼
- èƒ½å¦æ“ä½œå½©è‰²å›¾å‘¢ï¼Ÿ
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹