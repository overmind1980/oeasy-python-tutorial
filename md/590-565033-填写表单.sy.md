---
show: step
version: 1.0
enable_checker: true
---

# å®‰è£…ç¯å¢ƒ

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬å°è¯•ç”¨seleniumè®¿é—®äº†ä¸€ä¸ªç½‘é¡µ
	- åŸç†ä¸Š selenium å’Œ requestså‘è¯·æ±‚ å·®ä¸å¤š
	- éƒ½æ˜¯å‘é€è¯·æ±‚
	- åªä¸è¿‡requestsæ˜¯ç›´æ¥å‘é€è¯·æ±‚
	- seleniumç”¨çœŸå®çš„æµè§ˆå™¨å‘é€è¯·æ±‚
		- å¯ä»¥åŠ¨æ€åŠ è½½ä¸€äº›åå°çš„ä¸€äº›æ•°æ®
- å¾—åˆ°ç½‘é¡µæºæ–‡ä»¶ä¹‹å
	- éƒ½å¯ä»¥xpathè¿›è¡Œç­›é€‰æå–

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565019/uid1190679-20241211-1733923842542) 

- ç”¨seleniumè¿˜å¯ä»¥åšäº›
	- ä»€ä¹ˆ`ç‹¬ç‰¹`çš„ä¸œè¥¿ä¹ˆï¼ŸğŸ¤”

### å…ˆå¤ç°ç¯å¢ƒ

```
pip3 install selenium
cd Code
wget https://labfile.oss.aliyuncs.com/courses/3584/geckodriver-v0.35.0-linux64.tar.gz
tar xf geckodriver-v0.35.0-linux64.tar.gz
echo $PATH
sudo cp ./geckodriver /usr/bin
geckodriver
```

- å®‰è£…é©±åŠ¨å’Œç±»åº“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565019/uid1190679-20241217-1734393558927) 

- <kbd>ctrl</kbd> + <kbd>c</kbd>
	- ç»“æŸè¿›ç¨‹

### æŸ¥çœ‹æ–‡æ¡£

- å¯ä»¥é€šè¿‡seleniumç›´æ¥æ‰¾åˆ°å…ƒç´ 
	- ç„¶åå¡«å†™è¡¨å•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663037765197)

- æœ€åç‚¹å‡»æŒ‰é’®

### è§‚å¯Ÿç½‘é¡µ

- https://www.selenium.dev/selenium/web/web-form.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231028-1698457562084)

### æ‰¾åˆ°æ–‡æœ¬æ¡†çš„name

- æ‰¾åˆ°æœ‰ä¸€ä¸ªnameä¸ºmy-textçš„inputæ–‡æœ¬æ¡†
	- ç¨åè¦åœ¨è¿™ä¸ªæ–‡æœ¬æ¡†æ¡†é‡Œé¢å†™å­—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231028-1698457961072)

### æ¨¡æ‹Ÿé”®ç›˜è¾“å…¥

```python
import time

from selenium import webdriver
from selenium.webdriver.common.by import By

driver = webdriver.Firefox()
driver.get("https://www.selenium.dev/selenium/web/web-form.html")
text_box = driver.find_element(by=By.NAME, value="my-text")
text_box.send_keys("Selenium")
time.sleep(5)
driver.quit()
```

- æœ¬æœºæ‰§è¡Œå¯ä»¥æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663038159015)

- æˆ‘ä»¬è¯•è¯•è“æ¡¥

### æ‰¾åˆ°æäº¤æŒ‰é’®æ ‡ç­¾

- æäº¤æŒ‰é’®çš„æ ‡ç­¾æ˜¯button

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231028-1698458339979)

### æ¨¡æ‹ŸæŒ‰é’®ç‚¹å‡»

- ä½¿ç”¨cssçš„é€‰æ‹©å™¨
	- é€‰æ‹©å…ƒç´ button
		- æäº¤è¡¨å•

```python
import time

from selenium.webdriver.common.by import By
from selenium import webdriver

driver = webdriver.Firefox()
driver.get("https://www.selenium.dev/selenium/web/web-form.html")
text_box = driver.find_element(by=By.NAME, value="my-text")
text_box.send_keys("Selenium")
submit_button = driver.find_element(by=By.CSS_SELECTOR, value="button")
submit_button.click()
time.sleep(15)
driver.quit()
```

- ç¡®å®å¯ä»¥æäº¤

### æäº¤ä¹‹åçš„ç»“æœé¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231028-1698459109501)

- æºä»£ç å¦‚ä¸‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231028-1698459174739)

- æäº¤ä¹‹åå¯ä»¥å¯¹è¿”å›é¡µè¿›è¡Œåˆ¤æ–­ä¹ˆï¼Ÿ

### è¿”å›é¡µåˆ¤æ–­

```python
import time

from selenium.webdriver.common.by import By
from selenium import webdriver

driver = webdriver.Firefox()
driver.get("https://www.selenium.dev/selenium/web/web-form.html")
text_box = driver.find_element(by=By.NAME, value="my-text")
text_box.send_keys("Selenium")
submit_button = driver.find_element(by=By.CSS_SELECTOR, value="button")
submit_button.click()
time.sleep(15)
message = driver.find_element(by=By.ID, value="message")
value = message.text
print(value == "Received!")
driver.quit()
```

- æäº¤è¡¨å•å
	- driverå†å»æŸ¥æ‰¾å…ƒç´ 
	- å°±åœ¨æ–°é¡µé¢é¢æŸ¥æ‰¾äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663038434926)

- å¯ä»¥ä¸ç‚¹å‡»æŒ‰é’®
- è€ŒæŒ‰ç…§å›è½¦çš„æ–¹å¼æäº¤ä¹ˆï¼Ÿ

### å›è½¦æäº¤

```
import time

from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium import webdriver

driver = webdriver.Firefox()
driver.get("https://www.selenium.dev/selenium/web/web-form.html")
text_box = driver.find_element(by=By.NAME, value="my-text")
text_box.send_keys("Selenium")
text_box.send_keys(Keys.ENTER)
time.sleep(15)#å»¶è¿Ÿæ—¶é—´ç­‰å¾…å“åº”
message = driver.find_element(by=By.ID, value="message")
value = message.text
print(value == "Received!")
time.sleep(5)
driver.quit()
```

- éœ€è¦å¯¼å…¥ä¸€ä¸ªKeys
	- ç¡®å®å¯ä»¥å‘é€å›è½¦åˆ°æ–‡æœ¬æ¡†
	- ç„¶åæäº¤
- æˆ‘æƒ³å¾—åˆ°æ•´ä¸ªæäº¤åçš„ç½‘é¡µç”Ÿæˆçš„å…ƒç´ æ ‘å¯ä»¥å—ï¼Ÿ

### å¾—åˆ°å…ƒç´ æ ‘

```
import time

from selenium.webdriver.common.by import By
from selenium.webdriver.common.keys import Keys
from selenium import webdriver
from lxml import etree

driver = webdriver.Firefox()
driver.get("https://www.selenium.dev/selenium/web/web-form.html")
text_box = driver.find_element(by=By.NAME, value="my-text")
text_box.send_keys("Selenium")
text_box.send_keys(Keys.ENTER)
time.sleep(15)
# è·å–é¡µé¢æºä»£ç 
source = driver.page_source
et_html = etree.HTML(source)
str_html = etree.tostring(et_html,pretty_print=True).decode()
print(str_html)
driver.quit()
```

- ç”Ÿæˆç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565033/uid1190679-20241217-1734399629472) 

- æˆ‘ä»¬å¯ä»¥é‚£è¿™ä¸€å¥—ç”¨åˆ°ç™¾åº¦ä¸Šä¹ˆï¼Ÿ

### è¯¢é—®ai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565033/uid1190679-20241211-1733924850314) 

- aiç»™å‡ºäº†ä»£ç 
	- ä»£ç å¯ä»¥æ‰§è¡Œ

```
import time
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

# åˆ›å»ºFirefoxæµè§ˆå™¨å®ä¾‹
driver = webdriver.Firefox()

# æ‰“å¼€ç™¾åº¦é¦–é¡µ
driver.get('https://www.baidu.com')

# æ‰¾åˆ°æœç´¢æ¡†å…ƒç´ 
search_box = driver.find_element('name', 'wd')

# åœ¨æœç´¢æ¡†ä¸­è¾“å…¥'oeasy'
search_box.send_keys('oeasy')

# æ¨¡æ‹ŸæŒ‰ä¸‹å›è½¦é”®è¿›è¡Œæœç´¢
search_box.send_keys(Keys.ENTER)

# å¯ä»¥æ·»åŠ ä¸€äº›ç­‰å¾…æ—¶é—´ï¼Œä»¥ä¾¿æŸ¥çœ‹æœç´¢ç»“æœï¼ˆè¿™é‡Œç­‰å¾…5ç§’ï¼‰
time.sleep(5)

# å…³é—­æµè§ˆå™¨
driver.quit()
```

- nameä¸ºwdçš„å…ƒç´ ç©¶ç«ŸæŒ‡çš„æ˜¯ä»€ä¹ˆï¼Ÿ

### æ‰¾åˆ°ä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663038765776)

- æƒ³è¦æœç´¢ä¹‹å
	- è·å¾—æœç´¢è®°å½•çš„æ ‡é¢˜

### å†é—®ai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565033/uid1190679-20241211-1733925313528) 

### ç¼–å†™ä»£ç 

```python3
import time
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By

# åˆ›å»ºChromeæµè§ˆå™¨å®ä¾‹
driver = webdriver.Firefox()
driver.get('https://www.baidu.com')
search_box = driver.find_element('name', 'wd')
search_box.send_keys('oeasy')
search_box.send_keys(Keys.ENTER)
time.sleep(2)
title_elements = driver.find_elements(By.CSS_SELECTOR, 'h3.t')
for title_element in title_elements:
    print(title_element.text)
driver.quit()
```

- ç¡®å®å¯ä»¥æœç´¢åˆ°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565033/uid1190679-20241211-1733925396564) 

### å»¶æ—¶æ§åˆ¶

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC

# åˆ›å»º Firefox æµè§ˆå™¨å®ä¾‹
driver = webdriver.Firefox()

# æ‰“å¼€ç™¾åº¦é¦–é¡µ
driver.get('https://www.baidu.com')

# å®šä½æœç´¢æ¡†å¹¶è¾“å…¥æœç´¢è¯
search_box = driver.find_element(By.NAME, 'wd')
search_box.send_keys('oeasy')
search_box.send_keys(Keys.ENTER)

try:
    # ç­‰å¾…æœç´¢ç»“æœçš„ç›¸å…³å…ƒç´ å‡ºç°
    wait = WebDriverWait(driver, 10)  # æœ€å¤šç­‰å¾… 10 ç§’
    title_elements = wait.until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, 'h3.t')))

    # æ‰“å°æ¯ä¸ªæ ‡é¢˜å…ƒç´ çš„æ–‡æœ¬å†…å®¹
    for title_element in title_elements:
        print(title_element.text)
finally:
    # å…³é—­æµè§ˆå™¨
    driver.quit()
```

- å®ç°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/565033/uid1190679-20241212-1733967831555) 

## æ€»ç»“ 
- è¿™æ¬¡ ä½¿ç”¨seleniumæ¨¡æ‹Ÿäº†æµè§ˆå™¨çš„è¡Œä¸º
	- æ¨¡æ‹Ÿäº†å¡«å†™è¡¨å•çš„è¿‡ç¨‹
	- æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å¡«å†™è¡¨å•
		- å¯ä»¥ å¡«å†™è¡¨å• + åŠ å›è½¦
		- ä¹Ÿå¯ä»¥ å¡«å†™è¡¨å• + ç‚¹å‡»æŒ‰é’®
- selenium å’Œ å…¶ä»–çˆ¬è™«å·¥å…·ç›¸æ¯”
	- å¯ä»¥åˆ©ç”¨deckodriver 
		- é©±åŠ¨firefoxå’Œç½‘é¡µåšå‡º
			- äº¤äº’åŠ¨ä½œ 
			- interaction
- è¿˜æœ‰ä»€ä¹ˆäº¤äº’åŠ¨ä½œå¯ä»¥åšå—ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ğŸ‘‹