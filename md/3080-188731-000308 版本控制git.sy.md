---
show: step

version: 1.0
enable_checker: true
---

# 主控程序

## 回忆上次内容

- 上次强化了主控过程
	- 导入
	- 处理
	- 输出
- 了解了try的完全体
	- try
	- except
	- else
	- finally
- 发现导入部分
	- 可以再分为两个子模块
	- 一个输入a
	- 一个输入b
- 可以再拆分么？🤔

### 先备份
- 再继续之前
- 我们先把目前的内容备份起来
- 使用git进行版本控制

```
# 初始化
git init
#把目前apple文件夹下所有的都备份
git add .
# 备份
git commit
```
- commit遇到问题
- 你是谁的问题

### 解决问题

- 提示需要用户名和邮箱
- 因为工程可能是个多人合作的
- 需要知道提交是谁做的
- 这里用户名和邮箱写自己的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629058116713)

### 完成备份
- 按提示录入邮箱和用户名

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629058162252)

- 对提交做注释

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629058247277)

- 我们对于这个提交可以做一些描述
- 这就把我们代码目前的这个状态备份下来了

### 查看版本

```
#查看提交版本的日志
git log
```

- 目前有一个提交commit

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629058322909)

### 开始修改

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629059329452)

- 把输入模块再拆分
	- 输入a、inputa.py
	- 输入b、inputb.py
- 调整输入函数
- 调整处理函数process.py

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629059400180)

### 尝试运行

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629059458865)

- 试验成功！
- 但是这么写是有问题的！
- 因为它不符合禅意
- what？

### zen 禅
- Flat is better than nested.
- 扁平胜于嵌套

- 现在的控制结构:
- 中控main
	- 输入 input
		- 输入a inputa
		- 输入b inputb
	- 处理process
	- 输出outprint

- 结构太多出现了三层

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211018-1634557484689)

### 过度抽象

- 没有必要嵌套成三层
- 我们应该更多使用扁平
- 两层能轻松解决的
	- 别弄到三层
- tcp/ip四层就能搞定的事
	- osi非要搞到七层，一定不好做
- 层与层之间的接口是很容易固化的
	- 这不是教条
	- 而是实际开发中的经验
- 你见过那种层层传递过程中的繁琐和损耗么？
- 回滚回去
- 还好做了版本控制

### 版本回滚
- 先把当前的这个提交了

```
git add .
git commit
git log
```

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211021-1634809992536)

- 我们可以看到有两次提交
	- 第一次
		- 提交信息为init
		- 特征码为cad...紫色部分
	- 第二次
		- 提交信息为add something
		- 特征码为16f...绿色部分

### 回滚


```
git checkout 第一次提交的特征码...
```

- 然后再签出老的那个

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210816-1629060233816)

- 回到初始状态了
	- 新保留的分支就不要了
- git就是这样的版本控制软件
	- 可以恢复到任何你commit过的时间点
	- 甚至是任何人在任何时间点commit过的版本
	- 仿佛一个时光机
- 在不同时间和不同人提交的版本间穿梭
- 重要的原则是
	- 扁平胜于嵌套

### 复杂

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211018-1634558261010)

- 更多的层级是繁琐的
- 奢华繁复是堕落的开始
- 追求美之为美
- 你看孔雀为了美进化到了什么样子
	- 尾大不掉
- 繁文冗节只会造成辞藻的堆砌
	- 陷入到文字割裂的离散世界中去
	- 可世界本是连续的

### 美之为美

- 凡尔赛和圆明园都不是励精图治的审美

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211018-1634558307886)

- 金玉其外
- 败絮其中
- 金玉满堂
- 莫之能守
- 什么是能够自强的审美呢

### 简单

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211018-1634559790834)

- 断舍离
	- 枯山水
	- 说的都是化缘
- 为道日损，损之又损，以至于无为
	- 无为而无不为
- 致虚极守静笃
	- 为的是蓄势待发
- 静观其变
	- 要留白才能作画
- 代码的变化本身就是一种涅槃
	- 消珥过去的自己
	- 在迭代中获得新的生命

### 无为
- 为无为
	- 才能全面观察和蓄力
- 味无味
	- 才能有敏感的味觉
- 事无事
	- 才能有机敏的反应


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211018-1634558666275)

- 静下来品味
	- 禅茶一味
	- 感觉是一致的


### 一致

- Explicit is better than implicit.
	- 明了胜于晦涩（优美的代码应当是明了的，命名规范，风格相似）
- Simple is better than complex.
	- 简洁胜于复杂（优美的代码应当是简洁的，不要有复杂的内部实现）
- Complex is better than complicated.
	- 复杂胜于凌乱（如果复杂不可避免，那代码间也不能有难懂的关系，要保持接口简洁）
- Flat is better than nested.
	- 扁平胜于嵌套（优美的代码应当是扁平的，不能有太多的嵌套）
- 以上说的都是一回事：
	- 简单而且明确！
	- 形成了上面的观念就会发现代码的美与丑
	- 代码的审美来自于以上的判断

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211020-1634726051799)

- Beautiful is better than ugly.
	- 优美胜于丑陋（Python 以编写优美的代码为目标）
- 审美僵化是可怕的
	- 不过保持简单且明确
	- 就可以保持天真的状态

## 总结
- 使用了版本控制git
	- 制作备份
	- 进行回滚
- 尝试了嵌套的控制结构
	- 层层控制
	- 不过非到不得以
	- 尽量不要太多层次的嵌套
	- 虽然这样从顶到底
	- 含义明确
- 但是扁平难道就不能含义明确么？
- 我还可以做点什么，让程序更加明确呢？🤔
- 我们下次再说！👋