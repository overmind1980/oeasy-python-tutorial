---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº†å›¾åƒçš„shape
	- é«˜åº¦
	- å®½åº¦
	- é€šé“æ•°
- å¹¶ä¸”æŠŠå›¾åƒä»RGBè‰²å½©æ¨¡å¼ä¿®æ”¹ä¸ºç°åº¦è‰²å½©æ¨¡å¼
	- ç»“æœä»ç„¶æ˜¯ä¸‰ç»´åˆ—è¡¨
- çœŸæ­£çš„ç°åº¦å›¾ä¹Ÿæ˜¯ä¸‰ç»´åˆ—è¡¨å—ï¼ŸğŸ¤”

### ç´ æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699088581080)

- å‡†å¤‡ç´ æå›¾ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703912098758)

- é‡å¯è“æ¡¥åä¼šå‘ç°gear.jpg

### ä»¥ç°åº¦çš„æ–¹å¼è¯»å–å›¾åƒ

```
import cv2                                                     
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)                                      
print(image)                                                   
print(image.shape)                                                 
key = cv2.waitKey()                                            
if key & 0xFF == ord("q"):                                     
    cv2.destoryAllWindows()
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703929234703)

- é™ç»´æˆäºŒç»´æ•°ç»„äº†å—ï¼Ÿ

### æ•°æ®ç±»å‹ä¸å›¾åƒç»´åº¦
```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)
height, width = image.shape
print(image)
print("type(image)====", type(image))
print("image.ndim====", image.ndim)
print("image.dtype====", image.dtype)
print("height====",height)
print("width====",width)
print("image.size====", image.size)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703929386222)

- imageçš„ç±»å‹æ˜¯numpyæ•°ç»„
	- äºŒç»´æ•°ç»„
	- æ•°æ®ç±»å‹ä¸º8-bitçš„æ— ç¬¦å·æ•´æ•°
- æ³¨æ„shapeä¸­
	- å…ˆå¾—åˆ°çš„æ˜¯é«˜åº¦å€¼
	- åå¾—åˆ°çš„æ˜¯å®½åº¦å€¼
- å…·ä½“æ•°å€¼æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ


### æŸ¥çœ‹å…·ä½“åƒç´ ä¿¡æ¯
```
import cv2 
image = cv2.imread("gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)
height, width = image.shape
print(image)
print("image[0,0]=======",image[0][0])
print("image[0,1]=======",image[0][1])
print("image[1,0]=======",image[1][0])
print("image[1,1]=======",image[1][1])                                      
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- æŸ¥çœ‹å›¾åƒæ—¶
	- å¯ä»¥ç”¨æ‰‹è§¦æ§æ¿æåˆæˆ–æ”¾å¤§å›¾åƒå·¦ä¸Šè§’
		- ç¬¬ä¸€ç»´åº¦æ˜¯çºµåæ ‡y
		- ç¬¬äºŒç»´åº¦æ˜¯æ¨ªåæ ‡x

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708757730579)

- å¯ä»¥åšä¸€ä¸ªå•åƒç´ çš„jpgæ–‡ä»¶å—ï¼Ÿ

### å•åƒç´ çš„å›¾ç‰‡

- è§‚å¯ŸçŸ©é˜µæ•ˆæœ

```
import cv2 
import numpy as np
vector = np.zeros((1,1),np.uint8)
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector",vector)
vector[0,0] = 255 
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector2",vector)
cv2.waitKey()
cv2.destroyAllWindows()
```

- åˆ¶ä½œäº†
	- ä¸€ä¸ªçº¯é»‘åƒç´ 
	- ä¸€ä¸ªçº¯ç™½åƒç´ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931155992)

- å¯ä»¥è®©åƒç´ æ›´å¤æ‚ä¸€äº›å—ï¼Ÿ

### å¤æ‚åƒç´ 

- è®¾ç½®ä¸€ä¸ª3*1çš„å‘é‡çŸ©é˜µ
	- å¹¶è§‚å¯Ÿ

```
import cv2
import numpy as np
matrix = np.zeros((3,1),np.uint8)
print(matrix)
cv2.imshow("matrix",matrix)
for n in range(3):
    matrix[n,0] = int(256/3*n)
print("="*50)
print(matrix)
cv2.imshow("matrix_2",matrix)
cv2.waitKey()
cv2.destroyAllWindows()
```

- éƒ½æ˜¯ 3 * 1çš„çŸ©é˜µ
	- ä¸€ä¸ªæ˜¯çº¯é»‘
	- å¦ä¸€ä¸ªæ˜¯æ¸å˜è‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708758136839)

- å¯ä»¥åš2*2çŸ©é˜µå—ï¼Ÿ

### 2*2çš„çŸ©é˜µ
```
import cv2
import numpy as np
matrix = np.zeros((2,2),np.uint8)
print(matrix)
cv2.imshow("matrix",matrix)
for i in range(2):
    for j in range(2):
        matrix[i,j] = int(256/4 * (i*2 + j ))
print("="*50)
print(matrix)
cv2.imshow("matrix_2",matrix)
cv2.waitKey()
cv2.destroyAllWindows()
```

- å¹¶è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708758243069)

- ç¬¬ä¸€ç»´åº¦ æ˜¯ è¡Œ
	- ç¬¬äºŒç»´åº¦ æ˜¯ åˆ—
- åšä¸€ä¸ªæ›´å¤§ç»“æ„çš„ç”»å¸ƒ

### ç»å…¸5*7

```
import cv2
import numpy as np

canvas = np.zeros((7,5),np.uint8)
print(canvas)
cv2.imshow("canvas",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708759311703)

### å†™å­—

```
import cv2
import numpy as np

canvas = np.zeros((7,5),np.uint8)
cv2.putText(canvas,"0",(0,5),cv2.FONT_HERSHEY_DUPLEX,0.2,255,1)
print(canvas)
cv2.imshow("canvas",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

|æ•°å€¼ | é¢œè‰²|
|---|---|
|255 |çº¯ç™½|
|0|çº¯é»‘|

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708759327679)

- å¯ä»¥é€šè¿‡æ»šåŠ¨æ¡æ§åˆ¶è¾“å‡ºçš„å­—ç¬¦å—ï¼Ÿ

### è¾“å‡ºå­—ç¬¦7*5

```
import cv2
import numpy as np
def callback(value):
    num = cv2.getTrackbarPos('ascii', 'canvas')
    canvas = np.zeros((7,6),np.uint8)
    print(num,chr(num),sep=":")
    cv2.putText(canvas,chr(num),(0,5),cv2.FONT_HERSHEY_SIMPLEX,0.2,255,1)
    print(canvas)
    cv2.imshow('canvas', canvas)

cv2.namedWindow('canvas', cv2.WINDOW_NORMAL)
cv2.createTrackbar('ascii', 'canvas', 0, 127, callback)
canvas = np.zeros((7,6),np.uint8)
cv2.putText(canvas,"0",(0,5),cv2.FONT_HERSHEY_DUPLEX,0.2,255,1)
cv2.imshow("canvas",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240225-1708829287188)

### æ€»ç»“
- è¿™æ¬¡äº†è§£äº†ä¸€ä¸ªçº¯ç°åº¦å›¾çš„ç»“æ„
	- çº¯ç°åº¦å›¾è¢«ç†è§£ä¸ºä¸€ä¸ªäºŒç»´çŸ©é˜µ
		- ç¬¬ä¸€ç»´ æ˜¯ é«˜åº¦y
		- ç¬¬äºŒç»´ æ˜¯ å®½åº¦x
- åœ¨å›¾åƒä¸­çš„æ¯ä¸€ä¸ªç‚¹ 
	- å¯¹åº”çš„åƒç´ 
	- éƒ½å¯ä»¥æ˜ å°„åˆ°ä¸€ä¸ªuint-8
	- æ— ç¬¦å·æ•´å‹1å­—èŠ‚(8-bit)
- ä¸€ä¸ªå›¾åƒ åœ¨opencvé‡Œ å°±å¯¹åº”ä¸€ä¸ªçŸ©é˜µ
	- è¿™çŸ©é˜µ å°±æ˜¯ å›¾åƒçš„åŸºç¡€
- è¿™çŸ©é˜µ æœ‰ä»€ä¹ˆé—¨é“å‘¢ï¼Ÿ
	- æ€ä¹ˆç©å‘¢ï¼Ÿï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹