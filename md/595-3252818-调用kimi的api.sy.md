---
show: step
version: 1.0
enable_checker: true
---

# çˆ¬å–ç™¾åº¦æŒ‡æ•°

## å›å¿†

- ä¸Š
- è¿™ï¼ŸğŸ¤”

### é—®é—®kimi

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059421276) 

- æä¾›äº†å‡ ç§æ–¹å¼
	- æœ€ç®€å•çš„æ˜¯openaiçš„æ–¹å¼

```
from openai import OpenAI
client = OpenAI(
    api_key="MOONSHOT_API_KEY",  # å°†MOONSHOT_API_KEYæ›¿æ¢ä¸ºä½ çš„API Key
    base_url="https://api.moonshot.cn/v1",
)
completion = client.chat.completions.create(
    model="moonshot-v1-8k",  # æŒ‡å®šKimiçš„æ¨¡å‹åç§°
    messages=[
        {"role": "system", "content": "ä½ æ˜¯Kimiï¼Œç”±Moonshot AIæä¾›çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹..."},
        {"role": "user", "content": "ä½ å¥½ï¼Œæˆ‘å«æé›·ï¼Œ1+1ç­‰äºå¤šå°‘ï¼Ÿ"}
    ],
    temperature=0.3,
)
print(completion.choices[0].message.content)
```

- api-keyæ€ä¹ˆå¾—åˆ°ï¼Ÿ

### é—®é—®ai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059529294) 

- æ‰¾åˆ°ç½‘å€
	- å¯ä»¥ä½¿ç”¨curlçš„æ–¹å¼ 

### ç›´æ¥ä½¿ç”¨

```
curl https://api.moonshot.cn/v1/chat/completions \
    -H "Content-Type: application/json" \
    -H "Authorization: Bearer $MOONSHOT_API_KEY" \
    -d '{
        "model": "moonshot-v1-8k",
        "messages": [
            {"role": "system", "content": "ä½ æ˜¯ Kimiï¼Œç”± Moonshot AI æä¾›çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹ï¼Œä½ æ›´æ“…é•¿ä¸­æ–‡å’Œè‹±æ–‡çš„å¯¹è¯ã€‚ä½ ä¼šä¸ºç”¨æˆ·æä¾›å®‰å…¨ï¼Œæœ‰å¸®åŠ©ï¼Œå‡†ç¡®çš„å›ç­”ã€‚åŒæ—¶ï¼Œä½ ä¼šæ‹’ç»ä¸€åˆ‡æ¶‰åŠææ€–ä¸»ä¹‰ï¼Œç§æ—æ­§è§†ï¼Œé»„è‰²æš´åŠ›ç­‰é—®é¢˜çš„å›ç­”ã€‚Moonshot AI ä¸ºä¸“æœ‰åè¯ï¼Œä¸å¯ç¿»è¯‘æˆå…¶ä»–è¯­è¨€ã€‚"},
            {"role": "user", "content": "ä½ å¥½ï¼Œæˆ‘å«æé›·ï¼Œ1+1ç­‰äºå¤šå°‘ï¼Ÿ"}
        ],
        "temperature": 0.3
   }'
```

- è¿˜æ˜¯éœ€è¦api-key

### æ³¨å†Œå¹¶å¾—åˆ°apikey

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059639292) 

- æ³¨å†Œå å¯ä»¥å¤åˆ¶ä¸€æ¬¡api-key
	- ä»¥åå°±å†ä¹Ÿçœ‹ä¸åˆ°è¿™ä¸ªapi-keyäº†

### å°†api-keyæ”¾å…¥curlå‘½ä»¤

- å¯ä»¥å¾—åˆ°ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059735472)

- èƒ½ç”¨pythonæ„é€ è¿™ä¸ªpostè¯·æ±‚å—ï¼Ÿ

### ä½¿ç”¨request

```
import requests
import json

# ä½ çš„Moonshot API Key
api_key = 'sk-8dYpvsVLBZirLzL9wQzOVjlytefRFWrEG71VMvYp7VwTh58E'

# è®¾ç½®è¯·æ±‚å¤´
headers = {
    'Authorization': f'Bearer {api_key}',
    'Content-Type': 'application/json'
}

# APIè¯·æ±‚åœ°å€
url = 'https://api.moonshot.cn/v1/chat/completions'

# æ„é€ è¯·æ±‚ä½“ï¼Œè¿™é‡Œä»¥å•è½®å¯¹è¯ä¸ºä¾‹
data = {
    "model": "moonshot-v1-8k",  # æŒ‡å®šæ¨¡å‹ï¼Œæ ¹æ®å®é™…æƒ…å†µå¯èƒ½éœ€è¦æ›´æ”¹
    "messages": [
        {"role": "user", "content": "æŠŠè¿™æ®µè¯æ¢ä¸ªè¯´æ³•å‘Šè¯‰æˆ‘,ç›´æ¥ç»™æˆ‘ç¿»è¯‘ç»“æœï¼Œä¸è¦å…¶ä»–ï¼šä»Šå¤©å¤©æ°”ä¸é”™ï¼ŒæŒºé£å’Œæ—¥ä¸½çš„ï¼Œæˆ‘æ¥å­¦å­¦aiï¼Œè¿™å…¶å®å¾ˆç®€å•çš„ï¼"}
    ],
    "temperature": 0.5  # æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶å›ç­”çš„éšæœºæ€§
}

# å‘é€POSTè¯·æ±‚
response = requests.post(url, headers=headers, data=json.dumps(data))

# æ£€æŸ¥å“åº”çŠ¶æ€ç 
if response.status_code == 200:
    # è§£æå“åº”å†…å®¹
    response_data = response.json()
    print('Kimiçš„å›ç­”ï¼š', response_data['choices'][0]['message']['content'])
else:
    print('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç ï¼š', response.status_code)
```

- kimiå»ºè®®æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨pythonè°ƒç”¨apiå‘¢ï¼Ÿ

### openai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059876190) 

- https://platform.moonshot.cn/docs/api/chat#%E5%8D%95%E8%BD%AE%E5%AF%B9%E8%AF%9D

```
from openai import OpenAI
client = OpenAI(
    api_key="sk-NsGzMroKqaWeHElVRRBBW5bXSoCzhjbdkgRf3Nh6kcWrTcyG",  # å°†MOONSHOT_API_KEYæ›¿æ¢ä¸ºä½ çš„API Key
    base_url="https://api.moonshot.cn/v1",
)
completion = client.chat.completions.create(
    model="moonshot-v1-8k",  # æŒ‡å®šKimiçš„æ¨¡å‹åç§°
    messages=[
        {"role": "system", "content": "ä½ æ˜¯Kimiï¼Œç”±Moonshot AIæä¾›çš„äººå·¥æ™ºèƒ½åŠ©æ‰‹..."},
        {"role": "user", "content": "ä½ å¥½ï¼Œæˆ‘å«æé›·ï¼Œ1+1ç­‰äºå¤šå°‘ï¼Ÿ"}
    ],
    temperature=0.3,
)
print(completion.choices[0].message.content)
```

- requestså’Œopenaiæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

### åŒºåˆ«


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3252818/uid1190679-20241213-1734059943739) 


### æ€»ç»“
- ä¸‹æ¬¡å†è¯´
