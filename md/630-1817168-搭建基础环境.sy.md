---
show: step
version: 1.0 
enable_checker: true
---


# python_éŸ³é¢‘å¤„ç†_midiåˆ¶ä½œ

## å¼€å§‹

- æˆ‘ä»¬é¦–å…ˆè¦ä»é›¶å¼€å§‹
- å®‰è£…midiè½¯ä»¶

```
sudo apt update
yes | sudo apt install rosegarden
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704697245143)

- ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œ

### rosegarden

```
rosegarden
```

- è¿è¡ŒæˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704698308051)

- å°è¯•ä½¿ç”¨pythonå†™midæ–‡ä»¶

### å®‰è£…ç±»åº“

```
pip install MIDIUtil
```

- å®‰è£…æˆåŠŸå
	- å‡†å¤‡ç”¨pythonå†™midiæ–‡ä»¶

### å¤§è°ƒéŸ³é˜¶

```python3
from midiutil import MIDIFile

# create MIDI file
midi_file = MIDIFile(1)

# add a track
track = 0
time = 0
midi_file.addTrackName(track, time, "Sample Track")
midi_file.addTempo(track, time, 120)

# add notes to the track
channel = 0
pitch = 60    # C3
duration = 1  # 1 beat
volume = 100  # max volume
for i in range(0, 8):
    midi_file.addNote(track, channel, pitch+i, time+i*duration, duration, volume)

# write MIDI file to disk
with open("output.mid", "wb") as output_file:
    midi_file.writeFile(output_file)
```

- è¿è¡Œä¹‹å
	- å°è¯•æ‰“å¼€output.mid

### æ‰“å¼€æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704698935734)

- æŸ¥çœ‹é’¢ç´å·å¸˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704699083704)

- å¯ä»¥ä¿®æ”¹ä¸ºå¤§è°ƒéŸ³é˜¶å—ï¼Ÿ

### å¤§è°ƒéŸ³é˜¶

```
from midiutil import MIDIFile

# create MIDI file
midi_file = MIDIFile(1)

# add a track
track = 0
time = 0
midi_file.addTrackName(track, time, "Sample Track")
midi_file.addTempo(track, time, 120)

# add notes to the track
channel = 0
pitch = 72    # C4
duration = 1  # 1 beat
volume = 100  # max volume
j = 0
for i in [0,2,4,5,7,9,11,12]:
    midi_file.addNote(track, channel, pitch+i, time+j*duration, duration, volume)
    j = j + 1

# write MIDI file to disk
with open("output.mid", "wb") as output_file:
    midi_file.writeFile(output_file)
```

- ä¿®æ”¹åç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704699793226)

- æœ‰æ›´æ ‡å‡†çš„å†™æ³•å—ï¼Ÿ

### å¸®åŠ©æ–‡æ¡£

```
firefox https://pypi.org/project/MIDIUtil/
```

- æ–‡æ¡£çŠ¶æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704704529903)

- å¯ä»¥è·‘è·‘å…¶ä¸­çš„ä»£ç å—ï¼Ÿ

### è¿è¡Œ

```
#!/usr/bin/env python

from midiutil import MIDIFile

degrees  = [60, 62, 64, 65, 67, 69, 71, 72]  # MIDI note number
track    = 0
channel  = 0
time     = 0    # In beats
duration = 1    # In beats
tempo    = 60   # In BPM
volume   = 100  # 0-127, as per the MIDI standard

MyMIDI = MIDIFile(1)  # One track, defaults to format 1 (tempo track is created
                      # automatically)
MyMIDI.addTempo(track, time, tempo)

for i, pitch in enumerate(degrees):
    MyMIDI.addNote(track, channel, pitch, time + i, duration, volume)

with open("major-scale.mid", "wb") as output_file:
    MyMIDI.writeFile(output_file)
```

- è¾“å‡ºäº†ä¸€ç³»åˆ—çš„ å¤§è°ƒéŸ³é˜¶
	- major-scale

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240108-1704704665657)

- æ‰“å¼€ä¹‹åæŸ¥çœ‹åˆ°midçŠ¶æ€
	- ç¡®å®æ˜¯å¤§è°ƒéŸ³é˜¶

### æ€»ç»“

- è¿™æ¬¡ä»é›¶å¼€å§‹
	- å®‰è£…äº†midiè½¯ä»¶
	- ä½¿ç”¨pythonåˆ¶ä½œäº†midæ–‡ä»¶
- ä¸è¿‡
	- ç©¶ç«Ÿä»€ä¹ˆæ˜¯midå‘¢ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹
