---
show: step
version: 1.0
enable_checker: true
---

# å‰ç«¯å’Œåç«¯
## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ ğŸ˜Œ

- ä¸Šæ¬¡äº†è§£äº† è¯·æ±‚å’Œå“åº”
	- è¯·æ±‚å°±æ˜¯å®¢æˆ·å‘å‡ºçš„è®¢å•
	- å“åº”å°±æ˜¯å ‚å€Œåšå‡ºçš„ååº”
	- å ‚å€Œä¼šçœ‹äººä¸‹èœç¢Ÿ
	- æ¥äº†è¯·æ±‚
	- èƒ½æŠŠæµè§ˆå™¨åŸºæœ¬ä¿¡æ¯éƒ½å¾—åˆ°

- è¯·æ±‚å’Œå“åº”è¿™å¥—ä¸œè¥¿
	- èƒ½åšç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ

### ç¿»è¯‘

- æ¯”å¦‚è¯´ç¿»è¯‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719050273346)

- æˆ‘å‘å‡ºä¸­æ–‡è¯·æ±‚
	- è¦æ±‚å¾—åˆ°è‹±æ–‡å“åº”

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719050430756)

- æ¥è¯•è¯•

### å°è¯•ç¿»è¯‘

- å®‰è£…åŒ…

```
pip install translate
```

- ä¼ ç»Ÿæœ¬åœ°ç¿»è¯‘

```
from translate import Translator

# åˆ›å»ºTranslatorå¯¹è±¡
translator = Translator(to_lang = 'zh')

# è¿›è¡Œç¿»è¯‘
translation = translator.translate('Hello, world!')

# è·å–ç¿»è¯‘ç»“æœ
print(translation)
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240426-1714108876045)

- æ€ä¹ˆæŠŠè¿™å¥—æ”¾åˆ°ç½‘ä¸Šå‘¢?


### æ„å»ºflaskåº”ç”¨æœåŠ¡å™¨

```
from flask import Flask

app = Flask(__name__)

@app.route('/')
def index():
    return "hello"

if __name__ == "__main__":
    app.run(debug=True)
```

- è®¿é—®é¦–é¡µæˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719055517723)

### æ‰“é€ é™æ€é¡µé¢

```
mkdir my_app
cd my_app
mkdir static
vi static/pre.html        
tree
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719053831546)

- æ„é€ ç½‘é¡µ

```
<html lang="zh">
	<head>
        <title>preCalculate</title>
	</head>
	<body>
        <form method="GET" id="preCal" action="../trans">
            <input type="text" id="sen" name="sentence">
            <input type="submit" value="go"/>
        </form>
	</body>
</html>
```

- æ³¨æ„æ­¤æ—¶ form æäº¤çš„æ–¹æ³•ä¸º
	- GET

### å‡†å¤‡æµè§ˆç½‘é¡µ

- åå°è¿è¡Œåº”ç”¨æœåŠ¡å™¨

```
nohup python3 app.py >> f.log 2>&1 &
firefox http://localhost:5000/static/pre.html &
```

- æŸ¥çœ‹ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240426-1714121391803)

- é™æ€é¡µ 
	- è®¿é—®æˆåŠŸ

###  å‘é€è¯·æ±‚

- F12è°ƒå‡ºå·¥å…·
	- é€‰æ‹© ç½‘ç»œ é¡µé¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719056077762)

- ç‚¹å‡» æŒ‰é’® 
	- å‘é€è¯·æ±‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719056241461)

- å‘é€GETè¯·æ±‚
	- æ‰¾ä¸åˆ°è¯¥URI
	- å¾—åˆ°404çŠ¶æ€ç 
- ä¸ºä»€ä¹ˆä¼šè¿™æ ·?

### è®¾ç½®è·¯ç”±

- /transæ²¡æœ‰å¯¹åº”çš„è·¯ç”±

```
from flask import Flask
from flask import request
from translate import Translator


app = Flask(__name__)

@app.route('/')
def index():
    return "hello"

@app.route('/trans',methods=['POST',"GET"])
def trans():
    s = request.args.get("sentence")
    translator = Translator(to_lang = 'zh')
    translation = translator.translate(s)
    return translation

if __name__ == "__main__":
    app.run(debug=True)

```

- å¤„ç†ä¹‹å

### å‡†å¤‡å†æ¬¡æäº¤

```
firefox http://localhost:5000/static/pre.html &
```

- å‡†å¤‡å†æ¬¡æäº¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719056783585)

### æäº¤ç»“æœ

- ç¡®å®å¯ä»¥ç¿»è¯‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719056798728)

- æäº¤çš„å‚æ•°éƒ½åœ¨urié‡Œé¢
	- å†™çš„æ¸…æ¸…æ¥šæ¥š
	- è¿™å°±æ˜¯GETçš„æäº¤æ–¹å¼
- è¿˜å¯ä»¥åœ¨uriä¸­éšè—
	- è¯·æ±‚çš„æ•°æ®å—?

### ä¿®æ”¹é¡µé¢

```
vi static/pre.html    
```

- æŠŠæäº¤æ–¹å¼method
	- ä»GET
	- ä¿®æ”¹ä¸ºPOST

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719057037006)

- è¿™æ ·ä¹Ÿèƒ½æäº¤å—?

### å†æ¬¡å‡†å¤‡æäº¤


```
firefox http://localhost:5000/static/pre.html &
```

- å†æ¬¡å‡†å¤‡æäº¤

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719056783585)

### æäº¤ç»“æœ

- çŠ¶æ€ç 500
	- æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719062113177)

- è¯¥å¦‚ä½•ä¿®æ”¹?

### ä¿®æ”¹app.py

```
from flask import Flask
from flask import request
from translate import Translator


app = Flask(__name__)

@app.route('/')
def index():
    return "hello!"

@app.route('/trans',methods=['POST',"GET"])
def trans():
    s = request.form["sentence"]
    print(s)
    translator = Translator(to_lang = 'zh')
    translation = translator.translate(s)
    return translation

if __name__ == "__main__":
    app.run(debug=True)
```

- å¯ä»¥çœ‹åˆ°urlä¸­çš„å‚æ•°æ¶ˆå¤±äº†
	- æ–¹æ³•ç¡®å®æ˜¯POST
	- å‚æ•°è¢«æ”¾åˆ°äº†
	- è¯·æ±‚è¡¨å•ä¸­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719062307468)

- ä¸ºä»€ä¹ˆè¦æ”¾è¯·æ±‚è¡¨å•å‘¢?

### å®‰å…¨æ€§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240622-1719062571189)

### æ€»ç»“ ğŸ¤¨
- è¿™æ¬¡åº”ç”¨äº† è¯·æ±‚å’Œå“åº”
	- è¯·æ±‚ å°±æ˜¯ å®¢æˆ·å‘å‡ºçš„ æ–‡å­—
	- å“åº” å°±æ˜¯ ç¿»è¯‘å®˜ ç¿»è¯‘å¥½çš„ æ–‡å­—
	- åå°å°±æ˜¯ç¿»è¯‘å®˜
- å¯ä»¥ç”¨è¡¨å• 
	- æ¥åšä¸ªwebshellå—?
- ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹