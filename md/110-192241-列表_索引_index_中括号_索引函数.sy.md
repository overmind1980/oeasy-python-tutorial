---
show: step
version: 1.0
enable_checker: true
---

# 列表 - 索引

## 回忆

- 上次了解了通过可迭代对象生成列表
- 可迭代对象包括
	- 文件对象
	- 字符串对象
	- range函数返回结果对象
	- 字节序列
- 字符串序列 s
  - 可以把每个字符转化为列表项
  - split 切分出列表项
  - 中文无压力
- 字节流序列 byte
  - 可以直接把字节流转化为相应的数字列表
  - 每个列表项都是一个字节
- 如何选择每一个列表项呢？🤔

### 回忆字符串

- 字符串就是把字符串起来
- 字符串里面每个字符就是一个山楂

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210817-1629153196214)

- 那么由字符串生成的列表 list
- 是否可以用索引呢？

### 尝试

- 中括号里面放的就是索引数
- 可以找到列表 list 中第几个元素
- 从零开始

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630200493367)

- 如果超过了列表 list 大小
	- 就会报错
	- 列表索引超出范围
	- IndexError
		- list index out range
- 为什么可以用中括号加序号找到相应的元素呢？

### 查询文档

- 中括号应该就是`__getitem__`函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221115-1668496641455)

- 可以试试吗？

###   `__getitem__`函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221115-1668496734318)

- 这两个方式效果一样
	- 为什么有了`__getitem__()`函数
	- 还要用l[0]中括号进行索引呢？
- `__getitem__()`函数名字里有`__`
	- 说明是内部方法
	- 一般是不被调用的
- l[0]用起来比较方便
- 不过索引这个词究竟来自于什么呢？

### 索引

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221123-1669187886440)

- index 就是 第二根手指

### 指出

- 我们所说的指出的手指

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221123-1669187928135)

- 食指是这个词最根本的含义
- 指数、指标都来自于食指

### 图书的目录

- 图书的目录
- 可以指出章节在第几页

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221123-1669188466146)

- 根据序号指出元素是方式
	- 就是索引
- 负数可以做列表的索引值吗？

### 负数索引

- "o" 是 第0个 元素
- 第0个 再减1 
	- 等于 -1 
	- 最后1个元素"y"
		- 索引为 -1

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669038621429)

- 再往前1个元素
	- 索引为-2


- 那负数怎么理解？

### 负数索引

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201703688)

- 负数索引可以理解为
	- 索引减去长度
		- "y"的索引为 4
		- 长度 len(l)为 5
			- 所以索引既可以是 4
		- 也可是 4-5
			- 就是-1

### 索引列表

- 可以根据索引号
	- 得到相应的字符

| 0   | 1   | 2   | 3   | 4   |
| --- | --- | --- | --- | --- |
| o   | e   | a   | s   | y   |
| -5  | -4  | -3  | -2  | -1  |


- 能否反过来
	- 根据相应的字符
		- 得到索引呢?

### 帮助手册

- help(list)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201339319)

- 找到这样一个索引函数
  - index
- 具体得试一下

### index

- 列表中有 5 个元素
	- "o"是第几个？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669039385801)

- o 是第 0 个元素
	- 所以 l.index("o")是 0

- 然后先求索引再查元素
	- 还是得到"o"

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669039540339)


- 能否先查元素再求索引？

### 先查元素再求索引

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669039628382)

- 那么如果查找一个列表中不存在的元素呢？

### 不存在的

- "0" 在 l 中并不存在 

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201874147)

- 系统会报错
	- 值的错误
- 如果列表里对应两个列表项呢？

### 两个匹配

- l中有两个'o'

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669040076297)

- 如果有两个列表项和参数匹配
	- 他会匹配第1个
- 但我就想匹配第 2 个怎么办？
- 查看帮助

### 范围匹配

- help(list)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201339319)

- 默认匹配 first 第一个
	- 可以控制 start 
		- start 是 开始位置

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630203176347)

- 从第 0 个元素的位置开始找
  - 找到第0项
- 从第 1 个元素的位置开始找
  - 也就是从 e 开始
  - 前面的 o 就不算数了
  - 找到第 5 项
- start 是包含本身的
- stop 如何理解呢？

### stop

- 结束位置

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221115-1668497269049)

- start 和 stop 前闭后开
	- stop 的位置本身是不被包含的
	- 就像 range 的构造函数一样
- 如果两个参数都是负的
- 会如何呢？🤔

### start、end都为负数

- 负数序号可以转化

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221121-1669040725881)

- 负数序号其实可以转化为正数序号

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201339319)

- stop 的最大值是个什么情况

### 最大结束位置

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630201339319)

- 非常大的一个数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630202573930)

- 这是 8 字节 long 型有符号正数的最大值
	- 可能也就是能够索引的边界
- 能建立比这个范围还大的列表吗？
	- 可以试试

### 崩溃了

- 好像崩溃了啊
	- 😁哈哈哈哈

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221115-1668497452591)

- OverflowError
- 这种索引可以有什么应用吗？

### 替换某位置的元素

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669080899689)

- 我们可以通过索引
- 精准地瞄准某个元素

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081080569)

- 进行替换

### 遍历小时数

- 遍历所有的小时数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081537365)

- 生成一个列表

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081557061)

- 运行结果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081574921)

- 我想
	- 把9点变成绿色
	- 把17点变成红色

### 变色

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081724090)

- 运行结果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669081741738)

- 精准替换完成
- 除了列表之外
- 字符串也可以有索引吗？

### 字符串索引

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669088018330)

- 这个方法和str.find很像啊

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669088091170)

- 好像是一模一样？

### 查看帮助

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210905-1630833204046)

- 功能一模一样

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210905-1630833234959)


- 出错处理有差别
  - index 找不到子串时抛出 ValueError 错误
  - find 失败后返回 -1
- find 看起来比较温和
- index 看起来更加刚猛一点
- 哪个好呢？

### 各有各的好处

- 弥乐佛负责公关
	- 笑迎八方客
	- 于是香火大旺
- 韦陀铁面无私
	- 锱珠必较
	- 则让他负责财务
	- 严格把关

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669088301591)

- 共处天王殿
	- 性格互补
	- 背靠背
- 字符串也能用[]进行索引吗？

### 字符串索引运算

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669083073712)

- 字符串对象支持索引方式获取字符

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669083113094)

- 但不支持通过索引修改字符串
- 但如果我就想根据索引修改字符串
- 怎么办呢?

### 绕道

- 通过list列表

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669083262619)

- 曲则全
- 枉则直
- 洼则盈
- 敝则新
- 少则得
- 多则惑
- 绕路才能到达
- 收工

### 总结

- 这次了解了列表的索引
	- 可以用中括号加索引找到相应的元素
	- 还可以替换相应的元素
	- 索引本质是 `__getitem()__` 方法
- 还可以用 index函数 找到某对象的位置
	- 如果列表中还有多个指定元素
	- 可以通过index函数中的start和end参数来指定位置
- 列表的索引有什么实际的应用吗？🤔
- 下次再说 👋
