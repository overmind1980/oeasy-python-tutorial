---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åˆ‡ç‰‡ - slice - æ­¥é•¿ - step

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº† å›ç¯æ–‡
	- ç»•åœˆè¯» ä¸­é—´æœ‰ é‡å çš„ æ–‡å­—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250404-1743752909706)

- è¿˜ç ”ç©¶äº† æ¨¡è¿›
	- å¯ä»¥è®© åŠ¨æœºé‡å¤ 
	- å¹¶ä¸” ä¸Šè¡Œæˆ–ä¸‹è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250505-1746451641685) 

- æœ‰ ä»€ä¹ˆ `å…·ä½“æ­Œæ›²` æ˜¯ æ¨¡è¿›çš„ å—ï¼ŸğŸ¤”

### é…’å¹²å€˜å–æ— 

- é…’å¹²å€˜å–æ— 
	- é…’å–å…‰äº† 
	- ç“¶å­ å–ä¸å–ï¼Ÿ
	- æ”¶ç©ºé…’ç“¶äº†å–½

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746868453332) 

- é…’å¹²å€˜å–æ— 
	- å‰¯æ­Œ(Chorus) 
	- æ­Œè¯ å®Œå…¨é‡å¤
	- éå¸¸å®¹æ˜“å¤§åˆå”±

### å‰¯æ­Œ åˆ†æ

- é…’å¹²å€˜å–æ— 
	- æ­Œå ä¹Ÿæ˜¯ å¤§åˆå”±
	- å‰¯æ­Œ(Chorus)
	- äº”ä¸ªå­— æ— è„‘å¾ªç¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746490117539) 

- ä¸€ä¸ªåŠ¨æœº 
	- å¾ªç¯å››æ¬¡
	- ä¸‹è¡Œæ¨¡è¿›

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746490955491) 

- ä»€ä¹ˆæ˜¯ åŠ¨æœº å‘¢ï¼Ÿ

### åŠ¨æœº 

- motif

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746869788287) 

- åŠ¨æœºæœ¬èº« ä¸‹è¡Œ
	- ååº” æƒ…æ„Ÿ æ‚²å“€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746869802867) 

- åŠ¨æœº æœ‰ä»€ä¹ˆ ç‰¹ç‚¹ å‘¢ï¼Ÿ

### åŠ¨æœº é‡å¤

- åŠ¨æœº æœ‰ ç‹¬ç‰¹çš„ `èŠ‚å¥å‹`
	- 488 488 å…¨
	- å›ºå®šä¸‹æ¥ 
	- å®¹æ˜“æ´—è„‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746869802867) 

- æŒ‰ç…§è¿™ç§æ–¹å¼ è¿›è¡Œä¸‹è¡Œ	
	- å½¢æˆä¸‹è¡Œæ¨¡è¿›
	- descending sequence

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746490955491) 

- ä¸‹è¡Œçš„åŸåˆ™ æ˜¯ä»€ä¹ˆï¼Ÿ


- äº”å£°è°ƒå¼ 
	- åªç”¨ å…¶ä¸­ 5ä¸ªéŸ³ç¬¦
	- å¦‚æœ éŸ³é˜¶ å›´ç»•ç€ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746870908917) 

- ä¸‹è¡Œ å…·ä½“ä»€ä¹ˆåŸåˆ™å‘¢ï¼Ÿ

### è°ƒå†…æ¨¡è¿›ä¸‹è¡Œ

- äº”å£°è°ƒå¼ çš„ æ­Œæ›²
	- 1ä¸ª 8åº¦ é‡Œé¢ `åª`ç”¨ 5ä¸ªéŸ³ç¬¦
	- ç”¨ `äº”å£°è°ƒå¼`çš„ æ–¹å¼æ¨¡è¿›
	- å«åš è°ƒå†…æ¨¡è¿›

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4077569/uid1190679-20250510-1746870780383) 

- åŠ¨æœºçš„éŸ³ç¬¦ å¾€ä¸‹èµ°
	- å«åš ä¸‹è¡Œ æ¨¡è¿›
	- è°ƒå†…çš„ ä¸‹è¡Œæ¨¡è¿›
	- å« è°ƒå†…ä¸‹è¡Œæ¨¡è¿›

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746490955491) 

- èƒ½è®©aiå†™æˆä»£ç å—ï¼ŸğŸ¤”

### æé—® 

- æŠŠç…§ç‰‡äº¤ç»™ai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746488098429)

- æ˜ç¡® 
	- æ‰€æœ‰éŸ³ç¬¦æ¥è‡ªäº äº”å£°è°ƒå¼çš„ åºåˆ—
	- ä¸è½¬è°ƒ æ¨¡è¿›

### ä»£ç 

- ç”Ÿæˆä»£ç 

```
from mido import MetaMessage, MidiFile, MidiTrack, Message
from mido import bpm2tempo

# å®šä¹‰å®Œæ•´äº”å£°è°ƒå¼éŸ³é˜¶ï¼ˆä»é«˜åˆ°ä½ï¼šé«˜éŸ³reã€é«˜éŸ³doã€laã€solã€miã€ä½éŸ³reï¼‰
pentatonic_scale = ['2\'','1\'','6','5','3','2']  # æ–°å¢ä½éŸ³reï¼ˆ'2'ï¼‰
note_mapping = {note: idx for idx, note in enumerate(pentatonic_scale)}  # éŸ³ç¬¦åˆ°éŸ³é˜¶ä½ç½®çš„æ˜ å°„

# å®é™…éŸ³é«˜ä¸MIDIç¼–å·çš„æ˜ å°„ï¼ˆåŒ…å«ä½éŸ³re '2' å¯¹åº”62ï¼‰
pitch_mapping = {
    '2\'': 74, '1\'': 72, '6': 69,
    '5': 67, '3': 64, '2': 62  # æ–°å¢ä½éŸ³reçš„MIDIç¼–å·
}

# åˆ›å»ºMIDIæ–‡ä»¶
mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)
track.append(MetaMessage('time_signature', numerator=4, denominator=4))
track.append(MetaMessage('set_tempo', tempo=bpm2tempo(120)))

# åŸºç¡€åŠ¨æœºï¼ˆé«˜éŸ³reèµ·å§‹ï¼ŒèŠ‚å¥å‹ä¸å˜ï¼‰
basic_motif = [
    ("2\'", 4), ("2\'", 8), ("2\'", 8),
    ("1\'", 4), ("1\'", 8), ("1\'", 8),
    ("6", 1)
]

note_value_ticks = {4: 480, 8: 240, 1: 1920}

def generate_motif(motif, scale_pos):
    """æ ¹æ®éŸ³é˜¶ä½ç½®ç”ŸæˆåŠ¨æœº"""
    for note, value in motif:
        if note in pitch_mapping:
            current_pos = note_mapping[note]
            target_pos = current_pos + scale_pos  # å‘ä¸‹ç§»åŠ¨scale_posä¸ªéŸ³é˜¶ä½ç½®
            if target_pos < len(pentatonic_scale):
                target_note = pentatonic_scale[target_pos]
                transpose = pitch_mapping[target_note] - pitch_mapping[note]
            else:
                transpose = 0  # è¶…å‡ºéŸ³é˜¶èŒƒå›´åˆ™ä¿æŒåŸéŸ³é«˜
            # ç”ŸæˆMIDIäº‹ä»¶
            track.append(Message('note_on', note=pitch_mapping[note] + transpose, velocity=64, time=0))
            track.append(Message('note_off', note=pitch_mapping[note] + transpose, velocity=64, time=note_value_ticks[value]))

# ç”Ÿæˆ5æ¬¡åŠ¨æœºï¼ˆåŒ…å«åŸå§‹åŠ¨æœºï¼Œå…±5æ¬¡ï¼šstep=0åˆ°4ï¼‰
for step in range(4):
    generate_motif(basic_motif, step)  # step=0ï¼ˆåŸå§‹ï¼‰ã€1ã€2ã€3ã€4

# ä¿å­˜æ–‡ä»¶
mid.save('full_pentatonic_modulation.mid')
```

### æ•ˆæœ

- ç”Ÿæˆ midiæˆåŠŸ
	- åªè¦ æœ‰äº† `2`å°èŠ‚
	- å°±å¯ æ¨¡è¿› å‡ºæ¥ `8`å°èŠ‚
	- ç¾æ»‹æ»‹
- æ›²è°ƒ å¾ˆ æ‚²å“€
	- åŠ¨æœº æ˜¯ ä¸‹é™çš„
	- æ¨¡è¿›åºåˆ— ä¹Ÿæ˜¯ ä¸‹é™çš„ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250506-1746488207782) 

- å¯ä»¥ ä½“ç° é«˜å…´ å—ï¼Ÿ	
	- æ¨¡è¿› å¯ä»¥ä¸Šå‡ å—ï¼Ÿ

### ä¸»æ­Œ å’Œ å‰¯æ­Œ

- åœ¨æœ¬é¦–æ­Œä¸­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250505-1746401746526) 

|ä½ç½®|ç±»å‹|åç§°|è‹±æ–‡|
|---|---|---|---|
|å‰é¢|å¤§åˆå”±|å‰¯æ­Œ|Chorus|
|åé¢|æ­Œè€…ç‹¬å”±|ä¸»æ­Œ|Verse|

- æœ‰å‡æœ‰é™
	- ä¸»æ­Œ ä¸‹è¡Œ æ¨¡è¿›
	- å‰¯æ­Œ ä¸Šè¡Œ æ¨¡è¿› 
	- å¤§å¼€å¤§åˆ 
	- ä¸€æ°”å‘µæˆ


### ä¸»æ­Œ

- ç‹¬å”±çš„ ä¸»æ­Œ(Verse) 
	- åŠ¨æœº æ›²æŠ˜ ä¸Šå‡
	- æ˜¯ ä¸Šè¡Œæ¨¡è¿›

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250505-1746402950773) 

- ä¾ç„¶æ˜¯ äº”å£°è°ƒå¼æ¨¡è¿›
	- 1ä¸ªå…«åº¦ ä¸­çš„ 12ä¸ªéŸ³ç¬¦ 
	- åªç”¨5ä¸ª


 ![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4074186/uid1190679-20250507-1746579021835) 

### æ€»ç»“ğŸ¤”

- è¿™æ¬¡ç ”ç©¶äº† 
	- å¯¹ç§°ã€å›ç¯çš„æ–‡å­— 
	- æ„æˆ çš„ å›æ–‡

- å›æ–‡ 
	- å¯ä»¥ç”¨ åˆ—è¡¨åˆ‡ç‰‡çš„æ–¹å¼ æˆªå–å‡ºæ¥
	- ç ”ç©¶è§„å¾‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/83396/uid1190679-20250404-1743754237735) 


- å¯ä»¥æ ¹æ®åˆ‡ç‰‡
	- åˆ é™¤åˆ—è¡¨é¡¹ å—ï¼ŸğŸ¤”

- ä¸‹æ¬¡å†è¯´ ğŸ‘‹