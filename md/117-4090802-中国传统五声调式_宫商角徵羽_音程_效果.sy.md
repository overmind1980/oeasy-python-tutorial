---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åµŒå¥— embedded

## å›å¿†

- ä¸Šæ¬¡äº†è§£äº† éŸ³ç¬¦å››è¦ç´ 

|è¦ç´ |å®šä¹‰|å½±å“å› ç´ |ä½œç”¨|ä¸¾ä¾‹|
|---|---|---|---|---|
|éŸ³é«˜|éŸ³ç¬¦çš„é«˜ä½|å‘å£°ä½“æŒ¯åŠ¨é¢‘ç‡|æ„å»ºæ—‹å¾‹ä¸å’Œå£°æ¡†æ¶|é’¢ç´ä»å·¦åˆ°å³éŸ³é«˜æ¸é«˜|
|æ—¶é•¿|éŸ³ç¬¦å‘å£°æŒç»­çš„æ—¶é—´|å‘å£°ä½“æŒ¯åŠ¨æŒç»­æ—¶é•¿|æ—¶é—´ä¸Šçš„é•¿çŸ­æ¯”ä¾‹ å½¢æˆèŠ‚å¥|å…¨éŸ³ç¬¦ã€å››åˆ†éŸ³ç¬¦|
|éŸ³å¼º|éŸ³ç¬¦å‘å£°çš„å¼ºå¼±ç¨‹åº¦|å‘å£°ä½“æŒ¯åŠ¨å¹…åº¦|æƒ…æ„Ÿèµ·ä¼ åŠ¨æ€å˜åŒ–|æ¿€æ˜‚ç”¨å¼ºéŸ³ è½»æŸ” ç”¨å¼±éŸ³|
|éŸ³è‰²|éŸ³ç¬¦å£°éŸ³çš„ç‰¹è‰²|å‘å£°ä½“çš„æè´¨ã€ç»“æ„ã€å‘å£°æ–¹å¼ç­‰|èµ‹äºˆå£°éŸ³ç‹¬ç‰¹ä¸ªæ€§|é’¢ç´æ¸…è„†æ˜äº® äºŒèƒ¡æ‚ æ‰¬|

- è®¾ç½®å¥½ éŸ³è½¨çš„éŸ³è‰²ä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746323381602) 

- æ¯ä¸ªéŸ³ç¬¦ éƒ½æœ‰è‡ªå·±çš„ä¸‰è¦ç´ 
	- éŸ³é«˜
	- æ—¶å€¼
	- éŸ³å¼º
- å¯ä»¥åˆ©ç”¨ éŸ³ç¬¦çš„ä¸‰è¦ç´  åšé¦–æ­Œå—ï¼Ÿï¼ŸğŸ¤”

### é è°±

- ä½œæ›² å°±æ€• ä¸ç€è°ƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748391538056) 

- è¿™äº”å£°è°ƒå¼ å…·ä½“æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

### åŒºåˆ«

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250526-1748269357986) 

- çœ‹èµ·æ¥ å¯ä»¥é€šè¿‡ç¼–ç¨‹çš„æ–¹å¼å®ç°

### å®«è°ƒå¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392003325) 

```
import mido
from mido import Message, MidiFile, MidiTrack

# åˆ›å»ºä¸€ä¸ªæ–°çš„MIDIæ–‡ä»¶
mid = MidiFile()
# åˆ›å»ºä¸€ä¸ªéŸ³è½¨
track = MidiTrack()
mid.tracks.append(track)

# è®¾ç½®é€Ÿåº¦ï¼ˆå¾®ç§’/æ‹ï¼‰ï¼Œè¿™é‡Œè®¾ç½®ä¸º120æ‹/åˆ†é’Ÿ
tempo = mido.bpm2tempo(120)
track.append(mido.MetaMessage('set_tempo', tempo=tempo))

# Cå®«è°ƒå¼çš„éŸ³é˜¶å¯¹åº”çš„MIDIéŸ³ç¬¦ç¼–å·ï¼Œä»ä½å…«åº¦å®«éŸ³åˆ°é«˜å…«åº¦å®«éŸ³
# Cä¸º60ï¼ŒDä¸º62ï¼ŒEä¸º64ï¼ŒGä¸º67ï¼ŒAä¸º69ï¼Œä¸‹ä¸€ä¸ªCä¸º72
c_major_pentatonic_notes = [60, 62, 64, 67, 69, 72]

# æ¯ä¸ªéŸ³ç¬¦çš„æŒç»­æ—¶é—´ï¼ˆä»¥ticksä¸ºå•ä½ï¼Œè¿™é‡Œè®¾ç½®ä¸º480 ticksï¼Œå³ä¸€ä¸ªå››åˆ†éŸ³ç¬¦çš„æ—¶é•¿ï¼‰
note_duration = 480
# æ¯ä¸ªéŸ³ç¬¦çš„åŠ›åº¦
velocity = 64

# ä¾æ¬¡æ·»åŠ æ¯ä¸ªéŸ³ç¬¦çš„å¼€å¯å’Œå…³é—­æ¶ˆæ¯åˆ°éŸ³è½¨
for note in c_major_pentatonic_notes:
    track.append(Message('note_on', note=note, velocity=velocity, time=0))
    track.append(Message('note_off', note=note, velocity=0, time=note_duration))

# æ·»åŠ ç»“æŸæ¶ˆæ¯
track.append(mido.MetaMessage('end_of_track'))

# ä¿å­˜MIDIæ–‡ä»¶
mid.save('gong.mid')
```

### å®ç°æ•ˆæœ

- è¿™å®«è°ƒéŸ³é˜¶ 
	- ä»C3 åˆ° C4 å®Œæˆä¸€ä¸ªå…«åº¦
	- ä»¥ Cä¸ºä¸»éŸ³
	- å«åš `Cå®«`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392204728) 

- é‚£ å•†è°ƒå¼ åˆ é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ

### å•†è°ƒå¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392363084) 

```
import mido
from mido import Message, MidiFile, MidiTrack

# åˆ›å»ºä¸€ä¸ªæ–°çš„ MIDI æ–‡ä»¶
mid = MidiFile()
# åˆ›å»ºä¸€ä¸ªéŸ³è½¨
track = MidiTrack()
mid.tracks.append(track)

# è®¾ç½®é€Ÿåº¦ï¼ˆå¾®ç§’/æ‹ï¼‰ï¼Œè¿™é‡Œè®¾ç½®ä¸º 120 æ‹/åˆ†é’Ÿ
tempo = mido.bpm2tempo(120)
track.append(mido.MetaMessage('set_tempo', tempo=tempo))

# D å•†è°ƒå¼ä¸€ä¸ªå…«åº¦å†…çš„éŸ³é˜¶å¯¹åº”çš„ MIDI éŸ³ç¬¦ç¼–å·
# D ä¸º 62ï¼ŒE ä¸º 64ï¼ŒG ä¸º 67ï¼ŒA ä¸º 69ï¼ŒC ä¸º 60ï¼Œé«˜å…«åº¦ D ä¸º 74
d_shang_mode_notes = [62, 64, 67, 69, 72, 74]

# æ¯ä¸ªéŸ³ç¬¦çš„æŒç»­æ—¶é—´ï¼ˆä»¥ ticks ä¸ºå•ä½ï¼Œè¿™é‡Œè®¾ç½®ä¸º 480 ticksï¼Œå³ä¸€ä¸ªå››åˆ†éŸ³ç¬¦çš„æ—¶é•¿ï¼‰
note_duration = 480
# æ¯ä¸ªéŸ³ç¬¦çš„åŠ›åº¦
velocity = 64

# ä¾æ¬¡æ·»åŠ æ¯ä¸ªéŸ³ç¬¦çš„å¼€å¯å’Œå…³é—­æ¶ˆæ¯åˆ°éŸ³è½¨
for note in d_shang_mode_notes:
    track.append(Message('note_on', note=note, velocity=velocity, time=0))
    track.append(Message('note_off', note=note, velocity=0, time=note_duration))

# æ·»åŠ ç»“æŸæ¶ˆæ¯
track.append(mido.MetaMessage('end_of_track'))

# ä¿å­˜ MIDI æ–‡ä»¶
mid.save('d_shang_mode_full_octave.mid')
```

### Då•†

- è¿™å•†è°ƒéŸ³é˜¶ 
	- ä»D3 åˆ° D4 å®Œæˆä¸€ä¸ªå…«åº¦
	- ä»¥ Dä¸ºä¸»éŸ³
	- å«åš `Då•†`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392460543) 

- å®«è°ƒå¼ å’Œ å•†è°ƒå¼ æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ

### åŒºåˆ«

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250511-1746928590328) 

- å¦‚æœ å•†è°ƒå¼
	- ä¸»éŸ³ è½åœ¨Aä¸Š
	- ä»A3å¼€å§‹ åˆ°A4
	- è¿˜æ˜¯ å•†è°ƒå¼å—ï¼Ÿ

### è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392857844) 

- å†™ä¸ªä»£ç  è§‚å¯Ÿä¸€ä¸‹

### ä»£ç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748392941573) 

```
import mido
from mido import Message, MidiFile, MidiTrack

# åˆ›å»ºä¸€ä¸ªæ–°çš„ MIDI æ–‡ä»¶
mid = MidiFile()
# åˆ›å»ºä¸€ä¸ªéŸ³è½¨
track = MidiTrack()
mid.tracks.append(track)

# è®¾ç½®é€Ÿåº¦ï¼ˆå¾®ç§’/æ‹ï¼‰ï¼Œè¿™é‡Œè®¾ç½®ä¸º 120 æ‹/åˆ†é’Ÿ
tempo = mido.bpm2tempo(120)
track.append(mido.MetaMessage('set_tempo', tempo=tempo))

# è®¾ç½®æ‹å·ä¸º 4/4 æ‹
track.append(mido.MetaMessage('time_signature', numerator=4, denominator=2, clocks_per_click=24, notated_32nd_notes_per_beat=8))

# A å•†è°ƒå¼ä¸€ä¸ªå…«åº¦å†…çš„éŸ³é˜¶å¯¹åº”çš„ MIDI éŸ³ç¬¦ç¼–å·
# A ä¸º 69ï¼ŒB ä¸º 71ï¼ŒD ä¸º 74ï¼ŒE ä¸º 76ï¼ŒG ä¸º 79ï¼Œé«˜å…«åº¦ A ä¸º 81
a_shang_mode_notes = [69, 71, 74, 76, 79, 81]

# æ¯ä¸ªéŸ³ç¬¦çš„æŒç»­æ—¶é—´ï¼ˆä»¥ ticks ä¸ºå•ä½ï¼Œè¿™é‡Œè®¾ç½®ä¸€ä¸ªå››åˆ†éŸ³ç¬¦ä¸º 480 ticksï¼‰
note_duration = 480
# æ¯ä¸ªéŸ³ç¬¦çš„åŠ›åº¦
velocity = 64

# ä¾æ¬¡æ·»åŠ æ¯ä¸ªéŸ³ç¬¦çš„å¼€å¯å’Œå…³é—­æ¶ˆæ¯åˆ°éŸ³è½¨
for note in a_shang_mode_notes:
    track.append(Message('note_on', note=note, velocity=velocity, time=0))
    track.append(Message('note_off', note=note, velocity=0, time=note_duration))

# æ·»åŠ ç»“æŸæ¶ˆæ¯
track.append(mido.MetaMessage('end_of_track'))

# ä¿å­˜ MIDI æ–‡ä»¶
mid.save('a_shang.mid')
```

### å…·ä½“æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748393117381) 

- ä¸ºä»€ä¹ˆ ä¸»éŸ³è½åœ¨Aä¸Š 
	- ä¸ºä»€ä¹ˆ è¿˜æ˜¯ å•†è°ƒå¼ å‘¢ï¼Ÿ

### å¹³ç§»

- æŠŠæ‰€æœ‰éŸ³ç¬¦é€‰ä¸­
	- å¹³è¡Œå‘ä¸Šç§»åŠ¨
	- å°±å¾—åˆ°äº† Då•†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748393221848) 

- å•†è°ƒå¼ çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

### è°ƒå¼åŒºåˆ«

- è°ƒå¼ çš„æœ¬è´¨ æ˜¯ éŸ³é˜¶çš„éŸ³ç¨‹å…³ç³»
	- è¥¿æ–¹cå¤§è°ƒ å…¨å…¨åŠå…¨å…¨å…¨åŠ
- å•†è°ƒå¼ æŒ‡çš„æ˜¯ å›ºå®šçš„éŸ³ç¨‹å…³ç³»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250511-1746928689719) 

- é‚£ä¸»éŸ³ æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ

### å¼€å§‹ä½ç½®

- æœ‰äººå—“å­é«˜ æœ‰äººå—“å­ä½æ²‰
	- å¯ä»¥ å‡è°ƒ 
	- ä¹Ÿå°±æ˜¯ æŠŠä¸»éŸ³ å‡ä¸Šå» 
	- å°±åƒ å¡æ‹‰ok é‡Œä¸€æ · å‡é™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250528-1748393553003) 

- Abå•† æŒ‡çš„æ˜¯
	- ä¸»éŸ³ åœ¨Abä¸Šçš„ 
	- å•†è°ƒå¼

### æ€»ç»“
- è¿™æ¬¡æˆ‘ä»¬äº†è§£äº† 
	- ä¸­å›½äº”å£°è°ƒå¼
	- å®«å•†è§’å¾µç¾½  äº”ç§è°ƒå¼ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250511-1746928689719) 

- ä¸€æ¬¡ å¯ä»¥æŠŠäº”ç§è°ƒå¼ å…¨å†™å‡ºæ¥å—ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹