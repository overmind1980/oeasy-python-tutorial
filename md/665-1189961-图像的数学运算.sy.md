---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº†é”®ç›˜äº’åŠ¨çš„æ•ˆæœ
- å†™å­—æ•ˆæœ
	- æ„Ÿè§‰å¯ä»¥åšä¸€ä¸ªæ‰“å­—ç»ƒä¹ å™¨
- ä¸‹æ¬¡ç©ç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ

### å›¾åƒçš„åŠ æ³•

```
import cv2            
img = cv2.imread("monkey.png")
sum1 = img + img         
cv2.imshow("sum1",sum1)
sum2= cv2.add(img,img)
cv2.imshow("sum2",sum2)                                                       cv2.waitKey()            
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240218-1708248924388)


| è¿ç®—æ³• | æº¢å‡ºå¤„ç† |
|---|---|
|ç›´æ¥+æ³• | æº¢å‡ºå å–æ¨¡ |
|addåŠ æ³•| æº¢å‡ºå ç­‰äº255|

### æ¨¡æ‹Ÿä¸‰è‰²å…‰
```
import cv2
import numpy as np
 
blue = np.zeros((150,150,3),np.uint8)
blue[:,:,0] = 255
green = np.zeros((150,150,3),np.uint8)
green[:,:,1] = 255
red = np.zeros((150,150,3),np.uint8)
red[:,:,2] = 255
 
cv2.imshow("blue",blue)
cv2.imshow("green",green)
cv2.imshow("red",red)
 
cyan = cv2.add(blue,green)
cv2.imshow("cyan",cyan)
 
white = cv2.add(cyan,red)
cv2.imshow("white",white)
                                                                             
cv2.waitKey()
cv2.destroyAllWindows()
```

- åŠ è‰²æ··è‰²æ³•
	- å¯¹åº”RGBçš„è‰²å½©æ¨¡å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240218-1708249344050)

- å¯ä»¥åšä¸‰åŸè‰²å›¾é‚£æ ·çš„å›¾åƒå—ï¼Ÿ

### å¾„å‘æ¸å˜

```
import cv2
import numpy as np

red  = np.zeros((300,300),np.uint8)
green  = np.zeros((300,300),np.uint8)
blue  = np.zeros((300,300),np.uint8)

def draw_gradient(pos_x,pos_y,radius,image):
    for x in range(0,300):
        for y in range(300):
            color = 255 - int(((y-pos_y)**2 + (x-pos_x)**2)**0.5/(radius*2**0.5)*255)
            image[y,x] = color

draw_gradient(100,100,80,red)
cv2.imshow("red",red)
draw_gradient(200,100,80,green)
draw_gradient(150,105,80,blue)
rgb = cv2.merge([blue,green,red])
cv2.imshow("rgb",rgb)
key = cv2.waitKey(0)
```

- ç”»é¢ æŒºå¥½çœ‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240219-1708337564872)

- ä¸è¿‡ä¸ç¬¦åˆè¦æ±‚

### rgbä¸‰ä¸ªæ–¹å‘

```
import cv2
import numpy as np

red  = np.zeros((300,300),np.uint8)
green  = np.zeros((300,300),np.uint8)
blue  = np.zeros((300,300),np.uint8)
black  = np.zeros((300,300),np.uint8)

def draw_gradient(pos_x,pos_y,radius,image):
    for x in range(0,300):
        for y in range(300):
            dx = abs(x - pos_x)
            dy = abs(y - pos_y)
            dis = (dy**2 + dx**2) ** 0.5
            if dis < radius:
                color = dis / radius * 255
                color = 255 - int(color)
                image[y,x] = color

draw_gradient(100,100,200,red)
draw_gradient(200,100,200,green)
draw_gradient(150,200,200,blue)
red_channel = cv2.merge([blue,black,black])
cv2.imshow("red_channel",red_channel)
r_b = cv2.merge([blue,green,black])
cv2.imshow("r_b",r_b)
rgb = cv2.merge([blue,green,red])
cv2.imshow("rgb",rgb)
key = cv2.waitKey(0)
```

- æœ€ç»ˆæ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240219-1708340795438)

- ä¸åŒå›¾åƒä¹‹é—´å¯ä»¥æ··åˆå—ï¼Ÿ

### æŒ‰ç…§ä¸é€æ˜åº¦æƒé‡æ··åˆ 

```
#encoding:utf-8
import cv2
import numpy as np
import matplotlib.pyplot as plt

#è¯»å–å›¾ç‰‡
src1 = cv2.imread("lena.png")
src2 = cv2.imread("monkey.png")
rows,cols = src2.shape[:2]
print(rows,cols)
src1 = src1[0:rows,0:cols,]
print(src1.shape)

#å›¾åƒèåˆ
#result = cv2.addWeighted(src1, 1, src2, 1, 0)
result = cv2.addWeighted(src1, 0.6, src2, 0.8, 10)

#æ˜¾ç¤ºå›¾åƒ
cv2.imshow("src1", src1)
cv2.imshow("src2", src2)
cv2.imshow("result", result)

#ç­‰å¾…æ˜¾ç¤º
cv2.waitKey(0)
cv2.destroyAllWindows()
```

- æ··åˆç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708502897396)

### å›¾å±‚æ··åˆæ–¹å¼

- ä¸‰ä¸ªä¸»è¦æ–¹å‘
	1. å˜äº®
	2. å˜æš—
	3. å¼ºåŒ–å¯¹æ¯”
		- äº®å¾—æ›´äº®/æš—å¾—æ›´æš—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708483887743)

- https://photoblogstop.com/photoshop/photoshop-blend-modes-explained/

### å¯¹ç…§

- å…¶ä¸­ 
	- å˜äº® å’Œ å˜æš—ä¸¤å¥—
	- å¯ä»¥å½¼æ­¤å¯¹ç…§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708486072087)

- éƒ½æœ‰ç›¸åº”çš„ ç®—æ³•

### ä¹˜æ³•å’ŒåŠ æ³•

- multiply
	- æ­£ç‰‡å åº•
		- 200 â— 255 = 0.78
		- 72 â— 255 =  0.28
	- 0.22 ä¼šæ¯”åŸæ¥å˜æš—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708489487904)

- ç›¸åŠ æ¨¡å¼
	- ä¸¤è€…äº®åº¦å€¼ ç›´æ¥ç›¸åŠ 
	- è¶…è¿‡255 è¶…è¿‡1
	- äº§ç”Ÿæº¢å‡º
	- æ˜¾ç¤ºä¸º çº¯ç™½è‰²

### å˜äº® å’Œ å˜æš—çš„ç»†èŠ‚

- å…·ä½“ç»†èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708489730649)

### æ€»ç»“ ğŸ¤”
- è¿™æ¬¡ç ”ç©¶äº† ä¸¤ä¸ªçŸ©é˜µçš„åŠ æ³•

| è¿ç®—æ³• | æº¢å‡ºå¤„ç† |
|---|---|
|ç›´æ¥+æ³• | æº¢å‡ºå å–æ¨¡ |
|addåŠ æ³•| æº¢å‡ºå ç­‰äº255|

- BGR ä¸‰ä¸ªé€šé“æ··åˆçš„æ—¶å€™
	- ç”¨çš„å°±æ˜¯ åŠ è‰²æ··è‰²æ³•
- é™¤äº† åŠ å‡è¿ç®—ä¹‹å¤–
	- å›¾åƒ è¿˜æœ‰ä»€ä¹ˆ è¿ç®—æ–¹å¼å—ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ğŸ‘‹
