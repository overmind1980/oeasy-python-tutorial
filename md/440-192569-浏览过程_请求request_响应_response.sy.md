---
show: step
version: 1.0
enable_checker: true
---

# å¯¼å…¥ request åŒ…

## æ–°çš„å¼€å§‹

- ç°åœ¨å°±è¦æ·±å…¥å­¦ä¹  python çˆ¬è™«äº†
	- æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿ
	- é¦–å…ˆè®¿é—®ä¸€ä¸‹æœ¬åœ°ä¸»æœº

```
firefox http://localhost
```

- è¿æ¥å¤±è´¥
- æœ¬åœ°æ²¡æœ‰å¼€å¯webæœåŠ¡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231214-1702559995198)

- <kbd>ctrl<kbd> + <kbd>c<kbd>
	- ç»ˆæ­¢ç«ç‹

### nginx

- è¦å¼€å¯é™æ€ç½‘é¡µæœåŠ¡å™¨
	- nginx
    - ngin çš„æ„æ€æ˜¯ engine x

```
sudo service nginx start
sudo service nginx status
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668769671876)

- æœåŠ¡å¯åŠ¨å®Œæˆä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949090031)

- è¯•ç€ç”¨æµè§ˆå™¨è®¿é—® localhost

### è®¿é—®ç½‘é¡µ

```
firefox http://localhost
```

- åœ¨åœ°å€æ é‡Œçš„æ˜¯http://localhost
	- æ³¨æ„æ˜¯http
	- è€Œä¸æ˜¯http`s`
		- æ²¡æœ‰`s`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949192013)

- èƒ½è®¿é—®è‡ªå®šä¹‰çš„ç½‘é¡µä¹ˆï¼Ÿ

### ç¼–è¾‘ç½‘é¡µ

- é¦–å…ˆåœ¨ç”¨æˆ·å®¿ä¸»æ–‡ä»¶å¤¹
	- å»ºç«‹ä¸€ä¸ªç½‘é¡µ

```
vi oeasy.html
```

- ç½‘é¡µæ–‡ä»¶å¦‚ä¸‹

```html
<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<title>menu</title>
		<meta charset="utf-8">
	</head>
	<body width="700px">
		<h1>menu</h1>
		<ul id="ulist">
			<li>
				<span class="food">è±†æ±</span>
				<price>10</price>
			</li>
			<li>
				<span class="food">ç¾Šç˜ªæ±¤</span>
				<price>15</price>
			</li>
			<li>
				<span class="food">æŠ˜è€³æ ¹</span>
				<price>20</price>
			</li>
		</ul>
	</body>
</html>
```

### ä¿å­˜ç½‘é¡µ

- å¤åˆ¶åç²˜è´´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231214-1702560722970)

- ç„¶åä¿å­˜å¹¶é€€å‡º

### ç½‘é¡µçš„æ ¹ç›®å½•

- ç½‘é¡µæœåŠ¡å™¨æ ¹ç›®å½•åœ¨å“ªå‘¢ï¼Ÿ
    - `whereis nginx`
	- /usr/share/nginx/html/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697365749304)


- sudo cp ./oeasy.html /usr/share/nginx/html
	- sudo ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ
	- cp æ‹·è´
	- æŠŠfood.html
	- ç½‘ç«™æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹


```
sudo cp ./oeasy.html /usr/share/nginx/html
```

### æµè§ˆè¿‡ç¨‹

```
firefox http://localhost/oeasy.html
```

- æµè§ˆç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231215-1702609500691)

### æ£€æŸ¥å…ƒç´ 

- F12 æ£€æŸ¥å…ƒç´ 
	- é€‰æ‹©ç½‘ç»œ Networks

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366142481)

- å¦‚æœ<kbd>F12</kbd>æ²¡æœ‰ç”¨çš„è¯
	- åœ¨é”®ç›˜æœ€ä¸‹é¢ä¸€è¡Œæ‰¾åˆ°<kbd>Fn</kbd>é”®
	- <kbd>Fn</kbd>+<kbd>F12</kbd>
- å®åœ¨ä¸è¡Œå³é”®
	- æ£€æŸ¥å…ƒç´ ä¹Ÿå¯ä»¥æ‰¾åˆ°
- ç„¶ååˆ·æ–°

### åˆ·æ–°

- F5 ä¹Ÿå¯ä»¥åˆ·æ–°
	- åˆ·æ–°åä¼šçœ‹åˆ°ç½‘ç»œä¸­çš„çš„
		- è¯·æ±‚ requests
		- å“åº” response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366198856)

- é€‰ä¸­ oeasy.html æ–‡ä»¶
	- è¿™ä¸ªæ–‡ä»¶å°±æ˜¯nginx  
		- å“åº”httpçš„è¯·æ±‚ å¾—åˆ°çš„
- è¯·æ±‚å°±æ˜¯ 
	- request
- å“åº”å°±æ˜¯ 
	- response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630412050376)

### è¯·æ±‚ request

- é¦–å…ˆä»æµè§ˆå™¨
	- å‘å‡ºä¸€ä¸ª`http get`è¯·æ±‚(request)
  - http
    - è¶…æ–‡æœ¬ä¼ è¾“åè®®
		- hyper-text transmit protocol
    - æ˜¯ç½‘ç»œä¼ è¾“ä¸­ä½¿ç”¨çš„åè®®
  - get
    - æ˜¯å¾—åˆ°ç›¸åº”æ–‡ä»¶çš„æ–¹æ³•
    - é™¤äº†getä¹‹å¤–è¿˜æœ‰postç­‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406366911)

- è¿™æ˜¯ä»ç«ç‹æµè§ˆå™¨
	- å‘å¾€æœåŠ¡å™¨çš„ è¯·æ±‚
- è¯·æ±‚å¤´é‡Œé¢ 
	- éƒ½åŒ…æ‹¬ä¸€äº›ä»€ä¹ˆå‘¢ï¼Ÿ

### è¯·æ±‚å¤´ request head

- ç«ç‹æµè§ˆå™¨ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€äº›è¯·æ±‚å¤´
  - Accept-Language
    - æ¥å—çš„è¯­è¨€
  - Host
    - è¢«è¯·æ±‚çš„ä¸»æœº
  - User-Agent
    - å‘è¯·æ±‚çš„æµè§ˆå™¨
- nginx æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚ä¹‹å
	- å°±ä¼šè¿›è¡Œå¤„ç†
	- å°±åƒè·‘å ‚çš„ ä¼šå¤„ç†å®¢äººè¦æ±‚ä¸€æ ·
	- æŠŠå®¢äººéœ€æ±‚ æç»™åå°æœåŠ¡å™¨
- åå°æœåŠ¡å™¨æ ¹æ®å®¢äººè¦æ±‚å¾—åˆ°ä¸€ä¸ªå›åº”é¡µ
	- nginx å°±æŠŠè¿™ä¸ª `å›åº”é¡µ` ä½œä¸º `è¯·æ±‚Request `çš„ `å“åº”Response`
    - ç„¶åè¿™ä¸ªå›åº”é¡µå°±è¿”å›åˆ°æµè§ˆå™¨äº†

### å“åº” Response

- æœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„ä¸œè¥¿å¤„ç†
	- å°†ç»“æœä½œä¸ºå“åº”å‘å›ç»™æµè§ˆå™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406600963)

- æµè§ˆå™¨ä¼šæ¥åˆ°å“åº”å¤´
  - Contentâ€”Type
    - æ¥æ”¶æ–‡ä»¶ç±»å‹
    	- htmlå°±åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“
    	- zipå°±ç›´æ¥ä¸‹è½½
  - Contentâ€”Length
    - å†…å®¹å­—èŠ‚é•¿åº¦
  - Date
    - æ¥æ”¶æ—¶é—´
  - Server
    - æœåŠ¡å™¨

### å®Œæˆ

- è¿™ä¸ªè¿‡ç¨‹å®Œæˆäº†
  - æ•´ä¸ª http get ä¼šå¾—åˆ°ä¸€ä¸ªçŠ¶æ€ç (Status_Code)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366395464)

- Get è¯·æ±‚å¾—åˆ°äº†å“åº”
  - çŠ¶æ€ç æ˜¯ 304
  - æ„æ€æ˜¯ Not Modified
- ä»€ä¹ˆæ˜¯çŠ¶æ€ç å‘¢ï¼Ÿ

## æ€»ç»“

- æˆ‘ä»¬å®‰è£…å¹¶å¯åŠ¨äº† 
	- nginx æœåŠ¡å™¨
- ä½¿ç”¨æµè§ˆå™¨è®¿é—®äº†æœåŠ¡å™¨ä¸Šçš„ç½‘é¡µ
	- æµè§ˆå™¨å‘é€äº†è¯·æ±‚
		- request
	- æœåŠ¡å™¨å›åº”äº†å“åº”
		- response
- æœ€ç»ˆçŠ¶æ€ç 
  - 304

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630412050376)

- ä»€ä¹ˆæ˜¯çŠ¶æ€ç å‘¢ï¼Ÿ
- è¿˜æœ‰å…¶ä»–çŠ¶æ€ç å—ï¼ŸğŸ¤£
- ä¸‹æ¬¡å†è¯´ğŸ‘‹
