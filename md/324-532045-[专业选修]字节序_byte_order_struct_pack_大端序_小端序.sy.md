---
show: step
version: 1.0
enable_checker: true
---

# 进制转化

## 回忆上次内容

- 上次 总结了
	- 计算字符串值的函数
		- eval
	- 四种进制的转化函数
		- bin
		- oct
		- int
		- hex

| 函数名     | 前缀     | 目标字符串所用进制 |
| -------- | -------- | ----- |
| bin |   0b | 二进制 |
|  oct|   0o |八进制 |
| hex |  0x | 十六进制
|eval | 无前缀 |十进制|

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230706-1688654717565)

- 数字41 和 字符串"41" 的不同
	- 字符串"41"
	  - 两个字符
	  - 字符存储依据是 ascii序号
	  - `b"\x34\x31"`
	- 数字 41
	  - 数字存储依据是 数字的二进制值
	  - 转化为 二进制 0b101001
		- 字节前面补零
		- 得到 `b"\x00\x29"`
	  - 这就两个字节

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230706-1688654538337)

- 但是 这两个字节 在存储的时候
	- 有先后次序吗？🤔

### 存储

- 258 这个数字
	- 如果用两个字节存储的话
		- 字节状态什么样子呢？
- 字节状态会是
	- `b"\x01\x02"` 吗？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220731-1659269754647)

- 参考一个网站
	- https://binaryconvert.com/

### 观察网站

- 打开网址
	- https://binaryconvert.com/

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230707-1688724704340)

- 选择有符号双字节
	- signed short

### 选择结果

- 网站中显示结果

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220731-1659269816826)

- 可以使用python
	- 得到这两个字节的字节状态吗？
- 借助一个包
	- `struct`

### struct

- 导入struct包，并查看手册
	- import struct
	- help(struct)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230707-1688724582407)

- 数据类型是 short
	- 对应 两个字节有符号的 整型数字
	- 对应的符号 是`h`

### 得到字节状态

- 得到字节状态是`b"\x02\x01"`

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230723-1690076657609)

- 不是应该对应着 `b"\x01\x02"`么？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220731-1659269754647)

- 这数字 可不能 读错写错啊？
- 这该 如何理解 呢？

### 字节序

- 这前后颠倒的问题
 - 涉及到 一个东西叫做
   - 字节序
   - byte order

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211029-1635516032723)

- 这些可选的修饰字符
	- 暗示字节的次序
- 字节次序有两种

| 符号 | 英文名称 | 中文名称 |
|---|---|---|
| `<` | little-endian |  小字节序 |
| `>` | big-endian | 大字节序 |

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220731-1659271290044)

-  把这个修饰字节序的字符放在类型h(short)前面
	- `<h` : little-endian 2-byte
	- `>h` :  big-endian 2-byte

### 字节序对比

- 下面两个不同的字节次序
	- 对应同一个数字
		- 0x12345678

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211030-1635559712503)


- BigEndian 
	- 从低地址开始
	- 在高地址结束
	- 也就是地址数值大的地方结束
	- 所以叫BigEndian
- LittleEndian
	- 从高地址开始
	- 在低地址结束
	- 也就是地址数值小的地方结束
	- 所以叫LittleEndian

### little-endian < h   

- <h 用的是小字节序
  - 编码模式属于 little-endian
  - 最低有效位（least significant byte）放在低地址 a

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211030-1635559260042)

- 这是目前常用的指令集架构 ($x86、x86-64$) 用的字节序
	- CISC(复杂指令集)
- 另一种字节序是大字节序
	- 应用于 RISC(精简指令集)

### big-endian >h  

- >h  是按下图中的字节排序
  - 编码模式属于 big-endian
  - 最低有效位（most significant byte）落在高地址

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211030-1635559602632)

- 这是目前 RISC 指令集架构 (RISC、MIPS) 用的字节序
	- 也是我们看起来比较顺的字节序

- 这两个单词怎么来的呢？
	- big-endian 
	- little-endian

### 词汇来源

- 主要指的是磕鸡蛋的时候用哪个头磕
	- 大头
	- 小头？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685763897192)

- 出现于《格列佛游记》
	- 小人国为水煮蛋争论
	- 争论的双方分别被称为“大端派”和“小端派”
	- 以下是1726年关于大小端之争历史的描述

>    “我下面要告诉你的是，Lilliput和Blefuscu这两大强国在过去36个月里一直在苦战。战争开始是由于以下的原因：我们大家都认为，吃鸡蛋前，原始的方法是打破鸡蛋较大的一端，可是当今皇帝的祖父小时候吃鸡蛋，一次按古法打鸡蛋时碰巧将一个手指弄破了。因此他的父亲，当时的皇帝，就下了一道敕令，命令全体臣民吃鸡蛋时打破鸡蛋较小的一端，违令者重罚。老百姓们对这项命令极其反感。历史告诉我们，由此曾经发生过6次叛乱，其中一个皇帝送了命，另一个丢了王位。这些叛乱大多都是由Blefuscu的国王大臣们煽动起来的。叛乱平息后，流亡的人总是逃到那个帝国去寻求避难。据估计，先后几次有11000人情愿受死也不肯去打破鸡蛋较小的一端。关于这一争端，曾出版过几百本大部著作，不过大端派的书一直是受禁的，法律也规定该派任何人不得做官。”

- 这很像甜咸豆腐脑的争论
	- 无关对错
	- 只是个人习惯
- 能两种都吃的话
	- 可以 增加食物多样性
- 我个人郑重推荐
	- 加 韭菜花和辣椒油 少许

### 后续 
- 1980年
	- Danny Cohen
	- 一位网络协议的早期开发者
- 在其著名的论文"On Holy Wars and a Plea for Peace"中
	- 为平息一场关于字节该以什么样的顺序传送的争论
	- 而第一次引用了该词

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685764206889)

- python默认用的是
	- 什么字节序呢？

### python默认字节序

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20221030-1667137637974)

- python默认用 
	- 小端字节序

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220802-1659414621969)

### 生活细节

- 除了磕鸡蛋之外
	- 鸡蛋放置也很有讲究

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685764240145)

- 放置鸡蛋
	- 要按照鸡蛋 自身的规律

### 按规律办事

- 大头里面 有空气
	- 大头朝上 放的时间久一点

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685764405268)

- 磕鸡蛋的时候
	- 应该是磕哪头呢？

### 磕鸡蛋的细节

- 鸡蛋有内膜 叫做凤凰衣
	- 可以外用
	- 也可以内用

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685790033849)

- 粉碎性地磕鸡蛋外壳
	- 可以从小头附近 剥鸡蛋壳
		- 连同鸡蛋内膜一起剥出来
- 手法要轻柔
	- 否则 鸡蛋壳会感觉到疼

### 寻道

- 跳出大头小头二元对立

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230608-1686184266086)

- 找到正确方法

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230608-1686184305404)

- 完成任务

### 禅意

- 不产生绝对判断
	- 不产生路径依赖
- 不断研究感受
	- 找到最好的方法

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20230603-1685790247768)

- 随时接受教训
	- 灵活应变
	- 对自己的学习率敏感

### 总结

- 这次我们研究了字节序
	- 字节序有两种

| 符号 | 英文名称 | 中文名称 |
|---|---|---|
| `<` | little-endian |  小字节序 |
| `>` | big-endian | 大字节序 |

- 字节序 用来
	- 明确 整型数字存储的 顺序
- 如果 读写数字出了错
	- 可以 考虑一下
		- 是否  字节序出了问题
- 变量现在可以
	- 声明
	- 初始化
	- 存储了
- 但是 变量
	- 又应该如何`删除`呢？🤔
- 下次再说👋
