---
show: step
version: 1.0
enable_checker: true
---

# å®‰è£…ç¯å¢ƒ

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬äº†è§£äº†selenium
- seleniumæ˜¯ä¸€ä¸ªé©±åŠ¨çœŸå®æµè§ˆå™¨çš„çˆ¬è™«
- æ”¯æŒå„ç§ç³»ç»Ÿã€å¾ˆå¤šç§ä¸»æµæµè§ˆå™¨
- æŠŠæµè§ˆå™¨çš„å„ç§æ“ä½œå°è£…æˆå„ç§è¯­è¨€çš„æ¥å£
- æˆ‘ä»¬ä½¿ç”¨pythonçš„æ¥å£
- å°±å¯ä»¥è®©ä¸€ä¸ªçœŸå®æµè§ˆå™¨å»è®¿é—®ç½‘ç«™
- ä»è€Œå¾—åˆ°çˆ¬å–çš„æ•ˆæœ
- å¯ä»¥çˆ¬ä¸‹æ¥äº›ä»€ä¹ˆå‘¢ï¼Ÿ

### ä»æ–‡æ¡£å…¥æ‰‹

- https://www.selenium.dev/documentation/webdriver/getting_started/first_script/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663034670846)

### ä»£ç 

```
from selenium.webdriver.firefox.service import Service
from selenium import webdriver
import time
service = Service(executable_path="geckodriver")
driver = webdriver.Firefox(service=service)
driver.get("https://www.bilibili.com/video/BV1Es411Z7MH")
time.sleep(10)
title = driver.title
print(title)
driver.quit()
```

- ç¡®å®å¯ä»¥è·å¾—ç½‘é¡µæ ‡é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663034865284)

- å¯ä»¥è·å¾—æ•´ä¸ªæºæ–‡ä»¶ä¹ˆï¼Ÿ

### è·å¾—æºä»£ç 

```
from selenium.webdriver.firefox.service import Service
from selenium import webdriver
import time
service = Service(executable_path="geckodriver")
driver = webdriver.Firefox(service=service)
driver.get("https://www.bilibili.com/video/BV1Es411Z7MH")
time.sleep(10)
title = driver.title
print(title)
source = driver.page_source.encode("utf-8")
print(source)
driver.quit()
```

- ç¡®å®å¯ä»¥çˆ¬å–åˆ°ç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663035476270)

- å¯ä»¥æŠŠè¿™ä¸ªç½‘é¡µå¯¹æ¥åˆ°lxmlç”Ÿæˆä¸€æ£µetreeä¹ˆï¼Ÿ

### å¯¹æ¥

```
from selenium.webdriver.firefox.service import Service
from selenium import webdriver
from lxml import etree
import time
service = Service(executable_path="geckodriver")
driver = webdriver.Firefox(service=service)
driver.get("https://www.bilibili.com/video/BV1Es411Z7MH")
time.sleep(10)
source = driver.page_source
html = etree.HTML(source)
for elem in html.iter():
    print(elem.tag,end=",")
driver.quit()
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220913-1663036896857)

### xpath

- å°è¯•xpath

```
from selenium.webdriver.firefox.service import Service
from selenium import webdriver
from lxml import etree
import time
service = Service(executable_path="geckodriver")
driver = webdriver.Firefox(service=service)
driver.get("https://www.bilibili.com/video/BV1Es411Z7MH")
time.sleep(10)
source = driver.page_source
html = etree.HTML(source)
title = html.xpath("/html/head/title")[0]
print(title.text)
driver.quit()
```

- å¾ˆå¥½ç”¨
- æ— éšœç¢å¯¹æ¥
- åŸæ¥ç”¨requestsè·å–ç½‘é¡µ
- ç°åœ¨ç”¨seleniumè·å–ç½‘é¡µ
- åé¢éƒ½å¯ä»¥å¯¹æ¥lxml
- è€Œä¸”seleniumç”¨çš„æ˜¯çœŸæ˜¯ç½‘é¡µ
- è¿˜å¯ä»¥è·å¾—ä¸€äº›åŠ¨æ€åŠ è½½çš„æ•°æ®

## æ€»ç»“ 

- è¿™æ¬¡æˆ‘ä»¬å°è¯•ç”¨seleniumè®¿é—®äº†ä¸€ä¸ªç½‘é¡µ
- åŸç†ä¸Šseleniumå’Œrequestså‘è¯·æ±‚å·®ä¸å¤š
- éƒ½æ˜¯å‘é€è¯·æ±‚
- åªä¸è¿‡requestsæ˜¯ç›´æ¥å‘é€è¯·æ±‚
- seleniumç”¨çœŸå®çš„æµè§ˆå™¨å‘é€è¯·æ±‚
	- å¯ä»¥åŠ¨æ€åŠ è½½ä¸€äº›åå°çš„ä¸€äº›æ•°æ®
- å¾—åˆ°ç½‘é¡µæºæ–‡ä»¶ä¹‹åéƒ½å¯ä»¥xpathè¿›è¡Œç­›é€‰æå–
- ç”¨seleniumè¿˜å¯ä»¥åšä¸€äº›ä»€ä¹ˆæµè§ˆå™¨æ‰èƒ½åšçš„ä¸œè¥¿ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ğŸ‘‹