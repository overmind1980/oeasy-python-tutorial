---
show: step
version: 1.0
enable_checker: true
---

# utf-8

## å›å¿†ä¸Šæ¬¡å†…å®¹

- ä¸Šæ¬¡äº†è§£äº†`unicode` å’Œ `utf-8`
	- `unicode`æ˜¯å­—ç¬¦é›†
	- `utf-8`æ˜¯ä¸€ç§å¯å˜é•¿åº¦çš„ç¼–ç æ–¹å¼
	- `utf-8`æ˜¯å®ç°`unicode`çš„å­˜å‚¨å’Œä¼ è¾“çš„ç°å®çš„æ–¹å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/92423/uid1190679-20250222-1740193730661) 

- ç›®å‰aiæ—¶ä»£æ¥äº†
	- åº•å±‚çš„token éƒ½æ˜¯è‹±æ–‡ç¼–ç æ„æˆçš„
	- ä¸­æ–‡åœ¨aiæ—¶ä»£åº”è¯¥å¦‚ä½•å­˜åœ¨å‘¢?

### openai

- openaiçš„åˆ†è¯è¿‡ç¨‹
	- https://platform.openai.com/tokenizer?ref=blog.mlq.ai

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740229097543) 

- è‹±æ–‡ å¹¶ä¸æ˜¯ å•è¯
	- tokenization æ˜¯ ä¸¤ä¸ª token

### token_id

- è¿™äº›token æ‹¥æœ‰è‡ªå·±çš„token_id

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740229234605) 

- ä¸­æ–‡å¦‚ä½•è¿›å…¥ ç¥ç»ç½‘ç»œå‘¢?

### åˆ†è¯

- è‹±æ–‡tokenè¢«è¯†åˆ«ä¸ºtoken

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740228629219) 

- ä»gpt-3ä¸­
	- å¤§éƒ¨åˆ† ä¸­æ–‡æ±‰å­— 
	- åœ¨ç¥ç»ç½‘ç»œä¸­æ²¡æœ‰èŠ‚ç‚¹

### gpt3.5å’Œ4

- gpt3.5 å’Œ 4ä¸­
	- ä¸­æ–‡token è¶Šæ¥è¶Šé è°±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740228660966) 

- ä½†æ˜¯è‹±æ–‡ä¸¤ä¸ªå­—
	- å½¢æˆäº†ä¸¤ä¸ªtoken

### gpt4oä¹‹å

- è‹±æ–‡ä¸¤ä¸ªå­—
	- å½¢æˆäº†ä¸€ä¸ªtoken
- æ—¶ä»£ ä¸¤ä¸ªæ±‰å­—
	- å½¢æˆäº†ä¸€ä¸ªtoken

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250222-1740228724121)

- å¯ä»¥çœ‹åˆ° gptå¯¹äºä¸­æ–‡ ç†è§£åœ¨ä¸æ–­åŠ æ·±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740229643007) 

- tokené‡Œé¢ æœ‰ä»€ä¹ˆ?

### token

- æ¯ä¸ª token æœ‰è‡ªå·±çš„ è¯å‘é‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250223-1740282637717) 

- ä¸­è‹±æ–‡ çš„ token è¢«ç¼–å…¥äº† åŒä¸€ä¸ªç¥ç»ç½‘ç»œæ¨¡å‹

### åº•å±‚ç¼–ç 

- è¿™ä¸€åˆ‡ éƒ½æ˜¯åŸºäº utf-8ç¼–ç 
	- utf-8 å…¼å®¹ ascii 
	- å¦‚æœæ˜¯ 7-bitçš„ å•å­—èŠ‚ é‚£å°±æ˜¯ ascii
	- ä¸­æ–‡æ±‰å­— åœ¨ 3-byte çš„ä½ç½®
	- é™¤æ­¤ä¹‹å¤– è¿˜æœ‰ æ³•æ–‡ã€æ—¥æ–‡ã€å¾·æ–‡....

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740230201539) 

- è‹±æ–‡å•è¯ å’Œ å…¶ä»–è¯­è¨€ æ”¾åˆ°ä¸€èµ·æ¯”è¾ƒçš„æ—¶å€™
	- å°±ä¼š å‘ç° è¯­è¨€ä¹‹é—´çš„ ç›¸ä¼¼åº¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740229936907) 

### æ‹‰ä¸è¯­æ—

- æºäºæ„å¤§åˆ©
	- ç›¸åŒæ ¹æº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250222-1740230323689)

### yellow

- å•è¯ æœ‰çš„åŒæºå¤´
	- ç°åœ¨ æ„æ€ ç›¸å·®ä¸å¤§
	- è‹±è¯­ Yellow
	- è¥¿ç­ç‰™è¯­ Amarllio

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740231725850) 

- éƒ½æ˜¯æŒ‡ æŸ æª¬é»„
	- è¯å‘é‡ é«˜åº¦ç›¸ä¼¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250222-1740231858856)

### é»„

- é»„æ²³ çš„ é»„ 
	- å¯ä»¥æ˜¯ é»„è¤è‰²
	- è‹±è¯­ æ„Ÿè§‰ ä¸å¯ç†è§£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250222-1740231923147)

- Brown River

### é»„

- è€Œä¸”é»„è‰²è¿˜æœ‰å¾ˆå¤šçš„å«ä¹‰
	- ä¹°å–é»„äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250222-1740232559212) 
	
### æ–°token

- ä¸­æ–‡æ±‰å­— å’Œ è‹±æ–‡å­—æ¯
	- ä»¥åŠ å„ç§è¯­è¨€å’Œæ–‡å­—
	- ç»Ÿä¸€æ„æˆ tokenåº“

- è€Œä¸”ä¼š ä¸æ–­å¢åŠ 
	- è‹±æ–‡ 1000-2000 tokens
	- ä¸­æ–‡ 200 tokens

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3649066/uid1190679-20250223-1740298040354) 

- è¿™äº› éƒ½ åŸºäº utf-8 ç¼–ç 
	- å…·ä½“æ˜¯å¦‚ä½•å­˜å‚¨çš„å‘¢?

### ç›¸äº’è½¬åŒ–

- unicodeå½¢å¼
	- "\u4e00"
- æŠŠunicodeç¼–ç æŒ‰ç…§utf-8ç¼–ç 
	- "\u4e00".encode("utf-8")
- å…ˆæŠŠunicodeç¼–ç ä¸ºutf-8ï¼Œå†è§£ç å›unicode
	- "\u4e00".encode("utf-8").decode("utf-8")
- æŠŠutf-8ç¼–ç è§£ç å›unicodeç¼–ç 
	- b"\xe4\xb8\x80".decode("utf-8")


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210814-1628932306382)

- æŠŠutf-8ç¼–ç å…ˆè§£ç å›unicodeç¼–ç ï¼Œå†ç¼–ç ä¸ºutf-8
	- b"\xe4\xb8\x80".decode("utf-8").encode("utf-8")

- ä¹‹å‰ æŒæ¡äº† ascii ç å’Œ ascii å­—ç¬¦çš„è½¬åŒ–æ–¹æ³•
	- è¿™æ¬¡ æŒæ¡äº† unicode å’Œ utf-8 åŒå‘è½¬åŒ–çš„æ–¹æ³•
	- åœ¨utf-8ä¸‹ä¸­æ–‡ç¼–ç ä¼šèŠ‚çœç©ºé—´å—ï¼Ÿ

### ç©ºé—´é—®é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230417-1681727049762)

- ä¸­æ–‡æ±‰å­—å¤š
- ä¿¡æ¯å¯†åº¦æ¯”è‹±æ–‡å¤§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230417-1681727080125)

- å°¤å…¶æ˜¯é•¿å¥å­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230417-1681727231890)

- gb2312ç³»åˆ—åˆå¦‚ä½•äº†å‘¢ï¼Ÿ

### gbkçš„æ¼”åŒ–

- 80å¹´çš„gb2312
- 95å¹´çš„gbk
- 05å¹´æœ‰äº†gb18030

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220507-1651889798653)

- å…¨ç§°ï¼šå›½å®¶æ ‡å‡† GB 18030-2005ã€Šä¿¡æ¯æŠ€æœ¯ä¸­æ–‡ç¼–ç å­—ç¬¦é›†ã€‹
	- æ˜¯ä¸­åäººæ°‘å…±å’Œå›½ç°æ—¶æœ€æ–°çš„å†…ç å­—é›†
	- æ˜¯ GB 18030-2000ã€Šä¿¡æ¯æŠ€æœ¯ä¿¡æ¯äº¤æ¢ç”¨æ±‰å­—ç¼–ç å­—ç¬¦é›†åŸºæœ¬é›†çš„æ‰©å……ã€‹çš„ä¿®è®¢ç‰ˆ
- æœ‰å¤šå°‘å­—ç¬¦äº†å‘¢ï¼Ÿ

### å­—ç¬¦é›†

- GB 18030 ä¸ GB 2312-1980 å’Œ GBK å…¼å®¹
	- å…±æ”¶å½•æ±‰å­—<span style="font-size:80px">70244</span>ä¸ª
	- ä¸ utf-8 ç›¸åŒ
		- é‡‡ç”¨å¤šå­—èŠ‚ç¼–ç 
		- æ¯ä¸ªå­—å¯ä»¥ç”± 1 ä¸ªã€2 ä¸ªæˆ– 4 ä¸ªå­—èŠ‚ç»„æˆ
		- ç¼–ç ç©ºé—´åºå¤§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221023-1666512206997)

- utf-8æ ‡å‡†æµ·çº³ç™¾å·
- GB18030ç”¨çš„äººå¾ˆå°‘
	- ä½†å§‹ç»ˆä¾ç„¶å­˜åœ¨
- GB18030æœ‰ä»€ä¹ˆä½œç”¨å‘¢ï¼ŸğŸ˜„

### ä¹±ç é—®é¢˜

- æœ‰çš„æ—¶å€™è¿˜ä¼šé‡åˆ° gb18030 ç¼–ç çš„æ–‡æ¡£
	- ç”¨ utf-8ç¼–ç æ–¹å¼ 
	- æ‰“å¼€ gb18030ç¼–ç  çš„æ–‡ä»¶
	- å°±ä¼šä¹±ç 
- è¿™ä¸ªæ—¶å€™å¯ä»¥åœ¨ vim ä¸­ä½¿ç”¨å‘½ä»¤
	- `:edit ++enc=gb18030`
- å¯ä»¥è§£å†³é—®é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210315-1615811110713)

- ä¸ºä»€ä¹ˆä¼šå‘ç”Ÿä¹±ç å‘¢ï¼Ÿ

### ç¼–ç ä¸åŒé€ æˆçš„é—®é¢˜

```
'ä½ å¥½'.encode("uft-8")
```

- ä¸¤ä¸ªæ±‰å­—è¢«ç¼–ç ä¸ºå…­å­—èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240418-1713408601744)

- å¦‚æœæŒ‰gbkæ–¹å¼è§£ç è¿™å…­ä¸ªå­—èŠ‚
	- ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### é”™è¯¯è§£ç 

```
'ä½ å¥½'.encode("uft-8").decode("gbk")
```

- è§£ç æ–¹å¼ä¸å¯¹
	- å¯¼è‡´ä¸å¯ç†è§£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240418-1713408695222)

- gb18030 ç”¨çš„äººå°‘
	- æœ‰ç”¨çš„äººå°‘çš„å¥½å¤„
	- å¦‚æœåªä¼šç”¨utf-8è§£ç 
	- é‚£ä¹ˆgb18030æœ¬èº«å°±æ„æˆäº†åŠ å¯†ç³»ç»Ÿ
	- åªæœ‰æ‡‚æ±‰è¯­å¹¶ä¸”æ‡‚ç¼–ç æ‰èƒ½çœ‹æ‡‚
	- ä¸æ‡‚çš„è¯åªèƒ½è§åˆ°ä¹±ç 
	- æƒ³è¦è‡ªåŠ¨ç¿»è¯‘éƒ½ä¸è¡Œ

## æ€»ç»“

- å¤§è¯­è¨€æ¨¡å‹
	- éœ€è¦ç¼–ç  å„ç§è¯­è¨€ 
	- ä½¿ç”¨utf-8ç¼–ç æ–¹å¼
- "æ‹œ"å­—
	- unicodeç¼–ç æ˜¯0x62dc
	- utf-8å­—èŠ‚å½¢å¼æ˜¯b"\xe6\x8b\x9c"

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230410-1681119434173)

- å¦‚æœæˆ‘æƒ³çœ‹çœ‹
	- b"\x62\xdc"ç”¨utf-8è§£ç 
	- ä¼šå¾—åˆ°å“ªä¸ªæ±‰å­—å‘¢ï¼ŸğŸ¤”

- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹

