---
show: step
version: 1.0
enable_checker: true
---

# éå±€éƒ¨å˜é‡(nonlocal)

## å›å¿†

- ä¸Šæ¬¡å­¦ä¹ äº†åµŒå¥—çš„å‡½æ•°å®šä¹‰
	- åœ¨outeré‡Œé¢åˆå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°inner
	- å¯ä»¥åœ¨outeré‡Œç”¨ç¨‹åºè°ƒç”¨inner

- è¿™ä¸ªåµŒå¥—å±‚æ¬¡å¯èƒ½æœ‰å¾ˆå¤šå¾ˆå¤šå±‚
- ç®€å•æ¥è¯´å°±æ˜¯
	- å¤–éƒ¨å®šä¹‰çš„å†…éƒ¨å¯è§
	- å†…éƒ¨å®šä¹‰çš„å¤–éƒ¨ä¸å¯è§
	- å†…å¤–åŒåçš„å†…å±‚å±è”½å¤–å±‚
- å¦‚æœæˆ‘å°±æƒ³è®©innerå‡½æ•°è¯»å†™outerå‡½æ•°ä¸­çš„å±€éƒ¨å˜é‡
- åº”è¯¥å¦‚ä½•å‘¢ï¼ŸğŸ¤”

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660967646106)


### å°è¯•å®šä¹‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660960416244)

- æŠŠè¿™ä¸ªä¸œè¥¿å®šä¹‰æˆå…¨å±€(global)çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660962977990)

- ä¸»ç¨‹åºä¸è®¤inner_local
- å°è¯•åœ¨ä¸»ç¨‹åºä¸­å®šä¹‰inner_local

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660963119121)

- è™½ç„¶å˜é‡çš„åå­—å«åš`inner_local`
- ä½†æ˜¯ä»–ç¡®å®æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660963165861)

- å¦‚æœæˆ‘åªå¸Œæœ›inner_localåœ¨outerå‡½æ•°ä¸­å¯è§
- ä½†æ˜¯åœ¨ä¸»ç¨‹åºä¸­ä¸å¯è§
- æœ‰å¯èƒ½ä¹ˆï¼Ÿ

### æŸ¥æ‰¾

- è¿™ä¸ªåº”è¯¥ç¦»ç€globalçš„å¸®åŠ©æ–‡æ¡£ä¸è¿œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660963839490)

- nonlocalå£°æ˜çš„å˜é‡
- å¿…é¡»æ˜¯ä¸Šä¸€å±‚å‡½æ•°ä¸­å·²ç»å­˜åœ¨çš„å±€éƒ¨(local)å˜é‡

### æ­£ç¡®ç”¨æ³•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964189540)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964210931)

- ä¸Šä¸€å±‚çš„ç›´æ¥çˆ¶å‡½æ•°outerå¯ä»¥è®¿é—®
- ä¸»ç¨‹åºèƒ½å¤Ÿè®¿é—®inner_localä¹ˆï¼Ÿ

### å°è¯•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964474603)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964483100)

- ä¸»ç¨‹åºä¸èƒ½è®¿é—®
	- åªæœ‰ç›´æ¥ä¸Šä¸€å±‚çš„çˆ¶å‡½æ•°èƒ½å¤Ÿè®¿é—®
- åœ¨å­å‡½æ•°innerä¸­
	- å¯ä»¥ç”¨nonlocalä¿®æ”¹çˆ¶å‡½æ•°outerä¸­çš„å±€éƒ¨(local)å˜é‡ä¹ˆï¼Ÿ

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964911825)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964920459)

- ç¡®å®å¯ä»¥ä¿®æ”¹
- å¦‚æœç»™å…¨å±€(global)çš„å˜é‡å£°æ˜ä¸ºnonlocalä¼šå¦‚ä½•å‘¢ï¼Ÿ

### global

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660966219818)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660966229008)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660964368332)

- nonlocalä¸èƒ½å£°æ˜å·²ç»å£°æ˜ä¸ºå…¨å±€(global)çš„å˜é‡
- ä¸‰ä¸ªä½œç”¨äºç±»å‹ï¼ï¼ï¼
	- local æœ¬åœ°å¯è§ (é»˜è®¤)
	- global å…¨å±€å¯è§
	- nonlocal éæœ¬åœ°å¯è§(ä¸Šä¸€å±‚å‡½æ•°ä¹Ÿå¯è§)


### æ€»ç»“
- æˆ‘ä»¬ç ”ç©¶äº†nonlocal
- nonlocalæ˜¯æ§åˆ¶å˜é‡ä½œç”¨åŸŸ(scope)çš„å…³é”®å­—
- ç›®å‰å­¦äº†3ä¸ª
	- global å…¨å±€å¯è§
	- local æœ¬åœ°å¯è§
	- nonlocal éæœ¬åœ°å¯è§(ä¸Šä¸€å±‚å‡½æ•°ä¹Ÿå¯è§)
- å‡½æ•°æ—¢ç„¶å·²ç»æ˜¯å°è£…(encapsulate)äº†çš„åŠŸèƒ½(function)
- ä¸ºä»€ä¹ˆè¿˜è¦è¿›ä¸€æ­¥å°è£…å‘¢ï¼Ÿ
- å‡½æ•°ä¸­çš„å‡½æ•°æœ‰ä»€ä¹ˆæ„ä¹‰å‘¢ï¼Ÿ
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ğŸ‘‹



