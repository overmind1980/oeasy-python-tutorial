---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡äº†è§£äº†åŸºç¡€å›¾åƒçš„æ„æˆ
	- é»‘åº•
	- ç™½åº•
	- é»‘åº•ç™½å—
	- ç™½åº•é»‘å—ç­‰
- å¯ä»¥å¤åˆ¶å›¾åƒä¸­çš„ä¸€éƒ¨åˆ†åƒç´ çŸ©é˜µ
- ä¹Ÿå¯ä»¥å°†å›¾åƒæŒ‰ç…§æŸç§æ–¹å¼åˆ‡å¼€
	- å°±åƒåˆ‡åˆ†ä¹å®«æ ¼é‚£æ ·	

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703947055192)

- ä¸è¿‡ç›®å‰ç©çš„éƒ½æ˜¯ç°åº¦è‰²å½©æ¨¡å¼
- èƒ½å¦æ“ä½œå½©è‰²å›¾å‘¢ï¼Ÿ



BGRå½©è‰²æ¨¡å¼ä¸‹å›¾åƒçš„çŸ©é˜µç»“æ„



![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092415794)

```
import cv2  
image = cv2.imread("/mnt/cgshare/monkey.png")
cv2.imshow("image",image)
print(image)
print(image.shape)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destoryAllWindows()
```
### è‰²å½©æ¨¡å¼

- å›¾åƒä¸­çš„åƒç´ ç‚¹ç»†èŠ‚

```
import cv2                  
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("image",image)   
height, width,channels = image.shape
print(image)                
print("type(image)====", type(image))
print("image.ndim====", image.ndim)
print("image.dtype====", image.dtype)
print("height====",height)  
print("width====",width)    
print("channel====",channels)
print("image.size====", image.size)
key = cv2.waitKey()         
if key & 0xFF == ord("q"):  
    cv2.destroyAllWindows()
```

- æ³¨æ„shapeä¸­
	- å…ˆå¾—åˆ°çš„æ˜¯é«˜åº¦å€¼
	- åå¾—åˆ°çš„æ˜¯å®½åº¦å€¼
	- æœ€åæ˜¯é€šé“æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704017506322)

- å¯ä»¥å¾—åˆ°å…·ä½“çš„åƒç´ ç‚¹ä¿¡æ¯å—ï¼Ÿ

### æŸ¥çœ‹å…·ä½“åƒç´ ç‚¹çš„é¢œè‰²
```
import cv2                 
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("image",image)  
height, width,channels = image.shape
print(image)               
print("image[0,0]=======",image[0][0])
print("image[0,1]=======",image[0][1])
print("image[1,0]=======",image[1][0])
print("image[1,1]=======",image[1][1])
key = cv2.waitKey()        
if key & 0xFF == ord("q"): 
    cv2.destroyAllWindows()
```

- æŸ¥çœ‹å›¾åƒæ—¶
	- å¯ä»¥ç”¨æ‰‹è§¦æ§æ¿æåˆæˆ–æ”¾å¼€è¿™ä¸ªå›¾åƒä½ç½®
	- ç¬¬ä¸€ç»´åº¦æ˜¯çºµåæ ‡y
	- ç¬¬äºŒç»´åº¦æ˜¯æ¨ªåæ ‡x

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704017641928)

- é¢œè‰²å…ƒç»„ä¸­çš„æ¬¡åºæ˜¯BGR
- å¯ä»¥åšä¸€ä¸ªå•ä¸€åƒç´ çš„å›¾åƒå—ï¼Ÿ

### è®¾ç½®ä¸€ä¸ªå•ä¸ªåƒç´ 
```
import cv2          
import numpy as np
one_pixel = np.zeros((1,1,3),np.uint8)
print("one_pixel=======",one_pixel)
print("one_pixel[0]====",one_pixel[0])
print("one_pixel[0][0]====",one_pixel[0][0])
cv2.imshow("one_pixel",one_pixel)
one_pixel[0,0] = 255 
print("one_pixel=======",one_pixel)
print("one_pixel[0]====",one_pixel[0])
print("one_pixel[0][0]====",one_pixel[0][0])
cv2.imshow("one_pixel_2",one_pixel)
cv2.waitKey()       
cv2.destroyAllWindows()
```

- å¾—åˆ°ä¸¤ä¸ªå•åƒç´ å›¾åƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704017761026)

### è®¾ç½®ä¸€ä¸ª3ç»´å‘é‡

```
import cv2   
import numpy as np
vector = np.zeros((3,1,3),np.uint8)
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector",vector)
vector[0] =	 (255,0,0)
vector[1] = (0,255,0)
vector[2] = (0,0,255)
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector_2",vector)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704018292136)

- å¯ä»¥è®¾ç½®ä¸€ä¸ª2*2çŸ©é˜µå—ï¼Ÿ

### äºŒç»´çŸ©é˜µ

```
import cv2               
import numpy as np       
matrix = np.zeros((2,2,3),np.uint8)
print("matrix=======",matrix)
print("matrix[0]====",matrix[0])
print("matrix[0][0]====",matrix[0][0])
cv2.imshow("matrix",matrix)
for i in range(2):       
    for j in range(2):   
        matrix[0,1] = (255,0,0)
        matrix[1,0] = (0,255,0)
        matrix[1,1] = (0,0,255)
print("matrix=======",matrix)
print("matrix[0]====",matrix[0])
print("matrix[0][0]====",matrix[0][0])
cv2.imshow("matrix_2",matrix)
cv2.waitKey()            
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704018421197)

- å¯ä»¥è®¾ç½®å…·ä½“åƒç´ ç‚¹çš„é¢œè‰²å€¼å—ï¼Ÿ

### è®¾ç½®æŸä¸ªåƒç´ ç‚¹çš„é¢œè‰²
```
import cv2        
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
height, width,channels = image.shape
image[108,235] = (0,0,255)
cv2.imshow("after",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- é‡‘ç®æ£’ä¸Šæœ‰ä¸€ç‚¹çº¢è‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704018606878)

- å¯ä»¥è®¾ç½®æŸä¸ªçŸ©é˜µç©ºé—´åŒºåŸŸçš„é¢œè‰²å—ï¼Ÿ

### è®¾ç½®æŸä¸ªçŸ©é˜µç©ºé—´ä¸­åƒç´ ç‚¹çš„é¢œè‰²
```
import cv2        
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
height, width,channels = image.shape
image[100:110,220:240] = (0,0,255)
cv2.imshow("after",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- é¦–å…ˆé€‰å®šåŒºåŸŸ
- ç„¶åè®¾å®šé¢œè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704018781366)

### çœç•¥

- å¿½ç•¥x

```
import cv2     
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
height, width,channels = image.shape
image[100:110,:] = (0,255,0)
cv2.imshow("after",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704019030440)

### çœç•¥y

```
import cv2     
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
height, width,channels = image.shape
image[:,120:140] = (0,255,0)
cv2.imshow("after",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704019100787)

### çœç•¥ä¸‹é™

```
import cv2                 
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image) 
height, width,channels = image.shape
image[100:,120:] = (255,255,0)
cv2.imshow("after",image)  
key = cv2.waitKey()        
if key & 0xFF == ord("q"): 
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704019174531)

- å¯ä»¥å¤åˆ¶åƒç´ å—ï¼Ÿ

### å¤åˆ¶å›¾åƒåƒç´ 
```
import cv2          
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
y2 = 16             
x2 = 220            
y1 = 55             
x1 = 300            
image[0:abs(y2-y1), 0:abs(x2-x1)] = image[y2:y1,x2:x1]
cv2.imshow("before",image)
key = cv2.waitKey() 
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- æ³¨æ„å·¦ä¸Šè§’

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704019267225)

- å¯ä»¥å¤šå¤åˆ¶å‡ºæ¥å‡ ä¸ªå—ï¼Ÿ

### çŸ©é˜µ
```
import cv2
image = cv2.imread("/home/shiyanlou/monkey.png")
cv2.imshow("before",image)
y2 = 16
x2 = 220
y1 = 55
x1 = 300
for y_num in range(3):
    for x_num in range(2):
        image[y_num*abs(y1-y2):(y_num+1)*abs(y2-y1), x_num*abs(x2-x1):(x_num+1)*abs(x2-x1)] = image[y2:y1,x2:x1]
cv2.imshow("before",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704019340115)

### ç»ƒä¹ 

- å°è¯•æŠŠsword.jpg
	- ä¸‹é¢çš„é«˜å…‰äº®è‰²å»æ‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704018821813)

### æ€»ç»“

- è¿™æ¬¡æˆ‘ä»¬ç ”ç©¶äº†å½©è‰²å›¾ç‰‡çš„æ•°æ®ç»“æ„	
	- ä¸‰ç»´çŸ©é˜µ
		- é«˜åº¦
		- å®½åº¦
		- BGRä¸‰è‰²å…ƒç»„
- å¯ä»¥è‡ªå·±å®šåˆ¶æŸç§ç‰¹æ®Šçš„å›¾åƒ
- ä¹Ÿå¯ä»¥å¤åˆ¶ç°æœ‰å›¾åƒçš„æŸä¸ªçŸ©é˜µèŒƒå›´
- å¯ä»¥å¯¹çŸ©é˜µè¿›è¡Œè£åˆ‡æ“ä½œå—ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹