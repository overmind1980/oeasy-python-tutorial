---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åµŒå¥— embedded

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬ åˆäº†è§£äº† æ’åº
	- æœ€åˆçš„æ’åº list.sort
	- ä¹±åº list.shuffle
- æ— åºæœ‰åºéƒ½ç”¨
	- æ— åºå¸¦æ¥æ··ä¹±çš„å¿«ä¹
	- æœ‰åºå¸¦æ¥ç†æ€§çš„æ–¹ä¾¿
- æ–°æ’åº sorted
	- å¯ä»¥äº§ç”Ÿä¸€ä¸ªæ–°çš„åˆ—è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3022416/uid1190679-20241108-1731031965491) 

- ç›®å‰ åˆ—è¡¨ éƒ½æ˜¯ ä¸€ç»´çš„ 
- å¯ä»¥ æœ‰`æ›´é«˜ç»´åº¦`çš„åˆ—è¡¨å—ï¼Ÿ ğŸ¤”

### å»æ¸¸ä¹åœº

- åˆ†æappendå’Œextendçš„åŒºåˆ«

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669691015206)

- append
	- è¿½åŠ  åˆ—è¡¨é¡¹
- extend
	- æ‹“å±• åˆ—è¡¨

### ä¾‹å­

```
lst = []
lst.extend([0, 1])
lst
lst.append([0, 1])
lst
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250114-1736858509166) 

- è¿™è¿˜æ˜¯ä¸ªåˆ—è¡¨å—ï¼Ÿ

### è§‚å¯Ÿ

```
type(lst)
len(lst)
lst[0]
lst[1]
lst[2]
lst[3]
```

- lstç¡®å®è¿˜æ˜¯åˆ—è¡¨
	- æ€»å…±æœ‰ä¸‰ä¸ªåˆ—è¡¨é¡¹çš„åˆ—è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250114-1736858611651) 

- ç¬¬2ä¸ªåˆ—è¡¨é¡¹æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

### å†è§‚å¯Ÿ

```
lst
lst[2]
type(lst[2])
len(lst[2])
lst[2][0]
lst[2][1]
```

- ç¬¬äºŒä¸ªåˆ—è¡¨é¡¹ è¿˜æ˜¯ 
	- ä¸€ä¸ªåˆ—è¡¨
	- 2ä¸ªå…ƒç´ çš„ åˆ—è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250114-1736858858378) 

- lstæ˜¯åˆ—è¡¨çš„åˆ—è¡¨ï¼Ÿ

### å¥—å¨ƒï¼Ÿ

- åˆ—è¡¨çš„åˆ—è¡¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669708520014)

- å®¹å™¨çš„å®¹å™¨
	- ä¸å°±æˆäº†å¥—å¨ƒğŸª†å—ï¼Ÿ
	- è¿™ç§å¥—å¨ƒæˆ‘ä»¬ä¹‹å‰è§è¿‡

### éŸ³é«˜ä¸æ—¶å€¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20250504-1746320971645)

- æ¯ä¸ªéŸ³ç¬¦ 
	- ä¸ä½† åŒ…æ‹¬ éŸ³é«˜
	- è€Œä¸” åŒ…æ‹¬ æ—¶é•¿

```python
from mido import Message, MidiFile, MidiTrack

# éŸ³ç¬¦å¯¹åº”å­—å…¸ï¼ŒæŒ‰ç®€è°± 1 - 7 å¯¹åº” F è°ƒä¸‹çš„éŸ³ç¬¦ï¼ˆ1=F æ—¶çš„å¯¹åº”ï¼‰
NOTE_MAP = {
    '1': 65, '2': 67, '3': 69, '4': 70,
    '5': 72, '6': 74, '7': 76
}

# æ ¹æ®ç®€è°±å’Œå¯¹åº”æ—¶å€¼æ„å»ºæ—‹å¾‹ï¼Œè¿™é‡Œ '-' è¡¨ç¤ºå»¶é•¿ä¸€æ‹
MELODY = [
    ['1', 1], ['2', 1], ['3', 1], ['1', 1],  # ä¸¤åªè€è™
    ['1', 1], ['2', 1], ['3', 1], ['1', 1],  # ä¸¤åªè€è™
    ['3', 1], ['4', 1], ['5', 2],  # è·‘çš„å¿«
    ['3', 1], ['4', 1], ['5', 2],  # è·‘å¾—å¿«
    ['5', 0.5], ['6', 0.5], ['5', 0.5], ['4', 0.5], ['3', 1], ['1', 1],  # ä¸€åªæ²¡æœ‰çœ¼ç›
    ['5', 0.5], ['6', 0.5], ['5', 0.5], ['4', 0.5], ['3', 1], ['1', 1],  # ä¸€åªæ²¡æœ‰å°¾å·´
    ['2', 1], ['5', 1], ['1', 2],  # çœŸå¥‡æ€ª
    ['2', 1], ['5', 1], ['1', 2],  # çœŸå¥‡æ€ª
]

mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)

ticks_per_beat = 480  # æ ‡å‡† MIDI æ—¶é’Ÿï¼Œæ¯æ‹ 480 ticks
current_time = 0  # æ—¶é—´å¢é‡

for note_info in MELODY:
    note_name = note_info[0]
    beats = note_info[1]
    if note_name == '-':
        # å¤„ç†å»¶é•¿éŸ³ï¼Œå¢åŠ æ—¶é—´å¢é‡
        current_time += int(beats * ticks_per_beat)
        continue
    note = NOTE_MAP[note_name]
    duration = int(beats * ticks_per_beat)
    # å‘é€éŸ³ç¬¦å¼€å¯ï¼ˆå½“å‰æ—¶é—´å¢é‡ï¼‰å’Œå…³é—­ï¼ˆæŒç»­æ—¶é—´ï¼‰
    track.append(Message('note_on', note=note, velocity=64, time=current_time))
    track.append(Message('note_off', note=note, velocity=64, time=duration))
    current_time = 0  # æ¯ä¸ªéŸ³ç¬¦ç‹¬ç«‹ï¼Œæ— é—´éš”

mid.save('two_tigers_fè°ƒ.mid')
print("å·²ç”Ÿæˆã€Šä¸¤åªè€è™ã€‹F è°ƒ MIDI æ–‡ä»¶ï¼štwo_tigers_fè°ƒ.mid")
```

- é™¤äº† éŸ³é«˜ã€æ—¶é•¿ ä¹‹å¤–
	- éŸ³ç¬¦ è¿˜æœ‰ä»€ä¹ˆ ç‰¹å¾æŒ‡æ ‡å—ï¼Ÿ

### éŸ³ç¬¦ å±æ€§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746321202772) 

|è¦ç´ |å®šä¹‰|å½±å“å› ç´ |ä½œç”¨|ä¸¾ä¾‹|
|---|---|---|---|---|
|éŸ³é«˜|éŸ³ç¬¦çš„é«˜ä½|å‘å£°ä½“æŒ¯åŠ¨é¢‘ç‡|æ„å»ºæ—‹å¾‹ä¸å’Œå£°æ¡†æ¶|é’¢ç´ä»å·¦åˆ°å³éŸ³é«˜æ¸é«˜|
|æ—¶é•¿|éŸ³ç¬¦å‘å£°æŒç»­çš„æ—¶é—´|å‘å£°ä½“æŒ¯åŠ¨æŒç»­æ—¶é•¿|æ—¶é—´ä¸Šçš„é•¿çŸ­æ¯”ä¾‹ å½¢æˆèŠ‚å¥|å…¨éŸ³ç¬¦ã€å››åˆ†éŸ³ç¬¦|
|éŸ³å¼º|éŸ³ç¬¦å‘å£°çš„å¼ºå¼±ç¨‹åº¦|å‘å£°ä½“æŒ¯åŠ¨å¹…åº¦|æƒ…æ„Ÿèµ·ä¼ åŠ¨æ€å˜åŒ–|æ¿€æ˜‚ç”¨å¼ºéŸ³ è½»æŸ” ç”¨å¼±éŸ³|
|éŸ³è‰²|éŸ³ç¬¦å£°éŸ³çš„ç‰¹è‰²|å‘å£°ä½“çš„æè´¨ã€ç»“æ„ã€å‘å£°æ–¹å¼ç­‰|èµ‹äºˆå£°éŸ³ç‹¬ç‰¹ä¸ªæ€§|é’¢ç´æ¸…è„†æ˜äº® äºŒèƒ¡æ‚ æ‰¬|

### ä¿®æ”¹éŸ³å¼º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746321858435) 

- å®šä¹‰äº† å››æ¡£ éŸ³å¼º

```python
from mido import Message, MidiFile, MidiTrack

# éŸ³ç¬¦å¯¹åº”å­—å…¸ï¼ˆFè°ƒï¼‰
NOTE_MAP = {'1': 65, '2': 67, '3': 69, '4': 70, '5': 72, '6': 74, '7': 76}

# å®šä¹‰å¼ºå¼±è§„å¾‹ï¼ˆå››å››æ‹ï¼šå¼º=90ï¼Œå¼±=50ï¼Œæ¬¡å¼º=70ï¼Œæœ€å¼±=40ï¼‰
BEAT_VELOCITY = {
    1: 90,   # ç¬¬ä¸€æ‹ï¼ˆå¼ºï¼‰
    2: 50,   # ç¬¬äºŒæ‹ï¼ˆå¼±ï¼‰
    3: 70,   # ç¬¬ä¸‰æ‹ï¼ˆæ¬¡å¼ºï¼‰
    4: 50    # ç¬¬å››æ‹ï¼ˆå¼±ï¼‰
}

# å¸¦èŠ‚æ‹ä½ç½®çš„æ—‹å¾‹ï¼ˆæ ¼å¼ï¼š[éŸ³ç¬¦, æ—¶å€¼, èŠ‚æ‹ä½ç½®]ï¼ŒèŠ‚æ‹ä½ç½®ä»1å¼€å§‹ï¼‰
MELODY = [
    # ä¸¤åªè€è™ï¼ˆå››å››æ‹ï¼Œæ¯å°èŠ‚4æ‹ï¼‰
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],  # ç¬¬ä¸€å°èŠ‚
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],  # ç¬¬äºŒå°èŠ‚
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],              # ç¬¬ä¸‰å°èŠ‚ï¼ˆç¬¬ä¸‰æ‹å»¶é•¿2æ‹ï¼Œå ç¬¬3ã€4æ‹ï¼‰
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],              # ç¬¬å››å°èŠ‚
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],  # ç¬¬äº”å°èŠ‚
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],  # ç¬¬å…­å°èŠ‚
    ['2', 1, 1], ['5', 1, 2], ['1', 2, 3],              # ç¬¬ä¸ƒå°èŠ‚
    ['2', 1, 1], ['5', 1, 2], ['1', 2, 3],              # ç¬¬å…«å°èŠ‚
    ['2', 1, 1], ['5', 1, 2], ['1', 2, 3],              # ç¬¬ä¹å°èŠ‚
    ['2', 1, 1], ['5', 1, 2], ['1', 2, 3]               # ç¬¬åå°èŠ‚
]

mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)

ticks_per_beat = 480
current_time = 0
current_beat = 1  # è®°å½•å½“å‰èŠ‚æ‹ä½ç½®ï¼ˆæ¯å°èŠ‚ä»1å¼€å§‹ï¼‰

for note_info in MELODY:
    note_name, beats, beat_pos = note_info
    if note_name == '-':
        # å¤„ç†å»¶é•¿éŸ³
        current_time += int(beats * ticks_per_beat)
        current_beat = (current_beat + int(beats)) % 4  # æ›´æ–°èŠ‚æ‹ä½ç½®ï¼ˆ4æ‹å¾ªç¯ï¼‰
        continue
    
    # è·å–éŸ³å¼ºï¼ˆvelocityï¼‰ï¼Œè‹¥èŠ‚æ‹ä½ç½®è¶…å‡ºé¢„è®¾ï¼Œé»˜è®¤ä¸­ç­‰éŸ³é‡64
    velocity = BEAT_VELOCITY.get(beat_pos, 64)
    note = NOTE_MAP[note_name]
    duration = int(beats * ticks_per_beat)
    
    # å‘é€éŸ³ç¬¦æ¶ˆæ¯ï¼ˆå¸¦éŸ³å¼ºï¼‰
    track.append(Message('note_on', note=note, velocity=velocity, time=current_time))
    track.append(Message('note_off', note=note, velocity=velocity, time=duration))
    
    # æ›´æ–°èŠ‚æ‹ä½ç½®ï¼ˆæ¯æ‹å‰è¿›1ï¼Œè¶…è¿‡4åˆ™é‡ç½®ä¸º1ï¼‰
    current_beat = (beat_pos + int(beats)) % 4 if int(beats) == 1 else (beat_pos + int(beats))  # å¤„ç†è¿éŸ³ç¬¦
    current_time = 0  # éŸ³ç¬¦é—´æ— é—´éš”

mid.save('two_tigers_fè°ƒ_å¼ºå¼±.mid')
print("å·²ç”Ÿæˆå¸¦å¼ºå¼±è§„å¾‹çš„MIDIæ–‡ä»¶ï¼štwo_tigers_fè°ƒ_å¼ºå¼±.mid")
```

### å¯¼å‡ºæ•ˆæœ

- æ¯ä¸ªéŸ³ç¬¦ éŸ³å¼º å·²ç»æœ‰äº†å˜åŒ– 
	- å¼º
	- å¼±
	- æ¬¡å¼º
	- å¼±

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746322338597) 

- ç»“å°¾å¤„çš„éŸ³é«˜éœ€è¦è°ƒæ•´

### æé—®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746322418812) 

```python
from mido import Message, MidiFile, MidiTrack

NOTE_MAP = {
    '1': 60, '2': 62, '3': 64, '4': 65,
    '5': 67, '6': 69, '7': 71,
    '_5': 55  # ä½éŸ³SOï¼ˆG3ï¼‰
}

BEAT_VELOCITY = {1: 100, 2: 40, 3: 80, 4: 30}

MELODY = [
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],
    ['2', 1, 1], ['_5', 1, 2], ['1', 2, 3],
    ['2', 1, 1], ['_5', 1, 2], ['1', 2, 3]
]

mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)

ticks_per_beat = 480
current_beat = 1.0  # åˆå§‹ä½äºç¬¬1æ‹å¼€å§‹

for note_info in MELODY:
    note_name, beats, start_beat = note_info
    note = NOTE_MAP.get(note_name, 60)  # é»˜è®¤éŸ³ç¬¦ä¸ºC4ï¼ˆé¿å…é”®ä½é”™è¯¯ï¼‰
    
    # è·å–åŠ›åº¦ï¼šä½¿ç”¨èµ·å§‹èŠ‚æ‹çš„æ•´æ•°éƒ¨åˆ†ï¼ˆå¦‚1.5æ‹è§†ä¸ºç¬¬1æ‹ï¼‰
    beat_pos = int(start_beat) if start_beat.is_integer() else int(start_beat)
    velocity = BEAT_VELOCITY.get(beat_pos, 64)
    
    # è®¡ç®—æ—¶é—´å·®ï¼ˆç¡®ä¿éè´Ÿï¼‰
    time_delta = max(0, start_beat - current_beat)
    start_ticks = int(time_delta * ticks_per_beat)
    duration_ticks = int(beats * ticks_per_beat)
    
    # å‘é€éŸ³ç¬¦æ¶ˆæ¯
    track.append(Message('note_on', note=note, velocity=velocity, time=start_ticks))
    track.append(Message('note_off', note=note, velocity=velocity, time=duration_ticks))
    
    # æ›´æ–°å½“å‰èŠ‚æ‹ä½ç½®
    current_beat = start_beat + beats
    # æµ®ç‚¹å–æ¨¡ï¼Œä¿æŒåœ¨(0, 4]èŒƒå›´å†…
    current_beat = current_beat - 4 * int(current_beat // 4)
    if current_beat == 0:
        current_beat = 4.0

mid.save('two_tigers_cè°ƒ_ä½éŸ³so.mid')
print("ç”ŸæˆæˆåŠŸ")
```

### æ•ˆæœ

- éŸ³é«˜ä¿®æ­£äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746322820903) 

- è¿˜æƒ³æ”¹å˜ éŸ³è‰²

### éŸ³è‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746323105438) 

|ç¼–ç |å¯¹åº”ä¹å™¨|ç¼–ç |å¯¹åº”ä¹å™¨|
|---|---|---|---|
|0|å¤§é’¢ç´ï¼ˆå£°å­¦é’¢ç´ï¼‰|64|åˆæˆé“œç®¡2|
|1|æ˜äº®çš„é’¢ç´|65|é«˜éŸ³è¨å…‹æ–¯|
|2|ç”µé’¢ç´|66|ä¸­éŸ³è¨å…‹æ–¯|
|3|é…’å§é’¢ç´|67|æ¬¡ä¸­éŸ³è¨å…‹æ–¯|
|4|æŸ”å’Œçš„ç”µé’¢ç´|68|ä¸Šä½éŸ³è¨å…‹æ–¯|
|5|åŠ åˆå”±æ•ˆæœçš„ç”µé’¢ç´|69|åŒç°§ç®¡|
|6|ç¾½ç®¡é”®ç´ï¼ˆæ‹¨å¼¦å¤é’¢ç´ï¼‰|70|è‹±å›½ç®¡|
|7|ç§‘æ‹‰ç»´ç§‘ç‰¹ç´ï¼ˆå‡»å¼¦å¤é’¢ç´ï¼‰|71|å¤§ç®¡|
|8|é’¢ç‰‡ç´|72|å•ç°§ç®¡|
|9|é’Ÿç´|73|çŸ­ç¬›|
|10|å…«éŸ³ç›’|74|é•¿ç¬›|
|11|é¢¤éŸ³ç´|75|ç«–ç¬›|
|12|é©¬æ—å·´|76|æ’ç¬›|
|13|æœ¨ç´|77|å¹ç“¶å£|
|14|ç®¡é’Ÿ|78|å°ºå…«|
|15|å¤§æ‰¬ç´|79|å“¨|
|16|å‡»æ†é£ç´|80|æ´‹åŸ™|
|17|æ‰“å‡»å¼é£ç´|81|åˆæˆä¸»éŸ³1ï¼ˆæ–¹æ³¢ï¼‰|
|18|æ‘‡æ»šé£ç´|82|åˆæˆä¸»éŸ³2ï¼ˆé”¯é½¿æ³¢ï¼‰|
|19|æ•™å ‚é£ç´|83|åˆæˆä¸»éŸ³3ï¼ˆæ±½ç¬›é£ç´ï¼‰|
|20|ç°§ç®¡é£ç´|84|åˆæˆä¸»éŸ³4ï¼ˆå¹ç®¡ï¼‰|
|21|æ‰‹é£ç´|85|åˆæˆä¸»éŸ³5ï¼ˆå‰ä»–ï¼‰|
|22|å£ç´|86|åˆæˆä¸»éŸ³6ï¼ˆäººå£°ï¼‰|
|23|æ¢æˆˆæ‰‹é£ç´|87|åˆæˆä¸»éŸ³7ï¼ˆäº”åº¦ï¼‰|
|24|å°¼é¾™å¼¦å‰ä»–|88|åˆæˆä¸»éŸ³8ï¼ˆä½éŸ³åŠ ä¸»éŸ³ï¼‰|
|25|é’¢å¼¦å‰ä»–|89|åˆæˆæŸ”éŸ³1ï¼ˆæ–°æ—¶ä»£ï¼‰|
|26|çˆµå£«ç”µå‰ä»–|90|åˆæˆæŸ”éŸ³2ï¼ˆæš–éŸ³ï¼‰|
|27|æ¸…éŸ³ç”µå‰ä»–|91|åˆæˆæŸ”éŸ³3ï¼ˆå¤åˆæˆï¼‰|
|28|é—·éŸ³ç”µå‰ä»–|92|åˆæˆæŸ”éŸ³4ï¼ˆåˆå”±ï¼‰|
|29|åŠ é©±åŠ¨æ•ˆæœçš„ç”µå‰ä»–|93|åˆæˆæŸ”éŸ³5ï¼ˆå¼“å¼¦ï¼‰|
|30|åŠ å¤±çœŸæ•ˆæœçš„ç”µå‰ä»–|94|åˆæˆæŸ”éŸ³6ï¼ˆé‡‘å±ï¼‰|
|31|å‰ä»–å’ŒéŸ³|95|åˆæˆæŸ”éŸ³7ï¼ˆå…‰ç¯ï¼‰|
|32|å¤§è´å¸ï¼ˆå£°å­¦è´å¸ï¼‰|96|åˆæˆæŸ”éŸ³8ï¼ˆæ‰«å¼¦ï¼‰|
|33|ç”µè´å¸ï¼ˆæŒ‡å¼¹ï¼‰|97|åˆæˆç‰¹æ•ˆ1ï¼ˆé›¨ï¼‰|
|34|ç”µè´å¸ï¼ˆæ‹¨ç‰‡ï¼‰|98|åˆæˆç‰¹æ•ˆ2ï¼ˆéŸ³è½¨ï¼‰|
|35|æ— å“è´å¸|99|åˆæˆç‰¹æ•ˆ3ï¼ˆæ°´æ™¶ï¼‰|
|36|æŒå‡»è´å¸1|100|åˆæˆç‰¹æ•ˆ4ï¼ˆå¤§æ°”ï¼‰|
|37|æŒå‡»è´å¸2|101|åˆæˆç‰¹æ•ˆ5ï¼ˆäº®éŸ³ï¼‰|
|38|ç”µå­åˆæˆè´å¸1|102|åˆæˆç‰¹æ•ˆ6ï¼ˆå°å¦–ï¼‰|
|39|ç”µå­åˆæˆè´å¸2|103|åˆæˆç‰¹æ•ˆ7ï¼ˆå›å£°ï¼‰|
|40|å°æç´|104|åˆæˆç‰¹æ•ˆ8ï¼ˆç§‘å¹»ï¼‰|
|41|ä¸­æç´|105|é”¡å¡”å°”|
|42|å¤§æç´|106|ç­å“|
|43|ä½éŸ³å¤§æç´|107|ä¸‰å‘³çº¿|
|44|å¼¦ä¹ç¾¤é¢¤éŸ³éŸ³è‰²|108|ç­|
|45|å¼¦ä¹ç¾¤æ‹¨å¼¦éŸ³è‰²|109|å¡æ—å·´|
|46|ç«–ç´|110|é£ç¬›|
|47|å®šéŸ³é¼“|111|å¤æç´|
|48|å¼¦ä¹åˆå¥éŸ³è‰²1|112|å”¢å‘|
|49|å¼¦ä¹åˆå¥éŸ³è‰²2|113|é“ƒé“›|
|50|åˆæˆå¼¦ä¹1|114|æ‹‰ä¸æ‰“é“ƒ|
|51|åˆæˆå¼¦ä¹2|115|é’¢é¼“|
|52|åˆå”±â€œå•Šâ€éŸ³|116|æœ¨å—|
|53|äººå£°â€œå˜Ÿâ€éŸ³|117|å¤ªé¼“|
|54|åˆæˆäººå£°|118|å—µé¼“|
|55|ä¹é˜Ÿæ‰“å‡»ä¹|119|åˆæˆé¼“|
|56|å°å·|120|é•²æ³¢å½¢åè½¬|
|57|é•¿å·|121|ç£¨å¼¦å£°|
|58|å¤§å·|122|å‘¼å¸å£°|
|59|å¼±éŸ³å°å·|123|æµ·æµªå£°|
|60|åœ†å·|124|é¸Ÿé¸£å£°|
|61|é“œç®¡ç»„|125|ç”µè¯é“ƒå£°|
|62|åˆæˆé“œç®¡1|126|/|

### é€‰æ‹©å°å·

- ç¬¬33è¡Œ
	- å°† ä¹å™¨ 
		- ä» 1(é’¢ç´ğŸ¹)
		- ä¿®æ”¹ä¸º 56(å°å·ğŸº)

```
from mido import Message, MidiFile, MidiTrack

# Cå¤§è°ƒéŸ³é«˜æ˜ å°„
NOTE_MAP = {
    '1': 60, '2': 62, '3': 64, '4': 65,
    '5': 67, '6': 69, '7': 71,
    '_5': 55  # ä½éŸ³SOï¼ˆG3ï¼‰
}

# å¼ºå¼±è§„å¾‹
BEAT_VELOCITY = {1: 100, 2: 40, 3: 80, 4: 30}

# æ—‹å¾‹ï¼ˆåŒCå¤§è°ƒç‰ˆæœ¬ï¼‰
MELODY = [
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],
    ['1', 1, 1], ['2', 1, 2], ['3', 1, 3], ['1', 1, 4],
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],
    ['3', 1, 1], ['4', 1, 2], ['5', 2, 3],
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],
    ['5', 0.5, 1], ['6', 0.5, 2], ['5', 0.5, 3], ['4', 0.5, 4], ['3', 1, 1], ['1', 1, 2],
    ['2', 1, 1], ['5b', 1, 2], ['1', 2, 3],
    ['2', 1, 1], ['5b', 1, 2], ['1', 2, 3],
    ['2', 1, 1], ['_5', 1, 2], ['1', 2, 3],
    ['2', 1, 1], ['_5', 1, 2], ['1', 2, 3]
]

# åˆ›å»ºMIDIæ–‡ä»¶å¹¶è®¾ç½®éŸ³è‰²
mid = MidiFile()
track = MidiTrack()
mid.tracks.append(track)

# è®¾ç½®äºŒèƒ¡éŸ³è‰²ï¼ˆç¨‹åºå·54ï¼‰
track.append(Message('program_change', program=56, time=0))

ticks_per_beat = 480
current_beat = 1.0

for note_info in MELODY:
    note_name, beats, start_beat = note_info
    note = NOTE_MAP.get(note_name, 60)
    beat_pos = int(start_beat) if start_beat.is_integer() else int(start_beat)
    velocity = BEAT_VELOCITY.get(beat_pos, 64)
    
    time_delta = max(0, start_beat - current_beat)
    start_ticks = int(time_delta * ticks_per_beat)
    duration_ticks = int(beats * ticks_per_beat)
    
    track.append(Message('note_on', note=note, velocity=velocity, time=start_ticks))
    track.append(Message('note_off', note=note, velocity=velocity, time=duration_ticks))
    
    current_beat = start_beat + beats
    current_beat = current_beat - 4 * int(current_beat // 4)
    if current_beat == 0:
        current_beat = 4.0

mid.save('two_tigers_äºŒèƒ¡éŸ³è‰².mid')
print("å·²ç”ŸæˆäºŒèƒ¡éŸ³è‰²çš„MIDIæ–‡ä»¶ï¼štwo_tigers_äºŒèƒ¡éŸ³è‰².mid")
```

### æ€»ç»“

- è¿™æ¬¡äº†è§£äº† éŸ³ç¬¦å››è¦ç´ 

|è¦ç´ |å®šä¹‰|å½±å“å› ç´ |ä½œç”¨|ä¸¾ä¾‹|
|---|---|---|---|---|
|éŸ³é«˜|éŸ³ç¬¦çš„é«˜ä½|å‘å£°ä½“æŒ¯åŠ¨é¢‘ç‡|æ„å»ºæ—‹å¾‹ä¸å’Œå£°æ¡†æ¶|é’¢ç´ä»å·¦åˆ°å³éŸ³é«˜æ¸é«˜|
|æ—¶é•¿|éŸ³ç¬¦å‘å£°æŒç»­çš„æ—¶é—´|å‘å£°ä½“æŒ¯åŠ¨æŒç»­æ—¶é•¿|æ—¶é—´ä¸Šçš„é•¿çŸ­æ¯”ä¾‹ å½¢æˆèŠ‚å¥|å…¨éŸ³ç¬¦ã€å››åˆ†éŸ³ç¬¦|
|éŸ³å¼º|éŸ³ç¬¦å‘å£°çš„å¼ºå¼±ç¨‹åº¦|å‘å£°ä½“æŒ¯åŠ¨å¹…åº¦|æƒ…æ„Ÿèµ·ä¼ åŠ¨æ€å˜åŒ–|æ¿€æ˜‚ç”¨å¼ºéŸ³ è½»æŸ” ç”¨å¼±éŸ³|
|éŸ³è‰²|éŸ³ç¬¦å£°éŸ³çš„ç‰¹è‰²|å‘å£°ä½“çš„æè´¨ã€ç»“æ„ã€å‘å£°æ–¹å¼ç­‰|èµ‹äºˆå£°éŸ³ç‹¬ç‰¹ä¸ªæ€§|é’¢ç´æ¸…è„†æ˜äº® äºŒèƒ¡æ‚ æ‰¬|

- è®¾ç½®å¥½ éŸ³è½¨çš„éŸ³è‰²ä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/192296/uid1190679-20250504-1746323381602) 

- æ¯ä¸ªéŸ³ç¬¦ éƒ½æœ‰è‡ªå·±çš„å››è¦ç´ 
	- éŸ³è‰²
	- éŸ³é«˜
	- æ—¶å€¼
	- éŸ³å¼º
- å¯ä»¥åˆ©ç”¨ éŸ³ç¬¦çš„ä¸‰è¦ç´  åšé¦–æ­Œå—ï¼Ÿï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹
