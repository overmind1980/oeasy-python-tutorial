---
show: step
version: 1.0
enable_checker: true
---

# åµŒå¥—è°ƒç”¨

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº†å‡½æ•°çš„ç¼“å­˜(cache)
	- æœ‰äº›å‡½æ•°åå¤è¿è¡Œ
	- å¦‚æœç®—æ³•ã€å‚æ•°éƒ½ä¸å˜çš„è¯
	- å¯ä»¥ç›´æ¥ä»ç¼“å­˜ä¸­å–å¾—è¿è¡Œç»“æœ
- æˆ‘ä»¬ç”¨çš„æ˜¯functoolsä¸­çš„lru_cache
	- lruæŒ‡çš„æ˜¯Least Frequently Used
	- æœ€ä¸å¸¸ç©¿çš„è¡£æœè¢«æ–°è¡£æœæ›¿æ¢æ‰
- ä¸è¿‡æŸ¥çœ‹æºä»£ç æˆ‘ä»¬å‘ç°
- å‡½æ•°é‡Œé¢è¿˜å¯ä»¥æœ‰å‡½æ•°ï¼Ÿï¼Ÿ
- è¿™æ€ä¹ˆç†è§£ï¼Ÿï¼Ÿ

### æ„é€ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958076167)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958085206)

- è¿è¡Œæ²¡æœ‰æŠ¥é”™
- ä½†æ˜¯å¦‚ä½•è°ƒç”¨innerå‘¢ï¼Ÿ

### å±‚æ¬¡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958266506)

- çº¢è‰²çš„æ˜¯ä¸»ç¨‹åº
	- outeræ˜¯ä¸»ç¨‹åºä¸­çš„å®šä¹‰(defined)çš„å‡½æ•°
	- ä¸»ç¨‹åºä¸­å¯è§
	- æ‰€ä»¥ç¬¬6è¡Œå¯ä»¥è°ƒç”¨
- ç»¿è‰²çš„æ˜¯å­å‡½æ•°outer
	- inneræ˜¯å­å‡½æ•°outerä¸­å®šä¹‰(define)çš„å‡½æ•°
	- outerå‡½æ•°å†…éƒ¨å¯è§
	- ç†è®ºä¸Šå¯ä»¥åœ¨outerå†…éƒ¨è°ƒç”¨

### æ±‡ç¼–ç†è§£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220821-1661072240118)

- innerå‡½æ•°æ˜¯outerå‡½æ•°çš„ä¸€ä¸ªå±€éƒ¨(local)å˜é‡

### è°ƒç”¨
- å¯ä»¥è°ƒç”¨innerè¿™ä¸ªå±€éƒ¨å‡½æ•°å˜é‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958624451)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958632952)

- è°ƒç”¨æˆåŠŸ
- é‚£ä¹ˆè¿™ä¸ªouterã€inneråˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

```
def outer():
    print("in outer()--0")
    def inner():
        print("in inner() --1")
    inner()

outer()
```

### æŸ¥çœ‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958748152)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958756762)

- ä»åœ°å€å¯çœ‹å‡ºç°æœ‰çš„inneråæœ‰çš„outer
- è€Œä¸”inneræ˜¯å‡½æ•°(function)outerçš„å±€éƒ¨å‡½æ•°(local)
- innerå’Œouteréƒ½èƒ½è®¿é—®åˆ°å…¨å±€(global)å˜é‡ä¹ˆï¼Ÿ

### ä½œç”¨åŸŸ(scope)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958960769)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958970414)

- ç¡®å®å¯ä»¥å…¨å±€(global)å˜é‡ä¹ˆï¼Ÿ
- å¿…é¡»å…¨å±€å¯è§
- innerèƒ½è®¿é—®åˆ°outerçš„å˜é‡ä¹ˆï¼Ÿ

### å¤–å±‚å‡½æ•°çš„å†…å±‚å¯è§æ€§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660959128902)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660959138890)

- é‚£outèƒ½è®¿é—®åˆ°innerä¸­çš„å±€éƒ¨å˜é‡ä¹ˆï¼Ÿ

### å†…å±‚å‡½æ•°çš„å¤–å±‚å¯è§æ€§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660959264849)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660959273265)

- innerä¸èƒ½è®¿é—®outerçš„å¯è§æ€§

### æ€»ç»“

- æˆ‘ä»¬è¿™æ¬¡å­¦ä¹ äº†åµŒå¥—çš„å‡½æ•°å®šä¹‰
	- åœ¨outeré‡Œé¢åˆå®šä¹‰äº†ä¸€ä¸ªå‡½æ•°inner
	- å¯ä»¥åœ¨outeré‡Œç”¨ç¨‹åºè°ƒç”¨inner

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220820-1660958266506)

- å˜é‡çš„ä½œç”¨åŸŸ(scope)æ˜¯è¿™æ ·çš„
	- çº¢è‰²åŒºåŸŸæ˜¯ä¸»ç¨‹åº
		- ä¸»ç¨‹åºä¸­å®šä¹‰çš„å˜é‡(åŒ…æ‹¬å‡½æ•°å˜é‡)
			- å…¨å±€(global)å¯è§
	- ç»¿è‰²åŒºåŸŸæ˜¯outerå‡½æ•°
		- outerå‡½æ•°ä¸­å®šä¹‰çš„å˜é‡(åŒ…æ‹¬å‡½æ•°å˜é‡)
			- outerå‡½æ•°çš„ç¨‹åº(åŒ…æ‹¬å­ç¨‹åºinnerä¸­)ä¸­å¯è§
			- ä¸»ç¨‹åºä¸­ä¸å¯è§
	- è“è‰²åŒºåŸŸæ˜¯outerå‡½æ•°å†…çš„innerå‡½æ•°
		- innerå‡½æ•°ä¸­å®šä¹‰çš„å˜é‡(åŒ…æ‹¬å‡½æ•°å˜é‡)
			- innerå‡½æ•°çš„ç¨‹åºä¸­å¯è§
			- outerå‡½æ•°çš„ç¨‹åºä¸å¯è§
			- ä¸»ç¨‹åºä¸­ä¸å¯è§
- è¿™ä¸ªåµŒå¥—å±‚æ¬¡å¯èƒ½æœ‰å¾ˆå¤šå¾ˆå¤šå±‚
- ç®€å•æ¥è¯´å°±æ˜¯
	- å¤–éƒ¨å®šä¹‰çš„å†…éƒ¨å¯è§
	- å†…éƒ¨å®šä¹‰çš„å¤–éƒ¨ä¸å¯è§
- å¦‚æœæˆ‘å°±æƒ³è®©å¤–éƒ¨çš„outç¨‹åºè®¿é—®innerå‡½æ•°é‡Œé¢å®šä¹‰çš„å˜é‡
- åº”è¯¥å¦‚ä½•å‘¢ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ğŸ‘‹



