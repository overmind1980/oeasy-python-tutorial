---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - æ·±æ‹·è´ deepcopy

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬äº†è§£äº†å¤šç»´æ•°ç»„çš„æ’åº
	- å¯ä»¥æŒ‰ç…§lambdaè¡¨è¾¾å¼æ’åº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/83390/uid1190679-20241108-1731035139233) 

- å¯è¿­ä»£å¯¹è±¡lst
	- å¯¹äºlstä¸­çš„ æ¯æ¬¡è¿­ä»£çš„x
	- æŒ‰ç…§str(x[1])æ’åº

```
sorted_list = sorted(students, key = lambda x:str(x[1]))
```

- å¤šç»´æ’åº æ¯” ä¸€ç»´ å¤æ‚
	- å¤šç»´çš„èµ‹å€¼ å’Œ ä¸€ç»´ç›¸æ¯” 
	- æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿï¼ŸğŸ¤”

### äººç‰©1å‡ºç°

```
l1 = ["oeasy",[165,70]]
```

- ä¸€ä¸ªå«åšoeasyçš„äºº
	- èº«é«˜165
	- ä½“é‡70

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/562231/uid1190679-20250115-1736930112184) 

- æƒ³æ‹¿è¿™ä¸ªæ•°æ®
	- å†å¤åˆ¶å‡ºä¸€ä¸ªäººæ¥

### åµŒå¥— embedded

```python3
l1 = ["oeasy",[165,70]]
l2 = l1
```

- è§‚å¯Ÿ ä¸¤ä¸ªåˆ—è¡¨
	- https://pythontutor.com/visualize.html#mode=edit

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701783341777)

- ç”¨åˆ—è¡¨ç›´æ¥èµ‹å€¼
	- å¯ä»¥ ä¿®æ”¹ åˆ—è¡¨é¡¹çš„å€¼ å—ï¼Ÿ

### ç´¢å¼•åµŒå¥—å…ƒç´ 

```python3
l1 = ["oeasy",[165,70]]
l2 = l1
l1[0] = "o2z"
print(l2)
l2[0] = "o3z"
print(l1)
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/562231/uid1190679-20250115-1736927240250) 

- è¿™ä¸¤ä¸ªåˆ—è¡¨ä¸­çš„ 
	- ç¬¬0ä¸ªåˆ—è¡¨é¡¹
	- å¼•ç”¨ åŒä¸€ä¸ªä½ç½® 
	- ä¸€æ”¹å…¨æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701783726639)

- ä¸æƒ³ ä¸€æ”¹å…¨æ”¹
	- å¯ä»¥åˆ†åˆ«ä¿®æ”¹å—ï¼Ÿï¼Ÿï¼ŸğŸ¤”

### copy()

- ä½¿ç”¨copyæ–¹æ³•

```
l1 = ["oeasy",[165,70]]
l2 = l1.copy()
l1[0] = "o2z"
print(l2)
l2[0] = "o3z"
print(l1)
```

- ä¸¤ä¸ªåˆ—è¡¨
	- ç¡®å® å¼•ç”¨ä¸åŒåœ°å€äº†
	- èƒ½å¤Ÿ ç‹¬ç«‹ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701784441172)

- ä½†æ˜¯ èº«é«˜ã€ä½“é‡ 
	- çœ‹èµ·æ¥ è¿˜æ˜¯ å¼•ç”¨åŒä¸€ä¸ªåœ°å€
- ä¼šæœ‰ä»€ä¹ˆåæœå—ï¼Ÿ

### å¤šç»´åˆ—è¡¨

- æ‹·è´ åªèƒ½ è®© 
	- åˆ—è¡¨ä¸­ çš„ ç›´æ¥åˆ—è¡¨é¡¹
	- æ‰¾åœ°å€ é‡æ–° æ„å»º

```
l1 = ["oeasy",[165,70]]
l2 = l1.copy()
l1[1][0] = 190
print(l2)
l2[1][1] = 180
print(l1)
```

- åˆ—è¡¨ä¸­çš„ åˆ—è¡¨
	- å¼•ç”¨çš„ è¿˜æ˜¯ `åŒ`ä¸€ä¸ªåœ°å€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/562231/uid1190679-20250115-1736927448907)

- ä¸€æ”¹å…¨æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/562231/uid1190679-20250115-1736927484917) 

- è¿™ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ

### é—®é¢˜

- åˆ—è¡¨ä¸­çš„åˆ—è¡¨ä¸€æ”¹å…¨æ”¹
	- åå­—å¯ä»¥ä¸åŒ 
	- èº«é«˜ä½“é‡éƒ½ç›¸åŒ

```
l1 = ["oeasy",[165,70]]
l2 = l1.copy()
l1[1].append(20)
print(l2)
l2[1].remove(70)
print(l1)
```

- æ·±å¤„çš„åˆ—è¡¨ æ ¹æœ¬åˆ†ä¸å¼€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/562231/uid1190679-20250115-1736927768515) 

- ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Ÿ

### id

- ä¸è®ºæ˜¯l1è¿˜æ˜¯l2
	- ç¬¬2ä¸ªåˆ—è¡¨é¡¹ éƒ½æ˜¯åˆ—è¡¨åœ°å€
	- è¿™ä¸¤ä¸ªåˆ—è¡¨ å¼•ç”¨çš„æ˜¯ åŒä¸€å—åœ°å€

```
l1 = ["oeasy",[165,70]]
l2 = l1.copy()
l1[1].append(20)
print(id(l2[1]))
l2[1].remove(70)
print(id(l1[1]))
```

- è§‚å¯Ÿåœ°å€ç¡®å®æ˜¯ä¸€ä¸ªä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701784964511)

- æƒ³è¦ æ¯ä¸ªäºº æœ‰è‡ªå·±çš„ èº«é«˜ä½“é‡
	- å¯ä»¥å—ï¼Ÿ

### é€ä¸ªæ’å…¥

- éå†l1ä¸­æ‰€æœ‰å…ƒç´ 
	- å¦‚æœä¸æ˜¯åˆ—è¡¨ 
		- å°±ç›´æ¥è¿½åŠ appendåˆ°æ–°åˆ—è¡¨
	- å¦‚æœæ˜¯åˆ—è¡¨
		- å°±è¿½åŠ å…ƒç´ çš„æ‹·è´copyåˆ°æ–°åˆ—è¡¨

```
l1 = ["oeasy",[165,70]]
l2 = []
for item in l1:
    if type(item) != list:
        l2.append(item)
    if type(item) == list:
        l2.append(item.copy())
l1[1].append(20)
print(id(l2[1]))
l2[1].remove(70)
print(id(l1[1]))
```

- ç»“æœ
	- ç¡®å®å¯ä»¥å½»åº•åˆ†å¼€åˆ†å¼€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701785653867)


- ä¸è¿‡ è¿™ä¹Ÿä»…é™äºäºŒç»´åˆ—è¡¨
	- ä¸‰ç»´åˆ—è¡¨ ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### ä¸‰ç»´åˆ—è¡¨

```
l1 = [["oeasy",[165,70]],["o2z",[170,100]]]
l2 = []
for item in l1:
    if type(item) != list:
        l2.append(item)
    if type(item) == list:
        l2.append(item.copy())
l1[0][1][0] = 150
```

- ç›´æ¥éå†è§£ å†³ä¸äº†
	- å¾€ä¸‹ä¸¤å±‚ çš„é—®é¢˜

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231205-1701785949757)

- è¿˜éœ€è¦ 
	- æ›´æ·±å±‚æ¬¡çš„éå†

### copy å‡½æ•°

```
help(list.copy)
```

- æŸ¥è¯¢ä¸€ä¸‹listç±»çš„æ‹·è´å‡½æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630210731635)

- è¿”å›åˆ—è¡¨çš„æµ…æ‹·è´
	- shallow copy(æµ…æ‹·è´)æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
		- è¿˜ä¸æ¸…æ¥š
		- éš¾é“è¿˜æœ‰æ·±æ‹·è´ä¸æˆï¼Ÿ

### æ€»ç»“

- èµ‹å€¼çš„æ—¶å€™æ³¨æ„æœ‰ä¸¤ç§æƒ…å†µ
  - = 
	- ç›´æ¥å¤åˆ¶å˜é‡å¼•ç”¨çš„åœ°å€
  - æ‹·è´ copy
	- æ–°å»ºåˆ—è¡¨
	- å¤åˆ¶åˆ—è¡¨é¡¹çš„å¼•ç”¨åœ°å€	
	- ä½†å¦‚æœåˆ—è¡¨é¡¹ æ˜¯åˆ—è¡¨
		- å°±åŸæ ·å¤åˆ¶åœ°å€
		- å¼•ç”¨åŒä¸€ä¸ªä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669730371125)

- æƒ³åš çœŸæ­£äº’ä¸å½±å“çš„copyå‰¯æœ¬
	- æ— è®ºåˆ—è¡¨ç»´åº¦å¦‚ä½•
	- éƒ½ä¸äº’ç›¸å½±å“
- å¯èƒ½å—ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹