---
show: step
version: 1.0
enable_checker: true
---

# æ‰“åŒ…å’Œè§£åŒ…

## å›å¿†ä¸Šæ¬¡å†…å®¹

- ä¸‹æ­»åŠŸå¤« æœ‰çš„æ—¶å€™æœªå¿…æœ‰æ•ˆ
- åŠŸå¤«åœ¨è¯—å¤–
	- é€†å‘æ€ç»´ å¦è¾Ÿè¹Šå¾„
	- è¯´ä¸å®šåè€Œèƒ½å¤Ÿæ‰¾åˆ°å‡ºè·¯
	- ä¸è¦é™·åœ¨æ¸¸æˆé‡Œ
	- è·³å‡ºæ¸¸æˆ åˆ©ç”¨è§„åˆ™
	- è·³å‡ºè§„åˆ™ åˆ›é€ æ–°è§„åˆ™
	- éƒ½æ˜¯å»ºç«‹åœ¨å¤šæ€è€ƒ å¤šè§‚å¯Ÿçš„åŸºç¡€ä¸Šçš„
- ä¸è¦å®³æ€•å†’é™©
	- ä½†æ›´åº”è¯¥çœ‹æ¸…å½¢åŠ¿
	- è¿­ä»£å‡ºè‡ªå·±çš„è§„åˆ™
	- æ‰¾åˆ°å‡ºè·¯

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210819-1629361652686)

- è¿™å°±æ˜¯æˆ‘ç†è§£çš„éšæœºçš„ä¹è¶£
- python è¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„å‘¢ï¼ŸğŸ¤ª

### struct

- é¦–å…ˆæ˜¯ è¦è·å¾—ä»0åˆ°127çš„ å­—èŠ‚çŠ¶æ€
	- éœ€è¦ ä½¿ç”¨structåŒ…
		- åŒ…(module) å°±æ˜¯æ¨¡å—
		- å¯¼å…¥äº† å°±èƒ½ç”¨ æ¨¡å—ä¸­çš„åŠŸèƒ½
	- å¯¼å…¥structåŒ…
		- import struct

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230329-1680095963896)

- å¯¼å…¥ä¹‹å
	- å°±å¯ä»¥ help(struct) æŸ¥è¯¢å¸®åŠ©

### struct å¸®åŠ©æ‰‹å†Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221005-1664939119845)

- struct æ˜¯ ç»“æ„çš„æ„æ€
	- æŒ‡çš„æ˜¯ å¸¸ç”¨ç±»å‹çš„ å­˜å‚¨ç»“æ„
	- è¿™ä¸ªstruct æ€ä¹ˆç”¨å‘¢ï¼Ÿ

### pack

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220924-1664026684316)

- æŠŠæ•°å­— å˜æˆ å­—èŠ‚çš„å½¢æ€
	- æŠŠord("a") å¯¹åº”çš„æ•°å­—
		- 0x61 æˆ–è€…è¯´ 97
			- å˜æˆ å­—èŠ‚çš„å½¢æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230116-1673846747998)

- é€—å·å‰çš„ "b"
	- æŒ‡çš„æ˜¯å­—èŠ‚(byte)
- é€—å·åçš„ ord("a") 
	- æŒ‡çš„æ˜¯ å­—ç¬¦açš„åºå·
	- å¦‚æœæ˜¯"s"çš„å­—èŠ‚å½¢æ€å‘¢ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230329-1680096146324)

- å­—ç¬¦sçš„å­—èŠ‚å½¢æ€
	- ä¸º b's'
- è¿™æ · å­—ç¬¦ å°±æˆäº† å­—èŠ‚äº†å—ï¼Ÿ

### å­—èŠ‚è¡¨ç¤ºæ³•

- æ³¨æ„ ç»†èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230116-1673846747998)

- æ³¨æ„"a"å‰é¢ è¿˜æœ‰ä¸€ä¸ªb
	- "a"æ˜¯å­—ç¬¦ 
	- b"a" æ˜¯å­—èŠ‚ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221120-1668918810324)

- è¿™ä¸¤`ç±»å‹` å®Œå…¨ä¸åŒ
- å­—èŠ‚b"a" æ˜¯ ä»€ä¹ˆå‘¢ï¼Ÿ

### å­—èŠ‚å½¢æ€

- å­—èŠ‚çŠ¶æ€ å¯ä»¥ç”¨ 2ä¸ª16è¿›åˆ¶æ•° æ¥è¡¨ç¤º
	- b"a"	
		- ç›¸å½“äºb"\x61"
- å…¶å® ord("a") å°±æ˜¯ 97
	- ä¹Ÿå°±æ˜¯ 0x61
- 0x61 å°±æ˜¯ å­—ç¬¦a çš„ å­—èŠ‚å½¢æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221013-1665649794369)

- b"a" å’Œ b"\x61" æ˜¯ `åŒæ ·`çš„
	- å°±æ˜¯å­—ç¬¦"a"çš„ å­—èŠ‚å½¢æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221013-1665649899181)

- ä¸ºäº†çœ‹èµ·æ¥æ¸…æ¥šæ˜ç¡®
	- æŠŠb"\x61" è¡¨ç¤ºä¸ºb"a"
		- è¿™æ · ä¹Ÿå°±ç›´æ¥ çœ‹åˆ°äº†å­—ç¬¦ğŸ˜‚
- å¦‚ä½•ç†è§£struct.packå‘¢ï¼Ÿ

### å°åŒ…pack

- æŠŠä¸œè¥¿ å°è¿› è§„å®šçš„ å°è£…
	- æŠŠå­—ç¬¦açš„åºå· å°è¿› å­—èŠ‚å½¢å¼çš„ å°è£…

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221005-1664939686827)

- æŠŠæ•°å­—97 å°è¿› å­—èŠ‚å½¢å¼çš„ å°è£…
	- è§‚å¯Ÿä»–çš„å­—èŠ‚çŠ¶æ€
- å…ˆé€€å‡ºpython3 æ¸¸ä¹åœº

### éå†

- é”®å…¥vi show.py
	- "*p 
		- å°†ç³»ç»Ÿå‰ªè´´æ¿ä¸Šçš„å†…å®¹
		- ç²˜è´´ä¸Šå»

```
import struct
for n in range(0,128):
    b = struct.pack("b",n)
    print(b,end=",")
```

- æŠŠä»0-127çš„æ•°å­—éƒ½å°åˆ°å­—èŠ‚é‡Œé¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220911-1662890803376)

- æŠŠæ•°å­— è½¬åŒ–æˆ å­—èŠ‚çŠ¶æ€ å
	- å¯ä»¥ å†æŠŠå­—èŠ‚ `è§£ç `å—ï¼Ÿ
		- æˆ–è€…è¯´`è§£å°`å—ï¼Ÿ

### éå†ç»“æœ

- å¥½å¤šå­—èŠ‚å‘€~ğŸ˜„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220911-1662890871479)

- ä»å­—èŠ‚çŠ¶æ€å¯ä»¥çœ‹åˆ°å·²ç»æœ‰
	- æ•°å­— 0ã€1ã€2
		- è¿™é‡Œå¾ˆæ˜æ˜¾èƒ½çœ‹åˆ°0
		- è¿˜æœ‰0å‰é¢ çš„ ä¸€å †ç¬¦å·
		- é»‘æš—æ£®æ—é‡Œçš„å­—ç¬¦ è‹¥éšè‹¥ç°
	- å¤§å†™ Aã€Bã€C
	- å°å†™ aã€bã€c
	- éƒ½å¯ä»¥æœ‰
- å…ˆåŠ ä¸Š æ¢è¡Œ

### æ¢è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220911-1662891263863)

- ä»0æ•°åˆ°7
	- æ¢1è¡Œ
	- å†ä»0æ•°åˆ°7

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220911-1662891272463)

- éšçº¦çœ‹åˆ°äº† asciiç çš„ç»“æ„
	- æˆ‘ä¸æƒ³çœ‹ `å­—èŠ‚`çŠ¶æ€ å‘¢
		- æˆ‘æƒ³çœ‹ `å­—ç¬¦`çŠ¶æ€
- éœ€è¦å¯¹å­—èŠ‚çŠ¶æ€è§£ç (decode)
	- æˆ–è€…è¯´æ˜¯è§£åŒ…
		- struct.unpack

### è§£åŒ…

- è¿™åˆæ˜¯ä¸€åœˆ
	- pack
	- unpack
- å°±åƒ
	- encode
	- decode

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221005-1664939759175)

- è§£åŒ…å‡ºæ¥ æ˜¯ åºå·
	- å…ˆæŠŠ0-127çš„æ•°å­— éƒ½å˜æˆ å­—èŠ‚å½¢æ€

### å°åŒ…å†è§£åŒ…

```
import struct
for n in range(0,127):
    b = struct.pack("b",n)
    c = struct.unpack("b",b)[0]
    print(chr(c),end="")
    if n % 16 == 0:
        print()
```

- æ£®æ— ä¾ç„¶ é»‘æš—
	- å­—ç¬¦0 ä¾ç„¶ æ²¡æœ‰æ¶ˆæ¯
	- è¿™çœŸå¯æ€•ï¼ğŸ˜±

### æ£®æ—æ·±å¤„

- åœ¨ç¬¬ä¸€å‡ºç°çš„
	- \rã€\nã€\t
	- æˆ‘ä»¬éƒ½å·²ç»äº†è§£äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230329-1680100020871)

- è§£åŒ…å°åŒ…å’Œç¼–ç è§£ç æœ‰å•¥ä¸ä¸€æ ·å—ï¼Ÿ

### è§£åŒ…å°åŒ… ä¸ ç¼–è§£ç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230331-1680226737836)

- å›å¿†ç¼–ç è§£ç 
	- ä¸€ä¸ªå­—ç¬¦å¯ä»¥ç¼–ç æˆå­—èŠ‚
	- ä¸€ä¸ªå­—èŠ‚ä¹Ÿå¯ä»¥è§£ç æˆå­—ç¬¦
	- ä½†æ˜¯åªèƒ½å¯¹äºå­—ç¬¦è¿›è¡Œæ“ä½œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230331-1680227535840)

- å›å¿†å°åŒ…è§£åŒ…
	- ä¸€ä¸ªæ•°å­—å¯ä»¥å°åŒ…åˆ°ä¸€ç§æ•°å­—æ ¼å¼
		- æ•°å­—æ ¼å¼å¯ä»¥åŒ…æ‹¬
			- å•å­—èŠ‚
			- åŒå­—èŠ‚
			- å››å­—èŠ‚
			- å…«å­—èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230331-1680227027610)

- å…ˆæ€»ç»“ä¸€ä¸‹

### æ€»ç»“

- structåŒ…
	- å°±æ˜¯ å°åŒ…æ ¼å¼
	- å¯ä»¥æŠŠæ•°å­— å°åŒ…åˆ° å­—èŠ‚é‡Œ
		- packå‡½æ•° è´Ÿè´£ å°åŒ…
		- unpackå‡½æ•° è´Ÿè´£ è§£åŒ…
- struct.pack/struct.unpack 
	- æ˜¯é’ˆå¯¹ æ•°å­— çš„ç¼–è§£ç æ“ä½œ
- str.encode/str.decode
	- æ˜¯é’ˆå¯¹å­—ç¬¦çš„ç¼–è§£ç æ“ä½œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230331-1680227645468)

- ä¸‹æ¬¡ç©ç‚¹ä»€ä¹ˆå‘¢ï¼ŸğŸ‘Š
- ä¸‹æ¬¡å†è¯´ğŸ‘‹ğŸ»