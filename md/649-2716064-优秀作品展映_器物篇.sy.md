---
show: step
version: 1.0 
enable_checker: true
---


# python_blender

## å¼€å§‹

- ä¸Šæ¬¡é€šè¿‡pythonè®¾ç½®äº†èˆå°åŸºæœ¬è¦ç´ 
	- ç¯å…‰
	- ç‰©ä½“
	- æ‘„åƒæœº
- å¹¶ä¸”å°†ç»“æœæ¸²æŸ“ä¸ºä¸€å¼ png
- æœ‰ä»€ä¹ˆä¼˜ç§€ä½œå“å¯ä»¥çœ‹ä¸€ä¸‹å—??ğŸ¤”

### èŒ¶å£¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240616-1718534770660)

```
import bpy

# åˆ é™¤æ‰€æœ‰å¯¹è±¡
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

# åˆ›å»ºèŒ¶å£¶ä¸»ä½“
bpy.ops.mesh.primitive_uv_sphere_add(segments=32, ring_count=16, radius=1, location=(0, 0, 1.5))
body = bpy.context.object
body.name = 'Teapot_Body'

# åˆ›å»ºèŒ¶å£¶ç›–
bpy.ops.mesh.primitive_uv_sphere_add(segments=32, ring_count=16, radius=0.8, location=(0, 0, 2.5))
lid = bpy.context.object
lid.name = 'Teapot_Lid'

# å°†ç›–å­å’Œä¸»ä½“åˆ†ç¦»
bpy.ops.object.select_all(action='DESELECT')
lid.select_set(True)
bpy.context.view_layer.objects.active = lid
bpy.ops.object.mode_set(mode='EDIT')
bpy.ops.mesh.select_all(action='DESELECT')
bpy.ops.object.mode_set(mode='OBJECT')
lid.data.polygons[0].select = True
bpy.ops.object.mode_set(mode='EDIT')
bpy.ops.mesh.separate(type='SELECTED')
bpy.ops.object.mode_set(mode='OBJECT')

# åˆ›å»ºå£¶å˜´
bpy.ops.mesh.primitive_cylinder_add(vertices=32, radius=0.1, depth=2, location=(1.2, 0, 1.8))
spout = bpy.context.object
spout.name = 'Teapot_Spout'
spout.rotation_euler[1] = 0.785398  # 45 degrees in radians

# åˆ›å»ºå£¶æŠŠ
bpy.ops.mesh.primitive_torus_add(major_radius=1, minor_radius=0.1, location=(-1.2, 0, 1.8))
handle = bpy.context.object
handle.name = 'Teapot_Handle'
handle.rotation_euler[0] = 1.5708  # 90 degrees in radians
handle.scale[2] = 1.5

# åˆå¹¶æ‰€æœ‰éƒ¨åˆ†
bpy.ops.object.select_all(action='DESELECT')
body.select_set(True)
lid.select_set(True)
spout.select_set(True)
handle.select_set(True)
bpy.context.view_layer.objects.active = body
bpy.ops.object.join()

# æ·»åŠ æè´¨
mat_body = bpy.data.materials.new(name="Teapot_Body_Material")
mat_body.diffuse_color = (0.8, 0.4, 0.2, 1.0)  # RGB with alpha

mat_lid = bpy.data.materials.new(name="Teapot_Lid_Material")
mat_lid.diffuse_color = (0.2, 0.4, 0.8, 1.0)  # RGB with alpha

mat_spout = bpy.data.materials.new(name="Teapot_Spout_Material")
mat_spout.diffuse_color = (0.4, 0.8, 0.2, 1.0)  # RGB with alpha

mat_handle = bpy.data.materials.new(name="Teapot_Handle_Material")
mat_handle.diffuse_color = (0.8, 0.8, 0.2, 1.0)  # RGB with alpha

# å°†æè´¨åˆ†é…ç»™å¯¹è±¡
for obj in bpy.context.selected_objects:
    if obj.name == 'Teapot_Body':
        obj.data.materials.append(mat_body)
    elif obj.name == 'Teapot_Lid':
        obj.data.materials.append(mat_lid)
    elif obj.name == 'Teapot_Spout':
        obj.data.materials.append(mat_spout)
    elif obj.name == 'Teapot_Handle':
        obj.data.materials.append(mat_handle)

# è®¾ç½®æ—‹è½¬åŠ¨ç”»
bpy.context.scene.frame_start = 1
bpy.context.scene.frame_end = 250

# åˆ›å»ºæ—‹è½¬åŠ¨ç”»å…³é”®å¸§
body.animation_data_create()
body.animation_data.action = bpy.data.actions.new(name="RotateAction")

fcurves = body.animation_data.action.fcurves
data_path = "rotation_euler"
for i in range(3):
    fcurve = fcurves.new(data_path=data_path, index=i)
    kf = fcurve.keyframe_points
    kf.add(2)

kf = fcurves[2].keyframe_points
kf[0].co = 1, 0  # Frame 1, Rotation 0
kf[1].co = 250, 6.28319  # Frame 250, Rotation 360 degrees (2*PI)

# è®¾ç½®æ’å€¼æ¨¡å¼ä¸ºçº¿æ€§
for fcurve in fcurves:
    for kf in fcurve.keyframe_points:
        kf.interpolation = 'LINEAR'

# åˆ›å»ºèšå…‰ç¯
bpy.ops.object.light_add(type='SPOT', radius=1, location=(5, -5, 5))
spotlight = bpy.context.object
spotlight.data.energy = 500
spotlight.data.spot_size = 0.785398  # 45 degrees in radians

bpy.ops.object.light_add(type='SPOT', radius=1, location=(-5, 5, 5))
spotlight2 = bpy.context.object
spotlight2.data.energy = 500
spotlight2.data.spot_size = 0.785398  # 45 degrees in radians

# åˆ›å»ºæ‘„åƒæœº
bpy.ops.object.camera_add(location=(7, -7, 7))
camera = bpy.context.object
camera.rotation_euler = (1.1, 0, 0.785398)  # 63 degrees in radians on X and 45 degrees on Z

# è®¾ç½®æ‘„åƒæœºä¸ºæ´»åŠ¨æ‘„åƒæœº
bpy.context.scene.camera = camera

print("Tea pot created successfully with materials, rotation, lights, and camera setup!")

bpy.context.scene.camera = camera
bpy.ops.object.light_add(type='SPOT', radius=2, location=(-2, 0, 10))
bpy.context.object.data.energy = 1000
bpy.context.object.location = (6.27,-3.4,6.83)
bpy.context.object.rotation_euler = (1.172,0,0.907)
bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
bpy.context.scene.render.resolution_percentage = 50

# Set the render engine (e.g., CYCLES, BLENDER_EEVEE)
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.render.filepath = '/tmp/der2.png'
# Render the current view
bpy.ops.render.render(write_still=True)
```

### èŠ±æœµ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240619-1718804009177)

```
import bpy
import math
import colorsys

# åˆ é™¤é»˜è®¤çš„åœºæ™¯å†…å®¹
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()

# åˆ›å»ºèŠ±çš„ä¸­å¿ƒ
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.5, location=(0, 0, 0))
center = bpy.context.object
center.name = "flower_center"

# åˆ›å»ºä¸€ä¸ªé»„è‰²çš„ææ–™ï¼ˆèŠ±å¿ƒï¼‰
yellow_material = bpy.data.materials.new(name="Yellow")
yellow_material.diffuse_color = (1, 1, 0, 1)  # RGBA: é»„è‰²
center.data.materials.append(yellow_material)

# åˆ›å»ºèŠ±ç“£å¹¶æ‘†æ”¾æˆèŠ±æœµå½¢çŠ¶
num_petals = 8
angle_step = 360 / num_petals
petal_radius = 0.3

for i in range(num_petals):
    angle = math.radians(i * angle_step)
    x = math.cos(angle) * 1.5
    y = math.sin(angle) * 1.5
    
    # åˆ›å»ºä¸€ä¸ªèŠ±ç“£
    bpy.ops.mesh.primitive_uv_sphere_add(radius=petal_radius, location=(x, y, 0))
    petal = bpy.context.object
    petal.name = f"petal_{i+1}"
    
    # è®¾å®šèŠ±ç“£å½¢çŠ¶
    petal.scale[0] = 4
    petal.scale[1] = 1
    petal.scale[2] = 0.2
    
    # å°†èŠ±ç“£æ—‹è½¬åˆ°åˆé€‚çš„ä½ç½®
    petal.rotation_euler = (3, 0, angle)
    
    # è®¾ç½®èŠ±ç“£çš„çˆ¶å¯¹è±¡ä¸ºèŠ±çš„ä¸­å¿ƒ
    petal.parent = center
    
    # åˆ›å»ºç²‰è‰²æ¸å˜æè´¨
    hue = 0.95  # ç²‰è‰²ç³»çš„è‰²ç›¸ï¼ˆHå€¼ï¼‰
    saturation = 0.6 + (i / num_petals) * 0.4  # ä»0.6åˆ°1çš„æ¸å˜
    value = 1  # ä¿æŒæœ€å¤§äº®åº¦
    r, g, b = colorsys.hsv_to_rgb(hue, saturation, value)
    
    petal_material = bpy.data.materials.new(name=f"Petal_{i+1}")
    petal_material.diffuse_color = (r, g, b, 1)  # RGBA
    
    # å°†æè´¨åº”ç”¨åˆ°èŠ±ç“£ä¸Š
    petal.data.materials.append(petal_material)

# åˆ›å»ºèšå…‰ç¯å¹¶è°ƒæ•´å…¶å±æ€§
bpy.ops.object.light_add(type='SPOT', radius=1.0, location=(0, 0, 3))
spot_light = bpy.context.object
spot_light.name = "SpotLight"
spot_light.data.energy = 200.0  # è®¾ç½®å…‰æºå¼ºåº¦
spot_light.data.spot_size = math.radians(60)  # èšå…‰ç¯çš„è§’åº¦
spot_light.data.spot_blend = 0.2  # èšå…‰ç¯çš„è½¯åŒ–ç¨‹åº¦
spot_light.rotation_euler = (math.radians(0), 0, 0)  # è°ƒæ•´å…‰æºè§’åº¦

# åˆ›å»ºæ‘„åƒæœºå¹¶ç§»åŠ¨åˆ°è¿œä¸€ç‚¹çš„ä½ç½®
bpy.ops.object.camera_add(location=(4, -6, 3))
camera = bpy.context.object
camera.name = "Camera"
camera.rotation_euler = (math.radians(60), 0, math.radians(45))

# è®¾ç½®æ¸²æŸ“è®¾ç½®
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.cycles.device = 'GPU'  # å¦‚æœæœ‰GPUå¯ç”¨çš„è¯
bpy.context.scene.render.resolution_x = 1920
bpy.context.scene.render.resolution_y = 1080
bpy.context.scene.render.filepath = '/path/to/save/render.png'

# è®¾ç½®åœºæ™¯çš„æ‘„åƒæœº
bpy.context.scene.camera = camera

# æ¸²æŸ“å›¾åƒ
bpy.ops.render.render(write_still=True)

```

### ç›†æ ½

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240616-1718530802703)

- ç›†æ ½

```
import bpy
import math

# åˆ é™¤æ‰€æœ‰å¯¹è±¡
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

# åˆ›å»ºåŸºç¡€åœ†æŸ±ä½“
bpy.ops.mesh.primitive_cylinder_add(vertices=32, radius=1, depth=1.5, location=(0, 0, 0))
pot = bpy.context.active_object
pot.name = "Flower_Pot"

# ç¼–è¾‘æ¨¡å¼ä¸‹æŒ¤å‡ºå’Œç¼©æ”¾ä»¥åˆ›å»ºèŠ±ç›†å½¢çŠ¶
bpy.ops.object.mode_set(mode='EDIT')
bpy.ops.transform.translate(value=(0, 0, 0.8))  # ç§»åŠ¨åˆ°æ­£ç¡®çš„ä½ç½®
bpy.ops.mesh.extrude_region_move(TRANSFORM_OT_translate={"value":(0, 0, 0.7)})  # å‘ä¸‹æŒ¤å‡º
bpy.ops.transform.resize(value=(1.2, 1.2, 0.3))  # ç¼©å°åº•éƒ¨
bpy.ops.object.mode_set(mode='OBJECT')


# åˆ›å»ºèŠ±ç›†çš„é¢œè‰²æè´¨
pot_material = bpy.data.materials.new(name="Pot_Material")
pot_material.diffuse_color = (0.6, 0.3, 0.1, 1)  
pot.data.materials.append(pot_material)



# åˆ›å»ºä¸€ä¸ªèŠ±èŒï¼ˆåœ†æŸ±ä½“ï¼‰
bpy.ops.mesh.primitive_cylinder_add(vertices=32, radius=0.2, depth=2, location=(0, 0, 2.5))
stem = bpy.context.active_object
stem.name = "Flower_stem"

#color
mat = bpy.data.materials.new('mat_tree')
color = (0.8, 0.2, 0.1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# åˆ›å»ºåœ†æŸ±ä½“
bpy.ops.mesh.primitive_cylinder_add(vertices=32, radius=0.1, depth=0.7, location=(0, -0.2, 2.5))
cylinder = bpy.context.active_object
cylinder.name = "Slanted_cylinder"

#color
mat = bpy.data.materials.new('mat_tree')
color = (0.6, 0.3, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# è®¾ç½®åœ†æŸ±ä½“çš„æ—‹è½¬è§’åº¦ï¼ˆä»¥å¼§åº¦ä¸ºå•ä½ï¼‰
# æ¬§æ‹‰è§’ä½¿ç”¨é¡ºåºä¸º X-Y-Z (pitch-roll-yaw)
rotation_angle_x = math.radians(45)  # åœ¨Xè½´æ–¹å‘ä¸Šæ—‹è½¬45åº¦

# è®¾ç½®æ—‹è½¬è§’åº¦
cylinder.rotation_euler = (rotation_angle_x, 0, 0)

# åˆ›å»ºåœ†æŸ±ä½“2
bpy.ops.mesh.primitive_cylinder_add(vertices=32, radius=0.1, depth=0.7, location=(0, 0.4, 2.8))
cylinder = bpy.context.active_object
cylinder.name = "Slanted_cylinder2"

#color
mat = bpy.data.materials.new('mat_tree')
color = (0.6, 0.3, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# è®¾ç½®åœ†æŸ±ä½“çš„æ—‹è½¬è§’åº¦ï¼ˆä»¥å¼§åº¦ä¸ºå•ä½ï¼‰
# æ¬§æ‹‰è§’ä½¿ç”¨é¡ºåºä¸º X-Y-Z (pitch-roll-yaw)
rotation_angle_x = math.radians(-45)  # åœ¨Xè½´æ–¹å‘ä¸Šæ—‹è½¬45åº¦

# è®¾ç½®æ—‹è½¬è§’åº¦
cylinder.rotation_euler = (rotation_angle_x, 0, 0)

# æ·»åŠ ç®€å•å˜å½¢ä¿®æ”¹å™¨ä»¥å¼¯æ›²èŠ±èŒ
bend_modifier = stem.modifiers.new(name="SimpleDeform", type='SIMPLE_DEFORM')
bend_modifier.deform_method = 'BEND'
bend_modifier.angle = math.radians(20)  # ä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´å¼¯æ›²è§’åº¦
bend_modifier.origin = bpy.context.object


# æ›´æ–°è§†å›¾ä»¥åº”ç”¨ä¿®æ”¹
bpy.context.view_layer.update()


# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.7, location=(0, 0.1, 3.8))
mat = bpy.data.materials.new('mat_tree')
color = (0.2, 1, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)


# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.6, location=(0, 0.1, 4.3))
mat = bpy.data.materials.new('mat_tree')
color = (0.5, 1, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.5, location=(0, 0.1, 4.8))
mat = bpy.data.materials.new('mat_tree')
color = (0, 1, 0.5, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.38, location=(0, -0.5, 2.8))
mat = bpy.data.materials.new('mat_tree')
color = (0, 1, 0.7, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.26, location=(0, 0.7, 3.1))
mat = bpy.data.materials.new('mat_tree')
color = (0.2, 1.2, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)


# åˆ›å»ºçƒä½“
bpy.ops.mesh.primitive_uv_sphere_add(radius=0.2, location=(0, 0.82, 3.2))
mat = bpy.data.materials.new('mat_tree')
color = (0.2, 1, 0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)


#camera
camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera.lens = 50  # Focal length in millimeters
camera.sensor_width = 36  # Sensor width in millimeters
camera.sensor_height = 24  # Sensor height in millimeters
camera_obj.location = (10.787, 0.34901, 10.312)  # X, Y, Z coordinates
camera_obj.rotation_euler = (53.2*0.0174444444,0*0.0174444444,90*0.0174444444)

#æ¸²æŸ“ï¼Ÿ
bpy.context.scene.camera = camera_obj
bpy.ops.object.light_add(type='SPOT', radius=1)
bpy.context.object.data.energy = 1000
bpy.context.object.location = (6.27,-3.4,5.33)
bpy.context.object.rotation_euler = (1.172,0,0.907)
bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
bpy.context.scene.render.resolution_percentage = 50


# Set the render engine (e.g., CYCLES, BLENDER_EEVEE)
bpy.context.scene.render.engine = 'CYCLES'
# Set the output file path
bpy.context.scene.render.filepath = './render2.png'
# Render the current view
bpy.ops.render.render(write_still=True)
```

### å¤§æ ‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240619-1718794878824)

```
import bpy

# æ¸…ç©ºåœºæ™¯
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete()

# å®šä¹‰åœ£è¯æ ‘çš„å±‚æ•°å’Œå‚æ•°
num_layers = 3
layer_height = 1.3  # æ¯å±‚çš„é«˜åº¦
base_radius = 0.2  # åº•éƒ¨åœ†æŸ±ä½“çš„åŠå¾„

tree = bpy.data.objects.new("tree", None)
bpy.data.collections["Collection"].objects.link(tree)
# åˆ›å»ºåœ£è¯æ ‘çš„ä¸»å¹²ï¼ˆåœ†æŸ±ä½“ï¼‰
bpy.ops.mesh.primitive_cylinder_add(radius=base_radius, depth=num_layers * layer_height, location=(0, 0, 0))
trunk = bpy.context.object
trunk.parent = tree

# åˆ›å»ºåœ£è¯æ ‘çš„ç¬¬ä¸€å±‚æ ‘å† ï¼ˆåœ†å°ï¼‰
bottom_radius1 = 1.2  # ç¬¬ä¸€å±‚åº•éƒ¨åœ†å°çš„åº•åŠå¾„
top_radius1 = 0.3  # ç¬¬ä¸€å±‚åº•éƒ¨åœ†å°çš„é¡¶åŠå¾„
height1 = 1.0  # ç¬¬ä¸€å±‚åº•éƒ¨åœ†å°çš„é«˜åº¦
bpy.ops.mesh.primitive_cone_add(vertices=32, radius1=bottom_radius1, radius2=top_radius1, depth=height1, location=(0, 0, height1 / 2))
tree_top1 = bpy.context.object
tree_top1.parent = tree

# åˆ›å»ºåœ£è¯æ ‘çš„ç¬¬äºŒå±‚æ ‘å† ï¼ˆåœ†å°ï¼‰
bottom_radius2 = 0.8  # ç¬¬äºŒå±‚åº•éƒ¨åœ†å°çš„åº•åŠå¾„
top_radius2 = 0.1  # ç¬¬äºŒå±‚åº•éƒ¨åœ†å°çš„é¡¶åŠå¾„
height2 = 1.0  # ç¬¬äºŒå±‚åº•éƒ¨åœ†å°çš„é«˜åº¦
bpy.ops.mesh.primitive_cone_add(vertices=32, radius1=bottom_radius2, radius2=top_radius2, depth=height2, location=(0, 0, height1 + height2 / 2))
tree_top2 = bpy.context.object
tree_top2.parent = tree

# åˆ›å»ºåœ£è¯æ ‘çš„ç¬¬ä¸‰å±‚æ ‘å† ï¼ˆåœ†é”¥ä½“ï¼‰
bottom_radius3 = 0.5  # ç¬¬ä¸‰å±‚åº•éƒ¨åœ†é”¥ä½“çš„åº•åŠå¾„
height3 = 1.0  # ç¬¬ä¸‰å±‚åº•éƒ¨åœ†é”¥ä½“çš„é«˜åº¦
bpy.ops.mesh.primitive_cone_add(vertices=32, radius1=bottom_radius3, depth=height3, location=(0, 0, height1 + height2 + height3 / 2 - 0.3))  # å¾€ä¸‹ç§»åŠ¨ä¸€äº›ï¼Œä¸ç¬¬äºŒå±‚åœ†å°è´´åˆ
tree_top3 = bpy.context.object
tree_top3.parent = tree

# è®¾ç½®åœ£è¯æ ‘çš„æè´¨
mat_green = bpy.data.materials.new(name="GreenMaterial")
mat_green.diffuse_color = (0.1, 0.5, 0.1, 1.0)  # ç»¿è‰²
trunk.data.materials.append(mat_green)
tree_top1.data.materials.append(mat_green)
tree_top2.data.materials.append(mat_green)
tree_top3.data.materials.append(mat_green)

bpy.ops.mesh.primitive_plane_add(size=2, enter_editmode=False, location=(0, 0, 0))
bpy.context.object.location[2] = -2
bpy.context.object.scale = (10,10,1)

bpy.ops.object.light_add(type='SPOT', radius=1)
light = bpy.context.object
light.name = "Light"
light.data.energy = 1000
light.location = (2.100301504135132, -2.5599961280822754, 4.457478046417236)
light.rotation_euler = (0.6562445163726807, 8.790517114221075e-08, 0.48171061277389526)

bpy.ops.object.camera_add()
camera = bpy.context.object
camera.location = (-6.545682430267334, -6.106528282165527, 7.655974388122559)
camera.rotation_euler = (0.8726650476455688, 3.8112457900751906e-07, -0.760964035987854)
bpy.context.scene.camera = camera

bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
bpy.context.scene.render.resolution_percentage = 50
bpy.context.scene.render.filepath = "/tmp/my_render_output.png"
bpy.ops.render.render(write_still=True)
```

### æ±½è½¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240611-1718091158641)

- æ±½è½¦

```
import bpy

def delete_all():
    # clear current scene
    bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
    bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©ä½“

def create_car_body():
    bpy.ops.mesh.primitive_cube_add(size=2, location=(0, 0, 1))
    car_body = bpy.context.object
    car_body.name = "CarBody"
    return car_body

def create_wheel(location):
    bpy.ops.mesh.primitive_cylinder_add(radius=0.5, depth=0.3, location=location)
    wheel = bpy.context.object
    wheel.rotation_euler[0] = 1.5708 # æ—‹è½¬90åº¦ä½¿è½®å­æ­£ç¡®å¯¹é½
    wheel.name = "Wheel"
    return wheel

def create_car():
    car_body = create_car_body()
    wheel_locations = [
    (-0.8, -1.2, 0.3),
    (0.8, -1.2, 0.3),
    (-0.8, 1.2, 0.3),
    (0.8, 1.2, 0.3)
    ]
    wheels = [create_wheel(loc) for loc in wheel_locations]
    return car_body, wheels

def apply_material(obj, name, color):
    material = bpy.data.materials.new(name=name)
    material.diffuse_color = color
    obj.data.materials.append(material)

def set_lighting():
    bpy.ops.object.light_add(type='SPOT', location=(4, 3.26, 2.89))
    spot_light = bpy.context.object
    spot_light.data.energy = 1000
    spot_light.data.spot_size = 0.7854 # 45 degrees
    spot_light.data.spot_blend = 0.15
    spot_light.rotation_euler = (71/360.0*6.28, 0, 125.4/360.0*6.28) # 45 degrees

def set_camera():
    bpy.ops.object.camera_add(location=(6, -6, 4))
    camera = bpy.context.object
    camera.rotation_euler = (1.2, 0, 0.7854) # è®¾ç½®é€‚å½“çš„è§’åº¦
    bpy.context.scene.camera = camera

def render_image(filepath):
    bpy.context.scene.render.filepath = filepath
    bpy.ops.render.render(write_still=True)


# Step 1: Delete all existing objects
delete_all()
# Step 2: Create the car model (ç´ æ¨¡)
car_body, wheels = create_car()
# Set lighting and camera
set_lighting()
set_camera()
# Render and save ç´ æ¨¡
render_image('/tmp/car_plain.png')
# Step 3: Apply materials for å½©æ¨¡
apply_material(car_body, "CarBodyMaterial", (0.8, 0.1, 0.1, 1)) # Red color
for wheel in wheels:
    apply_material(wheel, "WheelMaterial", (0.1, 0.1, 0.1, 1)) # Black color
# Render and save å½©æ¨¡
render_image('car_colored.png')
```

### æ³•æ‹‰åˆ©èµ›è½¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240611-1718098976067)

```import bpy
from math import pi

bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©

bpy.ops.mesh.primitive_cube_add( scale=(3, 5, 2))
mat = bpy.data.materials.new('mat_car')
color = (4,0.3,0.3,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=3, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (4, 4 ,0)
mat = bpy.data.materials.new('mat_car1')
color = (1,1.1,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=3, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (-4, 4 ,0)
mat = bpy.data.materials.new('mat_car1')
color = (1,1.1,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=2, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (-4, -4 ,-1)
mat = bpy.data.materials.new('mat_car2')
color = (1,2,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=2, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (4, -4 ,-1)
mat = bpy.data.materials.new('mat_car2')
color = (1,2,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.1, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (3, -4 ,-0.5)
mat = bpy.data.materials.new('mat_car3')
color = (0,0,0,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)


bpy.ops.mesh.primitive_cylinder_add(radius=0.1, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (-3, -4 ,-0.5)
mat = bpy.data.materials.new('mat_car3')
color = (0,0,0,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.1, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (-3, 4 ,0)
mat = bpy.data.materials.new('mat_car3')
color = (0,0,0,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.1, depth=1)
bpy.context.object.rotation_euler[1] = pi /2
bpy.context.object.location = (3, 4 ,0)
mat = bpy.data.materials.new('mat_car3')
color = (0,0,0,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_plane_add(size=30)
bpy.context.object.location = (0,0,-3)

camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera.lens = 24  # Focal length in millimeters
camera_obj.location = (13,8,9)  # X, Y, Z coordinates
camera_obj.rotation_euler = (4,-9.5,5.3)
bpy.context.scene.camera = camera_obj

bpy.ops.object.light_add(type='SPOT', radius=3)    
light = bpy.context.object  
light.data.energy = 10000
light.location = (30.8, -14.4,33)  
light.rotation_euler = (6.98, 0, 0.98)  

bpy.context.scene.render.engine = 'CYCLES'  
bpy.context.scene.render.resolution_x = 640  
bpy.context.scene.render.resolution_y = 480  
bpy.context.scene.render.resolution_percentage = 50  
bpy.context.scene.render.filepath = "/tmp/xuanran.png"
bpy.context.scene.render.image_settings.file_format = 'PNG'  
bpy.context.scene.render.image_settings.color_mode = 'RGBA'  
  
bpy.ops.render.render(write_still=True)
```


### tank

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240611-1718098368649)

- tank

```
# åˆ›å»ºä¸€ä¸ªæè´¨
import bpy,math
# æ¸…é™¤åœºæ™¯ä¸­çš„é»˜è®¤ç‰©ä½“

bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete()

bpy.ops.mesh.primitive_cube_add(size=2)
tank_body = bpy.context.object
tank_body.location = (0, 0, 0)
tank_body.scale = (1, 1, 0.5)

# ç‚®ç­’
bpy.ops.mesh.primitive_cylinder_add(radius=0.2, depth=1.5)
tank_cannon = bpy.context.object
tank_cannon.location = (0, -1.5, 0)
tank_cannon.rotation_euler = (0, math.radians(-90), math.radians(90))

# è½®å­ï¼ˆç®€å•ç¤ºä¾‹ï¼Œå®é™…éœ€è¦å¤šä¸ªå¹¶åˆç†å¸ƒå±€ï¼‰
bpy.ops.mesh.primitive_cylinder_add(radius=0.3, depth=0.2)
tank_wheel_a = bpy.context.object
tank_wheel_a.location = (0.7, -0.5, -0.5)
tank_wheel_a.rotation_euler = (0, math.radians(90), 0)

bpy.ops.mesh.primitive_cylinder_add(radius=0.3, depth=0.2)
tank_wheel_b = bpy.context.object
tank_wheel_b.location = (0.7, 0.5, -0.5)
tank_wheel_b.rotation_euler = (0, math.radians(90), 0)

bpy.ops.mesh.primitive_cylinder_add(radius=0.3, depth=0.2)
tank_wheel_c = bpy.context.object
tank_wheel_c.location = (-0.7, -0.5, -0.5)
tank_wheel_c.rotation_euler = (0, math.radians(90), 0)


bpy.ops.mesh.primitive_cylinder_add(radius=0.3, depth=0.2)
tank_wheel_d = bpy.context.object
tank_wheel_d.location = (-0.7, 0.5, -0.5)
tank_wheel_d.rotation_euler = (0, math.radians(90), 0)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (0.8, 0.2, 0.2, 1.0)
tank_cannon.data.materials.append(mat)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (1, 1, 0.5, 1.0)
tank_body.data.materials.append(mat)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (0.8, 0.3, 0.8, 1.0)
tank_wheel_a.data.materials.append(mat)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (0.8, 0.2, 0.9, 1.0)
tank_wheel_b.data.materials.append(mat)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (0.8, 0.1, 0.5, 1.0)
tank_wheel_c.data.materials.append(mat)

mat = bpy.data.materials.new(name="ColorMaterial")
mat.diffuse_color = (0.1, 0.3, 0.9, 1.0)
tank_wheel_d.data.materials.append(mat)

# è®¾ç½®æ¸²æŸ“å¼•æ“ä¸ºCycles
bpy.context.scene.render.engine = 'CYCLES'

# è®¾ç½®æ¸²æŸ“åˆ†è¾¨ç‡
bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
light_data = bpy.data.lights.new(name="Light", type='SUN')
light_data.energy = 10  # è®¾ç½®å…‰çš„å¼ºåº¦
light_object = bpy.data.objects.new(name="LightObject", object_data=light_data)
bpy.context.collection.objects.link(light_object)
# è®¾ç½®å…‰æºçš„ä½ç½®
light_object.location = (5, 5, 5)

# åˆ›å»ºä¸€ä¸ªæ‘„åƒæœº
bpy.ops.object.camera_add(location=(2.94, -4.78, 0.53))
camera = bpy.context.object
camera.rotation_euler = (83/180*3.14,0,29.6/180*3.14)
# è®¾ç½®æ‘„åƒæœºçš„æ–¹å‘
bpy.context.scene.camera = camera
bpy.ops.object.select_all(action='DESELECT')
camera.select_set(True)
bpy.ops.object.constraint_add(type='TRACK_TO')
bpy.context.object.constraints["Track To"].target = tank_body
bpy.context.object.constraints["Track To"].track_axis = 'TRACK_NEGATIVE_Z'
bpy.context.object.constraints["Track To"].up_axis = 'UP_Y'
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.render.filepath = '/tmp/tank.png'
bpy.ops.render.render(write_still=True)
```

### æ½œæ°´è‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240612-1718138331425)

```
import bpy
from math import pi
bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()
collection = bpy.data.collections["Collection"]
ship = bpy.data.objects.new("ship", None)
collection.objects.link(ship)
bpy.ops.mesh.primitive_cylinder_add(radius=2, depth=8)
bpy.context.object.location = (0, 0, 0)
bpy.context.object.rotation_euler[0] = pi / 2
bpy.context.object.parent = ship
bpy.context.object.name = "body"
blue_material = bpy.data.materials.new('BlueMaterial')
color = (0, 0, 1, 1) 
blue_material.diffuse_color = color
bpy.context.object.data.materials.append(blue_material)
bpy.ops.mesh.primitive_cone_add(radius1=2, depth=2)
bpy.context.object.location = (0, -4, 0)
bpy.context.object.rotation_euler[0] = pi / 2
bpy.context.object.parent = ship
bpy.context.object.name = "stern"
blue_material = bpy.data.materials.new('SkyBlueMaterial')
color = (0.53, 0.81, 0.92, 1) 
blue_material.diffuse_color = color
bpy.context.object.data.materials.append(blue_material)
bpy.ops.mesh.primitive_cone_add(radius1=2, depth=2)
bpy.context.object.location = (0, 4, 0)
bpy.context.object.rotation_euler[0] = pi / 2
bpy.context.object.parent = ship
bpy.context.object.name = "bow"
blue_material = bpy.data.materials.new('SkyBlueMaterial')
color = (0.53, 0.81, 0.92, 1) 
blue_material.diffuse_color = color
bpy.context.object.data.materials.append(blue_material)
bpy.ops.mesh.primitive_cube_add(size=1)
bpy.context.object.location = (0, 2, 2.5)
bpy.context.object.scale = (1.5, 2, 1)
bpy.context.object.parent = ship
bpy.context.object.name = "cabin"
black_material = bpy.data.materials.new('BlackMaterial')
color = (0, 0, 0, 1) 
black_material.diffuse_color = color
bpy.context.object.data.materials.append(black_material)
bpy.ops.mesh.primitive_cylinder_add(radius=0.5, depth=2)
bpy.context.object.location = (0, 2, 4)
# bpy.context.object.rotation_euler[0] 
bpy.context.object.parent = ship
bpy.context.object.name = "chimney"
red_material = bpy.data.materials.new('RedMaterial')
color = (1, 0, 0, 1)  
red_material.diffuse_color = color
bpy.context.object.data.materials.append(red_material)
bpy.ops.mesh.primitive_cube_add(size=0.5)
bpy.context.object.location = (0, 1, 2.5)
bpy.context.object.parent = ship
bpy.context.object.name = "window"
blue_material = bpy.data.materials.new('BlueMaterial')
color = (0, 0, 1, 1)  
blue_material.diffuse_color = color
bpy.context.object.data.materials.append(blue_material)
camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera_obj.location = (22.44, -4.18, 20.36)
camera_obj.rotation_euler = (50 * 0.0174533, 8 * 0.0174533, 66 * 0.0174533)
bpy.ops.mesh.primitive_plane_add(size=50, location=(0, 0, -4))
plane = bpy.context.object
bpy.context.scene.camera = camera_obj
bpy.context.scene.render.filepath = '/tmp/rendered_image.png'
bpy.context.scene.render.image_settings.file_format = 'PNG'
bpy.ops.object.light_add(type='SPOT', radius=10, location=(10, -10, 10))
spot_light = bpy.context.object
spot_light.data.energy = 8000
spot_light.data.spot_size = pi / 2  
spot_light.data.spot_blend = 0.5 
spot_light.rotation_euler = (pi / 4, 0, pi / 4)
bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
bpy.context.scene.render.resolution_percentage = 50
bpy.ops.render.render(write_still=True)
```
### æˆ’æŒ‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240612-1718145468235)

```
import bpy
from math import pi

bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©

bpy.ops.mesh.primitive_torus_add(major_radius=3.75, minor_radius=0.5)
bpy.context.object.location = (0, 0 ,4.5)
bpy.context.object.rotation_euler[1] = pi /2
mat = bpy.data.materials.new('mat_ring')
color = (2,1,1,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_torus_add(major_radius=0.5, minor_radius=0.3)
bpy.context.object.location = (0, 0 ,9)
mat = bpy.data.materials.new('mat_di')
color = (2,2,1,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_ico_sphere_add(subdivisions=1, radius=1)
bpy.context.object.location = (0, 0 ,9.7)
mat = bpy.data.materials.new('mat_top')
color = (1,2,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_plane_add(size=20)
bpy.context.object.location = (0,0,0)
bpy.context.object.scale = (10,10,1)

camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera.lens = 30  # Focal length in millimeters
camera_obj.location = (10,8,19)  # X, Y, Z coordinates
camera_obj.rotation_euler = (4,-9.5,5.3)
bpy.context.scene.camera = camera_obj

bpy.ops.object.light_add(type='SPOT', radius=1)    
light = bpy.context.object  
  
light.data.energy = 2000  
light.location = (6.7,-3,15)  
light.rotation_mode = 'XYZ'  
light.rotation_euler = (7, 0, 1)  
  
bpy.context.scene.render.resolution_x = 1200 
bpy.context.scene.render.resolution_y = 900 
bpy.context.scene.render.resolution_percentage = 100

bpy.context.scene.render.engine = 'CYCLES'  
bpy.context.scene.render.resolution_x = 640  
bpy.context.scene.render.resolution_y = 480  
bpy.context.scene.render.resolution_percentage = 100  
bpy.context.scene.render.image_settings.file_format = 'PNG'  
bpy.context.scene.render.image_settings.color_mode = 'RGBA'  
bpy.context.scene.render.filepath = '/tmp/ring.png'
bpy.ops.render.render(write_still=True)
```

### åœ£å‰‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240611-1718097731728)

```
import bpy
import math

# åˆ é™¤æ‰€æœ‰ç°æœ‰å¯¹è±¡
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

# åˆ›å»ºå‰‘åˆƒ (ç´ æ¨¡)
bpy.ops.mesh.primitive_cone_add(vertices=4, depth=4.0, radius1=0.1, radius2=0, location=(0, 0, 1.3))
blade = bpy.context.object
blade.scale = (0.5, 0.1, 0.6)
blade.rotation_euler = (0, 0, math.radians(90))
blade.name = 'Blade'

# åˆ›å»ºæŠ¤æ‰‹ (ç´ æ¨¡)
bpy.ops.mesh.primitive_cylinder_add(vertices=16, depth=0.2, radius=0.7, location=(0, 0, 0.1))
guard = bpy.context.object
guard.scale = (0.2, 0.1, 0.1)
guard.rotation_euler = (0, 0, math.radians(90))
guard.name = 'Guard'

# åˆ›å»ºå‰‘æŸ„ (ç´ æ¨¡)
bpy.ops.mesh.primitive_cylinder_add(vertices=16, depth=1.2, radius=0.3, location=(0, 0, -0.2))
hilt = bpy.context.object
hilt.scale = (0.1, 0.1, 0.5)
hilt.rotation_euler = (0, 0, 0)
hilt.name = 'Hilt'

# åˆ›å»ºå‰‘æŸ„æœ«ç«¯çš„é¥°å“ (ç´ æ¨¡)
bpy.ops.mesh.primitive_uv_sphere_add(segments=32, ring_count=16, radius=0.1, location=(0, 0, -0.5))
pommel = bpy.context.object
pommel.scale = (0.5, 0.5, 0.5)
pommel.name = 'Pommel'

# å‰‘çš„æè´¨ (å½©æ¨¡)
material_blade = bpy.data.materials.new(name='BladeMaterial')
material_blade.diffuse_color = (0.8, 0.8, 0.9, 1)  # é“¶è‰²
blade.data.materials.append(material_blade)

material_guard = bpy.data.materials.new(name='GuardMaterial')
material_guard.diffuse_color = (0.8, 0.7, 0.0, 1)  # é‡‘è‰²
guard.data.materials.append(material_guard)

material_hilt = bpy.data.materials.new(name='HiltMaterial')
material_hilt.diffuse_color = (0.2, 0.1, 0.0, 1)  # æ·±æ£•è‰²
hilt.data.materials.append(material_hilt)

material_pommel = bpy.data.materials.new(name='PommelMaterial')
material_pommel.diffuse_color = (0.8, 0.7, 0.0, 1)  # é‡‘è‰²
pommel.data.materials.append(material_pommel)

# åˆ›å»ºä¸€ä¸ªå¹³é¢ä½œä¸ºåœ°é¢
bpy.ops.mesh.primitive_plane_add(size=10, location=(0, 0, -2))
ground = bpy.context.object
ground.name = 'Ground'
material_ground = bpy.data.materials.new(name='GroundMaterial')
material_ground.diffuse_color = (0.2, 0.2, 0.2, 1)
ground.data.materials.append(material_ground)

# è®¾ç½®ç›¸æœº
bpy.ops.object.camera_add(location=(2.65, -2.55, 5), rotation=(math.radians(44), 0, math.radians(46)))
camera = bpy.context.object
bpy.context.scene.camera = camera

# è®¾ç½®ç¯å…‰
bpy.ops.object.light_add(type='SUN', location=(5, -5, 5))
light = bpy.context.object
light.data.energy = 5

# è®¾ç½®æ¸²æŸ“è®¾ç½®
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.cycles.device = 'GPU'  # å¦‚æœä½¿ç”¨ GPU æ¸²æŸ“
bpy.context.scene.render.resolution_x = 1920
bpy.context.scene.render.resolution_y = 1080
bpy.context.scene.render.filepath = '/tmp/holy_sword_render_white.png'

# æ¸²æŸ“å›¾åƒ
bpy.ops.render.render(write_still=True)
```

### å¦ä¸€æŠŠ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240612-1718150240156)

```
import bpy
from math import pi

bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©ä½“
bpy.ops.mesh.primitive_plane_add(size = 1000)
bpy.context.object.location = (0,0,-25)
bpy.ops.mesh.primitive_cylinder_add(radius=1, depth=18)
bpy.context.object.location = (0,0,0)
bpy.context.object.rotation_euler[0] = pi /2
mat = bpy.data.materials.new('mat_1')
color = (0.266, 1.01, 1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=2)
bpy.context.object.scale = (0.2,0.75,1)
bpy.context.object.rotation_euler[0] = - pi / 4
bpy.context.object.location = (0, 5 ,1)
mat = bpy.data.materials.new('mat_2')
color = (0.266, 1.01, 1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=2)
bpy.context.object.scale = (0.2,0.75,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, 5 ,-1)
mat = bpy.data.materials.new('mat_3')
color = (0.266, 1.01, 1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=3)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, 7 ,-1)
mat = bpy.data.materials.new('mat_4')
color = (0.266, 0.8, 1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=3)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.location = (0, 7 ,1)
bpy.context.object.rotation_euler[0] = - pi / 4
mat = bpy.data.materials.new('mat_4')
color = (0.266, 0.8, 1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / 4
bpy.context.object.location = (0, 11 ,1)
mat = bpy.data.materials.new('mat_5')
color = (0.783, 0.8, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, 11 ,-1)
mat = bpy.data.materials.new('mat_6')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, 11 ,-1)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / 4
bpy.context.object.location = (0, 15 ,-1)
mat = bpy.data.materials.new('mat_7')
color = (0.801, 0, 0.0026, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, 15 ,1)
mat = bpy.data.materials.new('mat_8')
color = (0, 0.800, 0.08, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=16)
bpy.context.object.scale = (0.1,0.2,1.5)
bpy.context.object.rotation_euler[0] = - pi / 1
bpy.context.object.location = (0, -6 ,0)
mat = bpy.data.materials.new('mat_9')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=10)
bpy.context.object.scale = (0.2,0.2,1.5)
bpy.context.object.rotation_euler[0] = - pi / 1
bpy.context.object.location = (0, -6 ,0)
mat = bpy.data.materials.new('mat_10')
color = (0, 0.8, 0.744, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=4)
bpy.context.object.scale = (0.8,1,1.5)
bpy.context.object.rotation_euler[0] = - pi / 1
bpy.context.object.location = (0, -6 ,10)
mat = bpy.data.materials.new('mat_11')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=4)
bpy.context.object.scale = (0.8,1,1.5)
bpy.context.object.rotation_euler[0] = - pi / 1
bpy.context.object.location = (0, -6 ,-10)
mat = bpy.data.materials.new('mat_12')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=50)
bpy.context.object.scale = (0.04,0.15,1)
bpy.context.object.rotation_euler[0] = - pi / 2
bpy.context.object.location = (0, -31 ,0)
mat = bpy.data.materials.new('mat_13')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -2
bpy.context.object.location = (0, -6 ,-11)
mat = bpy.data.materials.new('mat_14')
color = (0.10464, 0.0862603, 0.800797, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=6)
bpy.context.object.scale = (0.2,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -2
bpy.context.object.location = (0, -6 ,11)
mat = bpy.data.materials.new('mat_15')
color = (0.10464, 0.0862603, 0.800797, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=28)
bpy.context.object.scale = (0.12,0.08,1.9)
bpy.context.object.rotation_euler[0] = - pi / 2
bpy.context.object.location = (0, -32 ,0)
mat = bpy.data.materials.new('mat_16')
color = (0, 0.8, 0.744, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=5.5)
bpy.context.object.scale = (0.35,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / 4
bpy.context.object.location = (0, -57 ,1)
mat = bpy.data.materials.new('mat_13')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.ops.mesh.primitive_cube_add(size=5.5)
bpy.context.object.scale = (0.35,0.5,1)
bpy.context.object.rotation_euler[0] = - pi / -4
bpy.context.object.location = (0, -57 ,-1)
mat = bpy.data.materials.new('mat_13')
color = (0, 0.479, 0.8, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
camera = bpy.data.cameras.new('Camera')
camera_obj = bpy.data.objects.new('Camera', camera)
bpy.data.collections["Collection"].objects.link(camera_obj)
camera.lens = 40  # Focal length in millimeters
camera.sensor_width = 36  # Sensor width in millimeters
camera.sensor_height = 24  # Sensor height in millimeters
camera_obj.location = (50.623, -78.94, 30.428)  # X, Y, Z coordinates
camera_obj.rotation_euler = (0,149.6,-135.9)
bpy.context.scene.camera = camera_obj
bpy.ops.object.light_add(type='SPOT', radius=3)
bpy.context.object.data.energy = 1000
bpy.context.object.location = (50.623,-78.94,30.428)
bpy.context.object.rotation_euler = (67.85,0,54)
bpy.context.scene.render.resolution_x = 740
bpy.context.scene.render.resolution_y = 1080
bpy.context.scene.render.resolution_percentage = 50

# Set the render engine (e.g., CYCLES, BLENDER_EEVEE)
bpy.context.scene.render.engine = 'CYCLES'
# Set the output file path
bpy.context.scene.render.filepath = '/tmp/render2.png'
# Render the current view
bpy.ops.render.render(write_still=True)


```

### çŒ´å­æ³•æ–

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240611-1718111404697)

```
import bpy
from math import pi

bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©

bang = bpy.data.objects.new("bang", None)
bpy.data.collections["Collection"].objects.link(bang)
bpy.ops.mesh.primitive_cylinder_add(radius=0.3, depth=7)
bpy.context.object.rotation_euler[0] = pi /2
mat = bpy.data.materials.new('mat_bang1')
color = (1,1.1,0.8,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.5, depth=25)
bpy.context.object.rotation_euler[2] = pi /2
bpy.context.object.location = (0, 0 ,-10.5)
bpy.context.object.name = "gan"
mat = bpy.data.materials.new('mat_bang2')
color = (1,1.1,0.8,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_monkey_add(size=5)
bpy.context.object.location = (0, 0 ,3)
bpy.context.object.rotation_euler[2] = pi /2
bpy.context.object.rotation_euler[0] = -pi /8
bpy.context.object.name = "head"
mat = bpy.data.materials.new('mat_head')
color = (1,2,2,1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

empty_obj = bpy.data.objects.new("empty", None)
empty_obj.name = "xiangquan"
bpy.data.collections["Collection"].objects.link(empty_obj)
bpy.ops.mesh.primitive_torus_add(major_radius=3.75, minor_radius=0.25)
bpy.context.object.location = (0.25, 0 ,0.25)
bpy.context.object.rotation_euler[1] = pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "out"
mat = bpy.data.materials.new('mat_huan1')
color = (2, 2,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_torus_add(major_radius=2.4, minor_radius=0.35)
bpy.context.object.location = (0.25, 0 ,0.25)
bpy.context.object.rotation_euler[1] = pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "middle"
mat = bpy.data.materials.new('mat_huan2')
color = (2, 1,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_torus_add(major_radius=1.25, minor_radius=0.5)
bpy.context.object.location = (0.25, 0 ,0.25)
bpy.context.object.rotation_euler[1] = pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "in"
mat = bpy.data.materials.new('mat_huan2')
color = (2, 1,4, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

empty_obj = bpy.data.objects.new("empty", None)
empty_obj.name = "king"
bpy.data.collections["Collection"].objects.link(empty_obj)
bpy.ops.mesh.primitive_torus_add(major_radius=1.25, minor_radius=0.3)
bpy.context.object.location = (-1, 0 ,5)
bpy.context.object.rotation_euler[1] = -pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "bottom"
mat = bpy.data.materials.new('mat_di')
color = (1, 1,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_ico_sphere_add(subdivisions=1, radius=0.75)
bpy.context.object.location = (-1.25, 0 ,6)
bpy.context.object.parent = empty_obj
bpy.context.object.name = "top"
mat = bpy.data.materials.new('mat_zuan')
color = (2,4,2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cone_add(radius1=0.4, radius2=0, depth=0.8)
bpy.context.object.location = (-0.1, 0 ,5.8)
bpy.context.object.rotation_euler[1] = -pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "middle"
mat = bpy.data.materials.new('mat_zhong')
color = (3, 2,0.2, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cone_add(radius1=0.4, radius2=0, depth=0.6)
bpy.context.object.location = (-0.1, 0.3 ,5.8)
bpy.context.object.rotation_euler[1] = -pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "left"
mat = bpy.data.materials.new('mat_zuo')
color = (3, 2,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cone_add(radius1=0.4, radius2=0, depth=0.6)
bpy.context.object.location = (-0.1, -0.3 ,5.8)
bpy.context.object.rotation_euler[1] = -pi /8
bpy.context.object.parent = empty_obj
bpy.context.object.name = "right"
mat = bpy.data.materials.new('mat_you')
color = (3, 2,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

empty_obj = bpy.data.objects.new("empty", None)
empty_obj.name = "erhuan"
bpy.data.collections["Collection"].objects.link(empty_obj)
bpy.ops.mesh.primitive_cone_add(radius1=0.25, radius2=0, depth=0.6)
bpy.context.object.location = (-0.9, -2.5 ,1.75)
bpy.context.object.rotation_euler[0] = pi 
bpy.context.object.parent = empty_obj
bpy.context.object.name = "zuoer1"
mat = bpy.data.materials.new('mat_zuoer1')
color = (4, 4,4, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cone_add(radius1=0.25, radius2=0, depth=0.6)
bpy.context.object.location = (-0.9, 2.5 ,1.75)
bpy.context.object.rotation_euler[0] = pi 
bpy.context.object.parent = empty_obj
bpy.context.object.name = "youer1"
mat = bpy.data.materials.new('mat_youer1')
color = (4, 4,4, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.03, depth=0.5)
bpy.context.object.location = (-0.9, -2.5 ,2.25)
bpy.context.object.parent = empty_obj
bpy.context.object.name = "zuoer2"
mat = bpy.data.materials.new('mat_zhu1')
color = (1,4,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_cylinder_add(radius=0.03, depth=0.5)
bpy.context.object.location = (-0.9, 2.5 ,2.25)
bpy.context.object.parent = empty_obj
bpy.context.object.name = "youer2"
mat = bpy.data.materials.new('mat_zhu2')
color = (1,4,1, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)

bpy.ops.mesh.primitive_plane_add(size=60)
bpy.context.object.location = (0,0,-23)

camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera.lens = 14  # Focal length in millimeters
camera_obj.location = (10,4,9)  # X, Y, Z coordinates
camera_obj.rotation_euler = (4,-9.5,5.3)
bpy.context.scene.camera = camera_obj

bpy.ops.object.light_add(type='SPOT', radius=1)    
light = bpy.context.object  
  
light.data.energy = 1000  
light.location = (6.27, -3.4,11)  
light.rotation_mode = 'XYZ'  
light.rotation_euler = (7, 0, 1)  
  
bpy.context.scene.render.resolution_x = 800  
bpy.context.scene.render.resolution_y = 600  
bpy.context.scene.render.resolution_percentage = 100

bpy.context.scene.render.engine = 'CYCLES'  
bpy.context.scene.render.resolution_x = 1920  
bpy.context.scene.render.resolution_y = 1080  
bpy.context.scene.render.resolution_percentage = 100  
bpy.context.scene.render.filepath = "/tmp/xuanran.png"
bpy.context.scene.render.image_settings.file_format = 'PNG'  
bpy.context.scene.render.image_settings.color_mode = 'RGBA'  
  
bpy.ops.render.render(write_still=True)

```

### å¤ªé˜³ç³»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240618-1718699025575)

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete() 

from random import random

def create_sphere(radius, distance_to_sun, obj_name):
    obj = bpy.ops.mesh.primitive_uv_sphere_add(
        radius=radius,
        location=(distance_to_sun, 0, 0),
        scale=(1, 1, 1)
    )

    bpy.context.object.name = obj_name

    bpy.ops.object.shade_smooth()
    return bpy.context.object

def create_torus(radius, obj_name):
    obj = bpy.ops.mesh.primitive_torus_add(
        location=(0, 0, 0),
        major_radius=radius,
        minor_radius=0.1,
        major_segments=60
    )
    bpy.context.object.name = obj_name
    return bpy.context.object

    bpy.ops.object.shade_smooth()
    return bpy.context.objectd

def create_emission_shader(color, strength, mat_name):
    mat = bpy.data.materials.new(mat_name)
    mat.use_nodes = True
    
    nodes = mat.node_tree.nodes
    nodes.clear()

    node_emission = nodes.new(type="ShaderNodeEmission")
    node_emission.inputs[0].default_value = color
    node_emission.inputs[1].default_value = strength
    
    node_output = nodes.new(type="ShaderNodeOutputMaterial")
    
    links = mat.node_tree.links
    link = links.new(node_emission.outputs[0], node_output.inputs[0])

    return mat


N_PLANETS = 8

ring_mat = create_emission_shader(
    (1, 1, 1, 1), 1, "RingMat"
)
for n in range(N_PLANETS):
    
    r = 1 + random() * 4
    d = 30 + n * 12 + (random() * 4 - 2)
    create_sphere(r, d, "Planet-{:02d}".format(n))
    create_torus(d, "Radius-{:02d}".format(n))

    planet = create_sphere(r, d, "Planet-{:02d}".format(n))
    planet.data.materials.append(
        create_emission_shader(
            (random(), random(), 1, 1),
            2,
            "PlanetMat-{:02d}".format(n)
        )
    )
    
    ring = create_torus(d, "Radius-{:02d}".format(n))
    ring.data.materials.append(ring_mat)

sun = create_sphere(12, 0, "Sun")
sun.data.materials.append(
    create_emission_shader(
        (1, 0.66, 0.08, 1), 10, "SunMat"
    )
)

sun = create_sphere(12, 0, "Sun")


camera = bpy.data.cameras.new('MyCamera')
camera_obj = bpy.data.objects.new('CameraObj', camera)
bpy.context.scene.collection.objects.link(camera_obj)
camera.lens = 50  # Focal length in millimeters
camera.sensor_width = 36  # Sensor width in millimeters
camera.sensor_height = 24  # Sensor height in millimeters
camera_obj.location = (40, -40, 200)  # X, Y, Z coordinates
camera_obj.rotation_euler = (10*0.0174444444,-3*0.0174444444,-0 )

bpy.ops.object.light_add(type='SPOT', radius=1, location=(0, 0, 100))

bpy.context.scene.camera = camera_obj
bpy.context.scene.render.resolution_x = 640
bpy.context.scene.render.resolution_y = 480
bpy.context.scene.render.resolution_percentage = 50


# Set the render engine (e.g., CYCLES, BLENDER_EEVEE)
bpy.context.scene.render.engine = 'CYCLES'

# Set the output file path
bpy.context.scene.render.filepath = '/tmp/render2.png'

# Render the current view
bpy.ops.render.render(write_still=True)
```

### æ€»ç»“ ğŸ¤”

- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹
