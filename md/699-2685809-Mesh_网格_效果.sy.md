---
show: step
version: 1.0 
enable_checker: true
---


# python_blender

## å¼€å§‹

- ä¸Šæ¬¡åšäº†å¾ˆå¤šc919
	- æ¯ä¸ªé£æœºéƒ½æœ‰è‡ªå·±çš„æœºèº«ã€æœºç¿¼...
- è¿™ä¸ªCubeå¯¹è±¡é‡Œé¢
	- æ€ä¹ˆè¿˜æœ‰ä¸ªç»¿è‰²çš„Cubeå‘¢?

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240518-1716040401696)

### åˆ‡æ¢çª—å£

- ä¸¤ä¸ªCubeä¸å…‰é¢œè‰²ä¸åŒ
	- ç±»å‹ä¹Ÿä¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240518-1716040562082)

| é¢œè‰² | ç±»å‹ |æ–¹å¼ |
|---|---|---|
| é»„è‰² Cube |  Object å¯¹è±¡  | å‰ç«¯æ˜¾ç¤º |
| ç»¿è‰² Cube | Mesh ç½‘æ ¼ | åå°æ•°æ®å­˜å‚¨|

### å¾—åˆ°meshå¯¹è±¡ 

- ç¬¬ä¸€æ­¥
	- è·å–ç½‘æ ¼æ•°æ® 'Cube'
	- å°†å…¶æŒ‡å®šç»™å˜é‡meshï¼ˆè‡ªå®šä¹‰çš„åç§°ï¼Œä¹Ÿå¯ä»¥æ˜¯åˆ«çš„ï¼‰

```
mesh = bpy.data.meshes['Cube'] 
```

- å¦‚ä½• æ ¹æ® ç½‘æ ¼ 
	- ç”Ÿæˆå¯¹è±¡å‘¢?

### ç”Ÿæˆå¯¹è±¡ 

```
obj = bpy.data.objects.new(
```

- æŒ‰ä¸‹ <kbd>Tab</kbd> å¾—åˆ°æç¤º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240518-1716040930377)

- å‚æ•°éœ€è¦ä¸¤ä¸ª
	1. å¯¹è±¡çš„åå­—
	2. å¯¹è±¡çš„æ•°æ®

```
obj = bpy.data.objects.new("oeasy",mesh)
```

### é“¾æ¥å¯¹è±¡

- æ­¤æ—¶Scene Collectionè°ƒç‰ˆé‡Œé¢æ²¡æœ‰obj
	- ä½†æ˜¯æ–‡ä»¶è°ƒç‰ˆé‡Œé¢å·²ç»æœ‰äº†
	- æ­¤æ—¶éœ€è¦æŠŠobj é“¾æ¥åˆ° åœºæ™¯

```
bpy.context.collection.objects.link(obj) 
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240518-1716041269350)

- objè¿›å…¥åœºæ™¯

```
import bpy
# è·å–ç½‘æ ¼æ•°æ®ï¼Œèµ‹ç»™å˜é‡mesh
mesh = bpy.data.meshes['Cube']
# ç”Ÿæˆæ–°çš„å¯¹è±¡æ•°æ®ï¼Œèµ‹ç»™å˜é‡object
obj = bpy.data.objects.new('oeasy',mesh)
# å°†å¯¹è±¡æ•°æ®é“¾æ¥åˆ°åœºæ™¯ä¸­ï¼Œä»è€Œæ˜¾ç¤ºå¯¹è±¡
bpy.context.collection.objects.link(obj) 
```

- ä¸ºä»€ä¹ˆåˆ†åˆ«ç”¨
	-  bpy.data.objects
	-  bpy.context.collection.objects

### å¯¹è±¡

-  bpy.context.collection.objects
	- å¯¹åº” å½“å‰åœºæ™¯ ä¸Šä¸‹æ–‡ä¸­
	- åªæœ‰collectioné›†åˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716072008123)

-  bpy.data.objects
	- å¯¹åº”æ–‡ä»¶è°ƒç‰ˆé‡Œé¢
	- å¯¹è±¡ æ›´å¤š

### meshçš„ä¿®æ”¹

```
import bpy
bpy.data.objects["Cube"].data.vertices[0].co.x += 1.0
```

- å¯ä»¥ä¿®æ”¹ç¬¬ä¸€ä¸ªç‚¹çš„xåæ ‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716072050026)

### ä½¿ç”¨ç‚¹çš„æ–¹å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/2685809/uid1190679-20241102-1730552720837) 


```import bpy
import bmesh

# åˆ›å»ºæ–°çš„ç½‘æ ¼æ•°æ®å¯¹è±¡
mesh = bpy.data.meshes.new(name="TriangleMesh")

# åˆ›å»ºç‰©ä½“å¯¹è±¡å¹¶å…³è”åˆ°ç½‘æ ¼æ•°æ®
obj = bpy.data.objects.new("TriangleObject", mesh)

# å°†ç‰©ä½“æ·»åŠ åˆ°åœºæ™¯ä¸­
bpy.context.collection.objects.link(obj)

# ä½¿ç”¨ bmesh æ“ä½œç½‘æ ¼
bm = bmesh.new()

# æ·»åŠ ä¸‰ä¸ªé¡¶ç‚¹
v1 = bm.verts.new((0, 0, 0))
v2 = bm.verts.new((1, 0, 0))
v3 = bm.verts.new((0.5, 1, 0))

# æ·»åŠ ä¸‰æ¡è¾¹è¿æ¥ä¸‰ä¸ªé¡¶ç‚¹å½¢æˆä¸‰è§’å½¢
bm.edges.new([v1, v2])
bm.edges.new([v2, v3])
bm.edges.new([v3, v1])

# å°† bmesh çš„æ•°æ®æ›´æ–°åˆ° Blender çš„ç½‘æ ¼æ•°æ®ä¸­
bm.to_mesh(mesh)
bm.free()
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/2685809/uid1190679-20241102-1730552963511) 

- 3ä¸ªç‚¹ã€3æ¡è¾¹ã€æ²¡æœ‰é¢

### ä½¿ç”¨ç‚¹çš„æ–¹å¼ç”Ÿæˆé¢

```
import bpy
verts = [(0,0,0),(0,1,0),(1,1,0),(1,0,0)]
edges = []
faces = [(0,1,2,3)]
mesh = bpy.data.meshes.new('Mesh')
mesh.from_pydata(verts,edges,faces)
new_object = bpy.data.objects.new('Object',mesh)
bpy.context.collection.objects.link(new_object) 
```

- æœ€ç»ˆæ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716072187114)

### ç¼–è¾‘å’Œè§‚å¯Ÿ

- é€‰ä¸­æ–¹ç‰‡
	- æŒ‰ä¸‹ <kbd> tab</kbd> 
	- åˆ‡æ¢ç¼–è¾‘æ¨¡å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716072321657)

### é‡‘å­—å¡”

```
import bpy
import math

bpy.ops.object.select_all(action='DESELECT')
bpy.ops.object.select_by_type(type='MESH')
bpy.ops.object.delete()

verts = [
    (1, 1, 1),
    (-1, 1, 1),
    (0, -1, 1),
    (0, 0, -1)  
]
faces = [
    (0, 1, 2),
    (0, 1, 3),
    (1, 2, 3),
    (0, 2, 3)
]
mesh = bpy.data.meshes.new("PyramidMesh")
mesh.from_pydata(verts, [], faces)
obj = bpy.data.objects.new("Pyramid", mesh)
scene = bpy.context.scene
scene.collection.objects.link(obj)

mat = bpy.data.materials.new(name="PinkMaterial")
mat.diffuse_color = (1, 0.5, 0.5, 1)  # RGBAé¢œè‰²
obj.data.materials.append(mat)

bpy.ops.object.light_add(type='SPOT', radius=1, location=(6.27,-3.4,2.83))
spot_light = bpy.context.object
spot_light.data.energy = 1000
spot_light.rotation_euler = (1.172,0,0.907)

camera_data = bpy.data.cameras.new(name="Camera")
camera_obj = bpy.data.objects.new(name="Camera", object_data=camera_data)
scene.collection.objects.link(camera_obj)
camera_obj.location = (13.6, 5, 10.5)
camera_obj.rotation_euler = (-2.233,3.14,-1.047)
scene.camera = camera_obj

scene.render.engine = 'CYCLES'
scene.render.image_settings.file_format = 'PNG'
scene.render.filepath = '/tmp/render2.png'
scene.render.resolution_x = 640
scene.render.resolution_y = 480
scene.render.resolution_percentage = 50

bpy.ops.render.render(write_still=True)
```

### éšæœºå¹³é¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/2685809/uid1190679-20250211-1739246613234)

- è¾¹ç¼˜éƒ¨åˆ†ä¼šè¿‡æ¸¡åˆ°è¾¹ç•Œ

```
import bpy
import random
import math

def create_modified_grid(size=5, subdivisions=10, height_variance=1):
    # Clear existing objects
    bpy.ops.object.select_all(action='SELECT')
    bpy.ops.object.delete()
    
    # Create base grid
    bpy.ops.mesh.primitive_grid_add(
        size=size,
        x_subdivisions=subdivisions,
        y_subdivisions=subdivisions
    )
    grid = bpy.context.active_object
    grid.name = "Terrain"
    
    # Add noise to vertices
    mesh = grid.data
    for v in mesh.vertices:
        # Use perlin noise or similar for more natural terrain
        distance = math.sqrt(v.co.x ** 2 + v.co.y ** 2)
        height = random.uniform(-height_variance/2, height_variance/2)
        # Reduce height at edges for smoother borders
        edge_factor = 1 - (distance / (size/1.5))
        v.co.z += height * max(0, edge_factor)
    return grid

if __name__ == "__main__":
    terrain = create_modified_grid(size=10, subdivisions=20, height_variance=2)
```

### æ€»ç»“ ğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹
