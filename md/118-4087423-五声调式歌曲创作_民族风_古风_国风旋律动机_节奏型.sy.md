---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åµŒå¥— embedded

## å›å¿†

- ä¸Šæ¬¡æ¬¡æˆ‘ä»¬äº†è§£äº† 
	- ä¸­å›½äº”å£°è°ƒå¼
	- å®«å•†è§’å¾µç¾½  äº”ç§è°ƒå¼ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250511-1746928689719) 

- ä¸€æ¬¡ å¯ä»¥æŠŠäº”ç§è°ƒå¼ å…¨å†™å‡ºæ¥å—ï¼Ÿ

### æç¤ºè¯

```
ä½¿ç”¨ Python ç”Ÿæˆ MIDIï¼Œ è¦æ±‚è¿™ä¸ª MIDI å‘¢ï¼Œåˆ†åˆ«ç”Ÿæˆå®«ã€å•†ã€è§’ã€å¾µã€ç¾½äº”ç§è°ƒå¼çš„ MIDIã€‚ æ¯ä¸ªè°ƒå¼å‘¢ï¼Œæ¯”å¦‚è¯´å®«ï¼Œå®«åˆ°å®«æ€»å…±å…­ä¸ªéŸ³ç¬¦ï¼Œå•†ä¹Ÿæ˜¯è¿™æ ·ã€‚ä»ä¸»éŸ³å¼€å§‹ç»“æŸäºé«˜å…«åº¦çš„ä¸»éŸ³ã€‚
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750166201437) 

### ä»£ç 

```
from mido import Message, MetaMessage, MidiFile, MidiTrack
import os

# äº”å£°è°ƒå¼æ­£ç¡®éŸ³ç¬¦æ˜ å°„ï¼ˆä»¥ä¸»éŸ³ä¸ºèµ·ç‚¹ï¼ŒMIDIéŸ³ç¬¦ç¼–å·ï¼‰
# æ¯ä¸ªè°ƒå¼åŒ…å«ä»ä¸»éŸ³åˆ°é«˜å…«åº¦ä¸»éŸ³çš„å…­ä¸ªéŸ³ç¬¦
modes = {
    "å®«": [60, 62, 64, 67, 69, 72],  # Cå®«ï¼šC, D, E, G, A, Cï¼ˆæ­£ç¡®ï¼‰
    "å•†": [62, 64, 67, 69, 72, 74],  # Då•†ï¼šD, E, G, A, C, Dï¼ˆé«˜å…«åº¦ï¼‰
    "è§’": [64, 67, 69, 72, 74, 76],  # Eè§’ï¼šE, G, A, C, D, Eï¼ˆé«˜å…«åº¦ï¼‰
    "å¾µ": [67, 69, 72, 74, 76, 79],  # Gå¾µï¼šG, A, C, D, E, Gï¼ˆé«˜å…«åº¦ï¼‰
    "ç¾½": [69, 72, 74, 76, 79, 81]   # Aç¾½ï¼šA, C, D, E, G, Aï¼ˆé«˜å…«åº¦ï¼‰
}

# ç”ŸæˆMIDIæ–‡ä»¶çš„å‡½æ•°
def generate_mode_midi(mode_name, notes, output_dir="midi_files"):
    if not os.path.exists(output_dir):
        os.makedirs(output_dir)

    mid = MidiFile()
    track = MidiTrack()
    mid.tracks.append(track)

    # è®¾ç½®é€Ÿåº¦ï¼ˆä¸­ç­‰é€Ÿåº¦ï¼‰
    track.append(MetaMessage('set_tempo', tempo=500000))

    # ç”ŸæˆéŸ³ç¬¦äº‹ä»¶ï¼ˆæ¯ä¸ªéŸ³ç¬¦æŒç»­0.5ç§’ï¼‰
    for i, note in enumerate(notes):
        track.append(Message('note_on', note=note, velocity=64, time=0))
        track.append(Message('note_off', note=note, velocity=64, time=500))

    # ä¿å­˜æ–‡ä»¶
    output_file = os.path.join(output_dir, f"{mode_name}è°ƒå¼.mid")
    mid.save(output_file)
    print(f"å·²ç”Ÿæˆ {mode_name} è°ƒå¼MIDI: {output_file}")

# ä¸»å‡½æ•°
def main():
    for mode_name, notes in modes.items():
        generate_mode_midi(mode_name, notes)
    print("æ‰€æœ‰è°ƒå¼MIDIç”Ÿæˆå®Œæˆï¼")

if __name__ == "__main__":
    main()
```

### è§‚å¯Ÿmid

- "å®«": [60, 62, 64, 67, 69, 72]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750167462184) 

- "å•†": [62, 64, 67, 69, 72, 74]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750167511702) 

- "è§’": [64, 67, 69, 72, 74, 76]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750167557534) 

- "å¾µ": [67, 69, 72, 74, 76, 79]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750168013562) 

- "ç¾½": [69, 72, 74, 76, 79, 81] 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750168044781) 

### ç†è§£è°ƒå¼

- å®«è°ƒå¼æœ¬è´¨ä¸Šæ˜¯ ä¸€å¥—éŸ³ç¨‹å…³ç³»
	- å¤§äºŒã€å¤§äºŒã€å°ä¸‰ã€å¤§äºŒã€å°ä¸‰
	- åªè¦æ»¡è¶³è¿™ä¸ªå…³ç³»
	- å°±ç®—æ˜¯ å®«è°ƒå¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4078549/uid1190679-20250511-1746928689719) 

- æˆ‘ä»¬å¯ä»¥æ¥ä¸€ä¸ªDå®«è°ƒå¼çš„éŸ³é˜¶å—ï¼Ÿ

### Då®«

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750168348619) 

```
from mido import MetaMessage, Message, MidiFile, MidiTrack
import os

# Då®«è°ƒå¼éŸ³ç¬¦ï¼ˆMIDIéŸ³ç¬¦ç¼–å·ï¼‰
# D(62), E(64), #F(66), A(69), B(71), D(é«˜å…«åº¦74)
d_gong_notes = [62, 64, 66, 69, 71, 74]

def generate_midi(notes, output_file="Då®«è°ƒå¼.mid"):
    mid = MidiFile()
    track = MidiTrack()
    mid.tracks.append(track)

    # è®¾ç½®é€Ÿåº¦ï¼ˆä¸­ç­‰é€Ÿåº¦ï¼‰
    track.append(MetaMessage('set_tempo', tempo=500000))

    # ç”Ÿæˆæ¯ä¸ªéŸ³ç¬¦çš„æ¼”å¥äº‹ä»¶ï¼ˆæŒç»­0.6ç§’ï¼‰
    for note in notes:
        track.append(Message('note_on', note=note, velocity=80, time=0))
        track.append(Message('note_off', note=note, velocity=80, time=600))

    # ä¿å­˜MIDIæ–‡ä»¶
    mid.save(output_file)
    print(f"Då®«è°ƒå¼éŸ³é˜¶MIDIå·²ç”Ÿæˆï¼š{output_file}")

if __name__ == "__main__":
    generate_midi(d_gong_notes)
```

### æ•ˆæœ

- Då®«
	- éŸ³ç¨‹å…³ç³» æ»¡è¶³ å®«è°ƒå¼
	- ä¸»éŸ³ä½ç½® ä¸º D

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250617-1750168470429) 

- æ€»å…±æœ‰å¤šå°‘ç§è°ƒå‘¢ï¼Ÿ

### è°ƒçš„ç±»å‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250618-1750204330210) 

- å»æ€»ç»“ä¸€ä¸‹


### æ€»ç»“
- è¿™æ¬¡æˆ‘ä»¬äº†è§£äº† 
	- ä¸­å›½äº”å£°è°ƒå¼
	- å®«å•†è§’å¾µç¾½  äº”ç§è°ƒå¼ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/4087423/uid1190679-20250618-1750204513980) 

- è°ƒæœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹