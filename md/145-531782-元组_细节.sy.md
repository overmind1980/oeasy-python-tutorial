---
show: step
version: 1.0
enable_checker: true
---

# 列表 - 嵌套 embedded

## 回忆

- 上次我们了解了元组
	- 有了列表为什么还需要有元组呢？
	- 因为元组不可变
	- 列表可变
	- 这就是差异化带来的生存
- python中有三种不可变(immutable)的对象类型
	- int
	- str
	- tuple
- 元组是不是绝对不可变呢？🤔

### 世事无绝对

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220707-1657157522268)

- 不是说tuple是一种内建的不能修改(immutable)的序列么？
- 那这个东西应该怎样理解呢？

### 图示

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220707-1657157636588)

- t 是一个元组 有两个元素构成
	- 第零个元素 t[0] 是一个列表
	- 第一个元素 t[1] 是一个元组
- t[0][1] = "a"
	- 修改的是第零个元素
	- 这个元素是一个列表
	- 列表是可以修改的
	- 把这个列表里面的第一个元素修改为"a"

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220707-1657158115246)

- 修改的不是元组的元素
- 元组元素还是引用的那个列表地址
- 而是元组第零0元素的第1个元素
	- 上图中红框的位置
- 修改的是列表的元素
- 那如何理解列表不能修改呢?

### 不能修改的理解

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220707-1657158207579)

- 元素第零个元素指向这个列表
	- 指向的这个列表可以修改(append、remove...)
- 但是指向的这个列表的这个事情本身不能修改
	- 指向的地址和类型不能修改

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220707-1657158218033)


- 如果元组没有参数会如何呢？



### 初始化
![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285235154)

- 如果元组没有参数
	- 就是一个空元组
- 如果参数是iterable的，元组就根据这些生成
- 如果参数是一个元组
	 - 那么返回值就是同一个对象

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285440585)

- 空的小括号就是一个元组
	- 逗号分割开的数值默认也是元组
	- 没有逗号的话，有括号也不是元组

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220327-1648342586765)

- 其实这经常用来赋值

### 解包

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210915-1631710699925)

- 逗号分割的变量其实是元组
- 把后面这个元组 赋给 前面这个元组
- 前面元组里面两个元素
- 被分别赋值
- 如果前后数量不一致会如何？

### 解包

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210915-1631711090936)

- 前后数量不一致就不行
- 前后经历了一个 unpack 的过程
- 前后 unpack 出的变量数量要相等
- 才建立对应关系
- 可以用其他序列容器初始化元组么？

### 序列容器

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285600995)

- 可以把列表、字符串序列、字节流序列生成元组
- 元组不但内部元素不能修改
- 也不支持添加元素等函数
- 只能是一个只读的列表

### 元组初始化元组

- 用元组初始化元组
- 两个元组指向 heap 空间中同一块地址

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285779728)

- 元组支持什么函数呢？

### 元组函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285828179)

- append、extend、pop、remove、copy、sort 这些修改本体的函数
- 一个没有
- 只支持这两个
  - count
  - index

### 计数函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630285940499)

- 如果有的话就计数
- 没有的话返回 0

### 索引函数

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630286091415)

- 索引函数三个参数
  - 搜索值
  - 开始位置 start
  - 结束位置 stop
- 既然有了索引函数
- 可以使用索引和切片么？

### 索引和切片

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630286391539)

- 切片和索引都可以使用
- 切片的结果还是元组
- 索引的结果是具体元素
- 我们来做一个例子

### 通过年份求属相

```
zodiac = ('鼠','牛','虎','兔','龙','蛇','马','羊','猴','鸡','狗','猪')
year = int(input("please input year:"))
print(zodiac[(year-4)%12])
```

- 十二生肖不能变
- 是比较典型的元组
- 这个编程方法叫做`表驱动`
	- 使用索引的方式代替分值控制语句
	- 想要查询细节直接看驱动表
	- 提高了程序的可读性

```
days = (31,28,31,30,31,30,31,31,30,31,30,31)
print(days[2])
```

- 这样每个月有多少天一目了然
- 元组可以做四则运算么？

### 计算

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630286485814)

- 元组可以进行加法和乘法计算
- 计算的结果还是元组

### 省略写法

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210914-1631604322865)

- 有了个逗号
- 意味着这就是一个元组

### 详细过程

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20211126-1637924978273)

- 这就是计算的分解过程
- 元组可以嵌套么？

### 嵌套

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630287002627)

- 元组是支持嵌套的
- 而且嵌套的元组也可以用索引来定位
- 做个练习

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630287513309)

### 练习

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210830-1630287524903)

- 默认的逗号对应的不是列表
- 而是元组

### 新单词总结

- tuple 元组
- count 计数
- index 索引 


### 总结

- 这次我们了解了元组细节
- 元组不可变指的是
	- 元组元素的数量和引用地址不可变
	- 如果重新赋值
	- 新元组的元素数量和引用地址依然不可变

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220730-1659143429385)

- 还有元组的两个函数
	- 计数count
	- 索引index
- 元组和列表一样
- 都属于序列(sequence)类型
- 还有什么也属于序列类型呢？🤔
- 下次再说 👋