---
show: step
version: 1.0
enable_checker: true
---

# xpath è·¯å¾„è¡¨è¾¾å¼

## å›å¿†

- è¿™æ¬¡æ·±å…¥äº† xpath çš„ç­›é€‰
  - å¯ä»¥ç”¨ä¸­æ‹¬å·ç´¢å¼•çš„æ–¹å¼å¯¹äºå­å…ƒç´ çš„ä½ç½®è¿›è¡Œç­›é€‰
    - ç¬¬ä¸€ä¸ª
      - xpath("//ul/li[0]")
    - æœ€åä¸€ä¸ª
      - xpath("//ul/li[last()]")
    - æ­£æ•°å‰ä¸‰ä¸ª
      - xpath("//ul/li[position()<=3]")
    - å€’æ•°ä¸¤ä¸ª
      - xpath("//ul/li[position()>last()-2"])
  - å¯ä»¥åœ¨ç´¢å¼•ä¸­å¯¹å±æ€§è¿›è¡Œç­›é€‰
    - @ ä¿—ç§°èŠ± a
    - å¯¹åº”@ttribute
    - å¯ä»¥æ‰¾å‡ºæ˜¯å¦æœ‰è¿™ä¸ªå±æ€§
      - et_html.xpath("@lang")
    - ä¹Ÿèƒ½æ‰¾åˆ°å…·ä½“å±æ€§çš„å€¼
      - et_html.xpath("@lang=\\"zh-cn\\"")
  - ä½ç½®ã€å±æ€§ç­›é€‰è¿˜å¯ä»¥é…åˆèŠ‚ç‚¹ç­›é€‰
    - et_target = et_html.xpath("//ul[@id=\\"ulist\\"]")
    - et_target = et_html.xpath("//ul/li[last()]")
- xpath çš„æ–‡æ¡£è¿˜æ²¡æœ‰åˆ·å®Œ
- è¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„å‘¢ï¼ŸğŸ¤”

### å±æ€§æ¯”è¾ƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630566795961)

- æˆ‘ä»¬é¦–å…ˆä¿®æ­£è‡ªå·±çš„ body
- ä¸ºæ¯ä¸ªé£Ÿç‰©æ·»åŠ ä¸€ä¸ªä»·æ ¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630567652670)

- æµè§ˆå™¨å¯ä»¥è¯†åˆ«

### æ·»åŠ æ¯”è¾ƒå±æ€§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568001180)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568053897)

- et_target = et_html.xpath("//li[price>=20]")
  - æ‰¾åˆ° 1 æ¡ li
- et_target = et_html.xpath("//li[price>=15]")
  - æ‰¾åˆ° 2 æ¡ li
- et_target = et_html.xpath("//li[price>=10]")
  - æ‰¾åˆ° 3 æ¡ li

### ç›¸å¯¹è·¯å¾„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568371007)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568001180)

- et_target = et_html.xpath("//li[price<=10]/span")

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568509341)

- 10 å…ƒä»¥å†…çš„é£Ÿå“åç§°
- æ³¨æ„è·å–çš„æ˜¯èŠ‚ç‚¹çš„ text

### é€šé…ç¬¦

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568599049)
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568001180)

- et_target = et_html.xpath("\*")
  - åŒ¹é…å½“å‰èŠ‚ç‚¹(html)ä¸‹çš„èŠ‚ç‚¹
  - å…±ä¸¤ä¸ª headã€body
- et_target = et_html.xpath("//\*")
  - åŒ¹é…å½“å‰èŠ‚ç‚¹(html)ä¸‹çš„å…¨éƒ¨å­å­™èŠ‚ç‚¹
  - ç›¸å½“å¤š
- et*target = et_html.xpath("//*[@_]")
  - åŒ¹é…å½“å‰èŠ‚ç‚¹(html)ä¸‹çš„å…¨éƒ¨æœ‰å±æ€§çš„å­å­™èŠ‚ç‚¹
  - æ•°é‡ç¨æœ‰å‡å°‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568678960)

### è·¯å¾„å¹¶é›†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630569224426)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630568001180)

- et_target = et_html.xpath("//h1|//price")
  - ç¬¦åˆå‰é¢//h1 æˆ–è€…ç¬¦åˆåé¢//price éƒ½å¯ä»¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630569244150)

- åŸºæœ¬ä¸Š xpath çš„ç”¨æ³•æˆ‘ä»¬å¯ä»¥äº†

### xpath çš„æºå¤´

- xpath æ˜¯è°å®šçš„ï¼Ÿ
- ä¸ºä»€ä¹ˆä¼šæœ‰ xpath
- è¿™è¿˜è¦ä»å¤´è¯´èµ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630569561042)

- æ—©å¹´é—´æ–‡æœ¬æ²¡æœ‰ç»Ÿä¸€çš„äº¤æ¢æ ¼å¼
- ä¸ºäº†äº¤æµçš„æ–¹ä¾¿
- å›½é™…æ ‡å‡†åŒ–ç»„ç»‡ iso åˆ¶å®šäº†æ ‡å‡† SGML
- SGML æ˜¯å›½é™…ä¸Šå®šä¹‰ç”µå­æ–‡ä»¶ç»“æ„å’Œå†…å®¹æè¿°çš„æ ‡å‡†
- SGML å…·æœ‰éå¸¸å¤æ‚çš„æ–‡æ¡£ç»“æ„
- ä¸»è¦ç”¨äºå¤§é‡é«˜åº¦ç»“æ„åŒ–æ•°æ®çš„è®¿é—®å’Œå…¶ä»–å„ç§å·¥ä¸šé¢†åŸŸ
- åœ¨åˆ†ç±»å’Œç´¢å¼•æ•°æ®ä¸­éå¸¸æœ‰ç”¨

### SGML

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630569551704)

- åæ¥è¯»å†™æ–‡ä»¶å¼€å§‹ä¾èµ–äºäº’è”ç½‘æµè§ˆå™¨
- ä¸€ç§æ–°çš„äº¤æ¢æ ‡å‡†åœ¨å®è·µä¸­è¯ç”Ÿ

### html

- åœ¨å„ç§ç½‘ç»œæ•°æ®äº¤æ¢å·¥å…·çš„è¯•æ¢ä¸­
- æµè§ˆå™¨å‡ºç°äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630570031771)

- 1989 å¹´ï¼ŒHTML è¯ç”Ÿ,Tim Berners-Lee
- æœ€å…ˆåœ¨è‡ªå·±çš„ next æœºå™¨ä¸Šå»ºç«‹äº†è¿™ç§è¯­è¨€
- å®ƒæŠ›å¼ƒäº† SGML å¤æ‚åºå¤§çš„ç¼ºç‚¹
- ç»§æ‰¿äº† SGML çš„å¾ˆå¤šä¼˜ç‚¹
- HTML æœ€å¤§çš„ç‰¹ç‚¹æ˜¯ç®€å•æ€§å’Œè·¨å¹³å°æ€§
- æµè§ˆå™¨å„ç§å…¼å®¹å’Œè¯•æ–°çš„è¿‡ç¨‹ä¸­è¿›åŒ–

### ç›®å‰çŠ¶æ€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630569932502)

- ä½†æ˜¯ html æ¯•ç«Ÿæ˜¯åŸºäºç½‘é¡µçš„æ ‡ç­¾
- ä¸æ˜¯åŸºäºæ•°æ®çš„
- éšç€æ•°æ®é‡çš„å‘å±•
- xml å‡ºç°äº†

### xml

- HTML æ— æ³•æè¿°æ•°æ®ã€å¯è¯»æ€§å·®ã€æœç´¢æ—¶é—´é•¿
- äººä»¬åˆæŠŠç›®å…‰è½¬å‘ SGML
- å†æ¬¡æ”¹é€  SGML ä½¿ä¹‹é€‚åº”ç°åœ¨çš„ç½‘ç»œéœ€æ±‚
- 1998 å¹´ 2 æœˆ 10 æ—¥ï¼ŒW3C(World Wide Web Consortiumï¼Œä¸‡ç»´ç½‘è”ç›Ÿ)å…¬å¸ƒ XML 1.0 æ ‡å‡†
- XML è¯ç”Ÿäº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630570251257)

- ä¸ºäº†è®© xml çœ‹èµ·æ¥æ›´å¥½çœ‹
- XSLT è§„èŒƒå‡ºç°äº†
- XSLT å¯¹äº xmlï¼Œå°±åƒ css å¯¹äº html
  - xmlã€html
    - æ¥¼æˆ¿ç»“æ„
    - æ˜¯è¯­ä¹‰
  - xsltã€css
    - æ˜¯å…·ä½“çš„æ¥¼æˆ¿è£…ä¿®é£æ ¼
    - æ˜¯å¤–è§‚
- å…¶ä¸­çš„ xpath æ˜¯å…³äº xml å…ƒç´ ç­›é€‰çš„æ ‡å‡†
- xpath çš„æ„æ€ å°±æ˜¯ xml path language

### xpath

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630570677195)

- https://www.w3.org/TR/2010/REC-xpath20-20101214/#context

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630570705394)

### æ€»ç»“

- è¿™æ¬¡æ·±å…¥äº† xpath ä¸­çš„å…ƒç´ é€‰æ‹©
  - å¯ä»¥æ ¹æ®å…ƒç´ å±‚çº§å…³ç³»é€‰æ‹©
  - ä¹Ÿå¯ä»¥æ ¹æ®å…ƒç´ ä½ç½®é€‰æ‹©
  - è¿˜å¯ä»¥æ ¹æ®å±æ€§å…·ä½“å€¼é€‰æ‹©
  - è€Œä¸”å¯ä»¥æ ¹æ®æ–‡æœ¬çš„å€¼è¿›è¡Œé€‰æ‹©
  - ç”šè‡³å¼€å§‹ä½¿ç”¨é€šé…ç¬¦
- xpath æ˜¯æ•´ä¸ªçˆ¬å–çš„æ ¸å¿ƒ
  - æœ‰ä»€ä¹ˆä¸œè¥¿å¯ä»¥ç»ƒä¹ ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´
