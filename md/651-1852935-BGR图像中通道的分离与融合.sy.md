---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬ç ”ç©¶äº†å½©è‰²å›¾ç‰‡çš„æ•°æ®ç»“æ„	
	- ä¸‰ç»´çŸ©é˜µ
		- é«˜åº¦
		- å®½åº¦
		- BGRä¸‰è‰²å…ƒç»„
- å¯ä»¥è‡ªå·±å®šåˆ¶æŸç§ç‰¹æ®Šçš„å›¾åƒ
- ä¹Ÿå¯ä»¥å¤åˆ¶ç°æœ‰å›¾åƒçš„æŸä¸ªçŸ©é˜µèŒƒå›´
- åƒç´ å¯ä»¥è¿›è¡Œåˆ†å‰²å’Œèåˆå—ï¼Ÿ

### åˆ†ç¦»å‡ºé€šé“

```
# -*- coding:utf-8 -*-
import cv2
import numpy as np

#è¯»å–å›¾ç‰‡
img = cv2.imread("monkey.png")
rows, cols, chn = img.shape

#æ‹†åˆ†é€šé“
b = cv2.split(img)[0]

#è®¾ç½®gã€ré€šé“ä¸º0
g = np.zeros((rows,cols), dtype=img.dtype)
r = np.zeros((rows,cols), dtype=img.dtype)

#åˆå¹¶é€šé“
m = cv2.merge([b, g, r])
cv2.imshow("Merge", m)
           
#ç­‰å¾…æ˜¾ç¤º
cv2.waitKey(0)
```

- RGé€šé“ä¸ºçº¯é»‘
- Bé€šé“æ¥è‡ªäºåŸå§‹å›¾åƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240218-1708248063239)

###  è§‚å¯Ÿç´ æ

- åˆ·æ–°è“æ¡¥ç¯å¢ƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704029994335)

- å¾—åˆ°ä¸‹å›¾

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092463583)

- å¯ä»¥æŠŠä¸‹å›¾ä¸­BGRä¸‰é€šé“åˆ†ç¦»å—ï¼Ÿ

### åˆ†ç¦»é€šé“

```
import cv2                               
image = cv2.imread("/home/shiyanlou/rgb.jpg")                      
cv2.imshow("image",image)                
b,g,r = cv2.split(image)                 
cv2.imshow("red",r)                      
cv2.imshow("green",g)                    
cv2.imshow("blue",b)                     
cv2.waitKey()                            
cv2.destroyAllWindows()
```

- åˆ†ç¦»é€šé“æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704030107689)

- å¯ä»¥æŠŠåˆ†ç¦»çš„é€šé“å†åˆæˆå—ï¼Ÿ

### åˆå¹¶é€šé“
```
import cv2     
image = cv2.imread("/home/shiyanlou/rgb.jpg")
cv2.imshow("image",image)
b,g,r = cv2.split(image)
bgr = cv2.merge([b,g,r])
cv2.imshow("bgr",bgr)
rgb = cv2.merge([r,g,b])
cv2.imshow("rgb",rgb)                                              
cv2.waitKey()  
cv2.destroyAllWindows()
```

- å¯ä»¥åˆæˆé€šé“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231231-1704030257277)

- æ¬¡åºä¸åŒä¼šæœ‰ä¸åŒæ•ˆæœ
- å¯ä»¥æŠŠè¿™å¼ å½©è‰²ç…§ç‰‡åç›¸å—ï¼Ÿ

### åç›¸

```
import cv2
image = cv2.imread("/home/shiyanlou/rgb.jpg")
cv2.imshow("image",image)
h,w,c = image.shape
for row in range(h):
    for col in range(w):
        b, g, r = image[row, col]    #ç›´æ¥è¯»å–åˆ°ä¸‰ä¸ªé€šé“çš„å€¼
        b = 255 - b    #å®ç°å›¾åƒè‰²å½©å–åã€‚åƒç´ å€¼èŒƒå›´ä¸º[0,255]
        g = 255 - g    #å®ç°å›¾åƒè‰²å½©å–åã€‚åƒç´ å€¼èŒƒå›´ä¸º[0,255]
        r = 255 - r    #å®ç°å›¾åƒè‰²å½©å–åã€‚åƒç´ å€¼èŒƒå›´ä¸º[0,255]
        image[row, col] = [b, g, r]    #å°†åŸå›¾åƒä¸Šçš„å¯¹åº”åƒç´ å–å
cv2.imshow("nega",image)
cv2.waitKey()
cv2.destroyAllWindows()
```

- æ•ˆæœ
	- ä» å…‰æˆåƒ çš„ RGBä¸‰åŸè‰²
	- å˜æˆäº† å°åˆ·æˆåƒ çš„ CMYKé’å“é»„é»‘

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240113-1705119814010)


- å¯ä»¥æœ‰ä¸é€æ˜åº¦alphaé€šé“å—ï¼Ÿ

### RGBA
```
import cv2   
image = cv2.imread("/home/shiyanlou/rgb.jpg")
bgra_image= cv2.cvtColor(image,cv2.COLOR_BGR2BGRA)
b,g,r,a = cv2.split(bgra_image)
a[:,:] = 50  
bgra_50 = cv2.merge([b,g,r,a])
print(bgra_50)
cv2.imwrite("rgb50.png",bgra_50)
cv2.imshow("bgra_50",bgra_50)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç”¨ç«ç‹æ‰“å¼€æ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704339578862)


### æŠ–éŸ³æ•ˆæœRGBåˆ†ç¦»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092476780)

- ä»£ç 

```
import cv2                                                         
import numpy as np
before = cv2.imread("/home/shiyanlou/tiktok.jpg")
cv2.imshow("before",before)
after = np.zeros((300,300,3),np.uint8)
after[30:300,30:300,0] = before[0:270,0:270,0]
after[30:300,30:300,1] = before[0:270,0:270,1]
after[0:270,0:270,2] = before[30:300,30:300,2]
cv2.imshow("after",after)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704339867056)


### æ€»ç»“

- å›¾åƒä¸ä½†å¯ä»¥ä»åƒç´ çŸ©é˜µçš„æ–¹å¼è¿›è¡Œè£åˆ‡ä¸åˆå¹¶
- è¿˜å¯ä»¥ä»é€šé“çš„è§’åº¦åˆ†ç¦»ä¸åˆå¹¶
- é»˜è®¤çš„çŠ¶æ€å°±æ˜¯BGRä¸‰è‰²é€šé“èåˆ
- å¯ä»¥å°†å…¶ä»–é€šé“çš„ä¿¡æ¯ç‹¬ç«‹ç­›é€‰å‡ºæ¥
- å¯ä»¥åœ¨å›¾åƒæ–‡ä»¶ä¸Šå†™å­—å—ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹