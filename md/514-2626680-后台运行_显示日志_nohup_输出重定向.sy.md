---
show: step
version: 1.0
enable_checker: true
---

# flask æœ€å°åº”ç”¨

## å›å¿†ä¸Šæ¬¡

- ä¸Šæ¬¡äº†è§£äº† 
	- æ¸²æŸ“ æ¨¡æ¿ç›¸å…³çš„é¡µé¢
- å¯ä»¥å°† åå°çš„å˜é‡ 
	- æ¸²æŸ“åˆ° å‰å°çš„é¡µé¢æ¨¡ç‰ˆ ä¸Š
- ä½†æ˜¯æ¯æ¬¡
	- <kbd>ctrl</kbd> + <kbd>c</kbd>åœæ­¢åå°
	- ä¿®æ”¹pyå’Œhtml
	- ç„¶åå†é‡å¯æœåŠ¡å™¨æµç¨‹å¤ªå¤æ‚äº†
- å¯ä»¥ç®€å•ä¸€ç‚¹å—ï¼ŸğŸ¤”

### å¾ªç¯æ¸²æŸ“

- æ¢å¤ç¯å¢ƒ

```
from flask import render_template
from flask import request
from flask import Flask

app = Flask(__name__)

@app.route('/')
def login():
    return render_template('hello.html',nums = range(10))

if __name__ == "__main__":
    app.run(debug=True)
```

- æ³¨æ„è¿™é‡Œdebugæ¨¡å¼
	- ä¸ºTrue

### ç½‘é¡µä»£ç 

```
<!doctype html>
<title>Hello from Flask</title>
{% for num in nums %}
  <h1>Hello {{ num }}!</h1>
{% endfor %}
```

- å¸¸è§„è¿è¡Œ

```
python3 app.py 
```

- ç»“æœè¾“å‡ºåˆ°
	- æ ‡å‡†è¾“å‡ºæµ
- æˆ‘æƒ³è®©ç½‘ç«™æœåŠ¡å™¨ä½œä¸º
	- ä¸€ä¸ªåå°çš„è¿›ç¨‹ 
	- æŒç»­è¿è¡Œ

### ä¿å­˜è¿è¡Œæµè§ˆ

```
nohup python3 app.py >> flask.log 2>&1 &
```

- é¦–å…ˆéœ€è¦è¿è¡Œflask 
	- å¹¶å°† è¾“å‡ºå’ŒæŠ¥é”™ä¿¡æ¯è¾“å‡ºåˆ°æ—¥å¿—

```
firefox http://localhost:5000
```

- ä½¿ç”¨ç«ç‹æµè§ˆç½‘ç«™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20230205-1675591194741)

### è§‚å¯Ÿæ—¥å¿—

```
vi flask.log
```

- å›å¿†logçš„å‘å±•å†ç¨‹
	- ä»åŸæœ¨
	- åˆ°èˆªæµ·æ—¥å¿—
	- å†åˆ°æœåŠ¡å™¨æ—¥å¿—

- Gè·³è½¬åˆ°æœ€åä¸€è¡Œ

### åˆ·æ–°æµè§ˆå™¨

```
firefox http://localhost:5000
```

- é‡æ–°æµè§ˆç½‘é¡µå
- å›åˆ°vimç•Œé¢

### vim

- :e 
	- åˆ·æ–°å½“å‰æ–‡ä»¶ç¼“å­˜
- G
	- åˆ‡æ¢åˆ°æœ€åä¸€è¡Œ
- å‘ç°ç”±äºæœ‰æ–°çš„æµè§ˆè®°å½•
	- æ—¥å¿—æœ‰æ‰€åˆ·æ–°

### ä¿®æ”¹æ–‡æ¡£

```
from flask import render_template
from flask import request
from flask import Flask

app = Flask(__name__)

@app.route('/')
def login():
    return render_template('hello.html',nums = range(5))

if __name__ == "__main__":
    app.run(debug=True)
```

- å°†range(10)ä¿®æ”¹ä¸º
	- range(5)

### è§‚å¯Ÿæ—¥å¿—

- é‡æ–°æ‰“å¼€flask.log

- :e 
	- åˆ·æ–°å½“å‰æ–‡ä»¶ç¼“å­˜
- G
	- åˆ‡æ¢åˆ°æœ€åä¸€è¡Œ
- å‘ç°æœ€æ–°çš„ä¿®æ”¹å·²ç»è¢«è‡ªåŠ¨åŠ è½½

### åˆ·æ–°ç½‘é¡µ

```
firefox http://localhost:5000
```

- é‡æ–°æµè§ˆç½‘é¡µ
	- å‘ç°ç½‘é¡µåå°çš„ä¿®æ”¹
	- å·²ç»å¯ä»¥å‰ç«¯è§‚å¯Ÿåˆ°
- å›åˆ°vimç•Œé¢

### vim

- :e 
	- åˆ·æ–°å½“å‰æ–‡ä»¶ç¼“å­˜
- G
	- åˆ‡æ¢åˆ°æœ€åä¸€è¡Œ
- å‘ç°ç”±äºåˆæœ‰æ–°çš„æµè§ˆè®°å½•
	- æ—¥å¿—åˆæœ‰æ‰€åˆ·æ–°
- æƒ³è¦ç»“æŸè¿›ç¨‹æ€ä¹ˆåŠï¼Ÿ

### ç»“æŸè¿›ç¨‹

```
lsof  -i:5000
```

- æ‰¾åˆ°å ç”¨5000ç«¯å£çš„è¿›ç¨‹

```
kill -9 pid
```

### æ€»ç»“

- è¿™æ¬¡äº†è§£äº† 
	- åå°è¿è¡ŒwebæœåŠ¡å™¨çš„æ–¹æ³•


```
nohup python3 app.py >> flask.log 2>&1 &
```

- è¿è¡Œå
	-  å°†æ—¥å¿—  è¾“å‡ºé‡å®šå‘	
		-  è¿½åŠ åˆ° flask.logä¸­
	- ä»»ä½• æ–‡ä»¶å¤¹çš„å˜åŒ–
		- éƒ½ä¼šè‡ªåŠ¨åŠ è½½åˆ° æœåŠ¡å™¨
		- åŒ…æ‹¬æ¨¡ç‰ˆé¡µ
- å…³äºæ¨¡ç‰ˆ å¯ä»¥æœ‰
	- ç±»åº“æˆ–è€…ç»§æ‰¿ å—ï¼Ÿ
- ä¸‹æ¬¡å†è¯´ï¼
