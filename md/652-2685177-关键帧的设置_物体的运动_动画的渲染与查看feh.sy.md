---
show: step
version: 1.0 
enable_checker: true
---


# python_blender

## å¼€å§‹

- ä¸Šæ¬¡é€šè¿‡pythonè®¾ç½®äº†èˆå°åŸºæœ¬è¦ç´ 
	- ç¯å…‰
	- ç‰©ä½“
	- æ‘„åƒæœº
- å¹¶ä¸”å°†ç»“æœæ¸²æŸ“ä¸ºä¸€å¼ png
- å¯ä»¥è®©ç‰©ä½“åŠ¨èµ·æ¥å—?ğŸ¤”

### æ‰‹åŠ¨è¿åŠ¨

- è®¾ç½®ç»“æŸå¸§ä¸º10

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905031819)

- é€šè¿‡è°ƒæ•´æ»‘æ†
	- æ§åˆ¶æ—¶é—´è½´èŒƒå›´

### è®¾ç½®å¼€å§‹å¸§

- é€‰ä¸­ç¬¬1å¸§
	- é€‰ä¸­ç«‹æ–¹ä½“
	- è®¾ç½®å±æ€§
	- å¹¶ç‚¹å‡»å…³é”®å¸§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905185327)

### è®¾ç½®ç»“æŸå¸§

- é€‰ä¸­ç¬¬10å¸§
	- é€‰ä¸­ç«‹æ–¹ä½“
	- è®¾ç½®å±æ€§
	- å¹¶ç‚¹å‡»å…³é”®å¸§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905313652)

### é¢œè‰²ä½œç”¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240610-1718013676291)

### ç‚¹å‡»æ’­æ”¾

- è§‚çœ‹æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905434166)

- å¯ä»¥æŠŠè¿™10å¸§å¯¼å‡ºå—?

### å¯¼å‡ºè®¾ç½®

- æ§åˆ¶è¾“å‡ºå¤§å°
	- å®½åº¦
	- é«˜åº¦
	- æ—¶é—´èŒƒå›´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905507749)

- è¾“å‡ºç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716905587176)

- å¯ä»¥ç”¨ä»£ç 
	- å®Œæˆä¸Šè¿°æ“ä½œå—?

### åŠ¨ç”»è®¾ç½®

- æ–°å»ºå·¥ç¨‹

```
import bpy

obj = bpy.data.objects["Cube"]
obj.location = (0, 0, 0) 
obj.keyframe_insert(data_path="location", frame=1)  
obj.location = (10, 0, 0)
obj.keyframe_insert(data_path="location", frame=10) 
```

- æ‰§è¡Œåå¯ä»¥è¿åŠ¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240604-1717469862519)

### æ¸²æŸ“è®¾ç½®

```
import bpy
bpy.context.scene.frame_end = 10
bpy.context.scene.render.resolution_x = 400
bpy.context.scene.render.resolution_y = 300
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.render.filepath = "/tmp/r"
bpy.ops.render.render(animation=True)
```

- å¯ä»¥æ¸²æŸ“åŠ¨ç”»

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716906140185)

### æ•´åˆä»£ç 

- æ‰§è¡Œåå¯ä»¥è¿åŠ¨

```
import bpy

obj = bpy.data.objects["Cube"]
obj.location = (0, 0, 0) 
obj.keyframe_insert(data_path="location")  
obj.location = (10, 0, 0)
obj.keyframe_insert(data_path="location", frame=10) 
bpy.context.scene.frame_end = 10
bpy.context.scene.render.resolution_x = 400
bpy.context.scene.render.resolution_y = 300
bpy.context.scene.render.engine = 'CYCLES'
bpy.ops.render.render(animation=True)
```

- è®¾ç½®å¹¶æ¸²æŸ“æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716906267789)

- å¯ä»¥åªè®¾ç½®location.x ä¸Šçš„å…³é”®å¸§å—?

### æ‰‹åŠ¨è¿‡ç¨‹

- æ–°å»ºå·¥ç¨‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716940206911)

- åªè®¾ç½®äº†location.xåœ¨ç¬¬1å¸§çš„æ•°å€¼

### æ’å…¥å…³é”®å¸§

- å¯¹äºCubeè®¾ç½®
	- location.x
	- åœ¨ç¬¬10å¸§çš„å…³é”®å¸§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716940335771)

- ç‚¹å‡»æ’­æ”¾
	- ç‰©ä½“è¿åŠ¨
- å¯ä»¥ç”¨ä»£ç æ¥è®¾ç½®å—?

### ä»£ç è®¾ç½®

- æ–°å»ºå·¥ç¨‹

```
obj = bpy.data.objects["Cube"]
obj.keyframe_insert(
```

- æŒ‰ä¸‹ <kbd> tab </kbd>

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716963191220)

- å¯ä»¥æ§åˆ¶
	- ç¬¬indexä¸ªåˆ†é‡çš„åŠ¨ç”»

### ä»£ç 

- æ–°å»ºå·¥ç¨‹

```
import bpy

obj = bpy.data.objects["Cube"]
obj.location[0] = 0
obj.keyframe_insert('location', index=0)  
obj.location[0] = 10
obj.keyframe_insert(data_path="location",index=0,frame=10) 
bpy.context.scene.frame_end = 10
bpy.context.scene.render.resolution_x = 200
bpy.context.scene.render.resolution_y = 150
bpy.context.scene.render.engine = 'CYCLES'
bpy.context.scene.render.filepath = "/home/shiyanlou/Code/o"
bpy.ops.render.render(animation=True)
```
- è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716989534704)

- æœ‰æ²¡æœ‰èƒ½å¤Ÿçœ‹å›¾ç‰‡åºåˆ—çš„åº”ç”¨å‘¢?

### å®‰è£…åº”ç”¨

```
sudo apt update
yes | sudo apt install feh
feh /home/shiyanlou/Code

```

- ä¸Šä¸‹æ§åˆ¶ç¼©æ”¾
- å·¦å³æ§åˆ¶å¸§å·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716990368167)

- æœ€ç»ˆå›¾ç‰‡åºåˆ—
	- å¯ä»¥ä¸‹è½½å¾—åˆ°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240604-1717471611675)

- ä½†æ˜¯ç›®å‰æœ‰ä¸ªé—®é¢˜

### çœ‹ä¸è§äº†

- ä»6åˆ°10
	- è¿™å‡ å¸§éƒ½çœ‹ä¸åˆ°äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240604-1717471668637)

- æ‘„å½±æœºä½ç½®
	- éœ€è¦è°ƒæ•´

### é‡ä¿®è°ƒæ•´æ‘„å½±æœº

- å…ˆè°ƒæ•´å½“å‰æ´»è·ƒè§†è§’
	- active view

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716990690046)

- å†å°†æ‘„å½±æœºè§†è§’
	- å¯¹é½åˆ°
	- æ´»è·ƒè§†è§’
	- active view

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240529-1716990699412)

- å¯ä»¥ç›´æ¥æ¸²æŸ“æˆè§†é¢‘æ–‡ä»¶å—?

### æ¸²æŸ“æˆè§†é¢‘

- æ§åˆ¶åˆ†è¾¨ç‡
	- å¸§æ•° 

```
import bpy

# è®¾ç½®æ¸²æŸ“è·¯å¾„å’Œæ¸²æŸ“åŠ¨ç”»
bpy.context.scene.render.filepath = "/tmp/house_animation"
bpy.context.scene.render.image_settings.file_format = 'FFMPEG'
bpy.ops.render.render(animation=True)
```

- åšä¸€ä¸ªæ™´å¤©å¨ƒå¨ƒçš„åŠ¨ç”»å§

### æ™´å¤©å¨ƒå¨ƒ

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete() 
bpy.ops.mesh.primitive_uv_sphere_add()
head = bpy.context.object
bpy.context.object.name  = "head"
r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (0, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head
l_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "l_eye"
bpy.context.object.location = (0.7, -0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head
bpy.ops.mesh.primitive_cone_add()
body = bpy.context.object
body.name  = "body"
body.location = (0,0,-1)
body.scale = (1,1,2)
character = bpy.data.objects.new("character", None)
bpy.data.collections["Collection"].objects.link(character)
head.parent = character
body.parent = character
bpy.ops.mesh.primitive_plane_add(size=20)
bpy.context.object.location = (0,0,-3)

camera = bpy.data.cameras.new('Camera')
camera_obj = bpy.data.objects.new('Camera', camera)
bpy.data.collections["Collection"].objects.link(camera_obj)
camera.lens = 50  # Focal length in millimeters
camera.sensor_width = 36  # Sensor width in millimeters
camera.sensor_height = 24  # Sensor height in millimeters
camera_obj.location = (13.6, 5, 10.5)  # X, Y, Z coordinates
camera_obj.rotation_euler = (-2.233,3.14,-1.047)
bpy.context.scene.camera = camera_obj
bpy.ops.object.light_add(type='SPOT', radius=1)
bpy.data.lights["Spot"].energy = 1000
bpy.context.object.location = (6.27,-3.4,2.83)
bpy.context.object.rotation_euler = (1.172,0,0.907)

character.location = (0, 0, 0) 
character.keyframe_insert(data_path="location")  
character.location = (10, 0, 0)
character.keyframe_insert(data_path="location", frame=10) 

bpy.context.scene.frame_end = 10
bpy.context.scene.render.resolution_x = 200
bpy.context.scene.render.resolution_y = 150
bpy.context.scene.render.resolution_percentage = 50
bpy.context.scene.render.engine = 'CYCLES'
bpy.ops.render.render(animation=True)
```

- æ¸²æŸ“æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716906646076)

- è§’è‰²çœŸçš„è·‘äº†

### åŠ¨ç”»ç»¼åˆæ¡ˆä¾‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240618-1718710911434)

```
import bpy
from math import pi,cos,sin
import random

bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete()

#åˆ¶ä½œåœŸåœ°
bpy.ops.mesh.primitive_plane_add(size=100, enter_editmode=False, align='WORLD', location=(25, 25, -2.5), scale=(1, 1, 20))
black = bpy.data.materials.new('black')
color = (0.1, 0.1, 0.1 ,1 )
black.diffuse_color = color
bpy.context.object.data.materials.append(black)

        
#é€‰æ‹©èŠ±ç”°çš„èŠ±æœµçš„æ•°é‡
size = 10
for n1 in range(size):
    for n2 in range(size):
        flower = bpy.data.objects.new("flower", None)
        bpy.data.collections["Collection"].objects.link(flower)
        '''
        #history version
        #å¦‚ä½•å®ç°å¤šå±‚å°è£…ï¼Œè¿™æ ·å¯ä»¥æ§åˆ¶èŠ±çš„ä¸Šéƒ¨åˆ†éšæœºæ–¹å‘è½¬åŠ¨
        #flower_ban = bpy.data.objects.new("flower_ban", None)
        #bpy.data.collections["Collection"].objects.link(flower_ban)
        #bpy.context.object.parent = flower
        '''


        #åˆ¶ä½œèŠ±å¿ƒã€èŠ±æ†ã€èŠ±å¶1ã€èŠ±å¶2
        h = random.random()
        h = h + 3
        bpy.ops.mesh.primitive_uv_sphere_add(radius=1, enter_editmode=False, align='WORLD', location=(0, 0, h), scale=(1.5, 1.5, 0.3))
        bpy.context.object.name = "flower_xin"
        brown = bpy.data.materials.new('brown')
        color = (0.7 ,0.3 ,0.06 ,1 )
        brown.diffuse_color = color
        bpy.context.object.data.materials.append(brown)
        bpy.context.object.active_material.metallic = 1
        bpy.context.object.active_material.specular_intensity = 1
        bpy.context.object.active_material.roughness = 1        
        bpy.context.object.parent = flower
        
        bpy.ops.mesh.primitive_cylinder_add(radius=1, depth=2, enter_editmode=False, align='WORLD', location=(0, 0, 0), scale=(0.2, 0.2, h))
        bpy.context.object.name = "flower_gan"
        green_dark = bpy.data.materials.new('green_dark')
        color = (0,0.5,0.02,1 )
        green_dark.diffuse_color = color
        bpy.context.object.data.materials.append(green_dark)
        bpy.context.object.active_material.metallic = 1
        bpy.context.object.active_material.specular_intensity = 1
        bpy.context.object.active_material.roughness = 1
        bpy.context.object.parent = flower
        
        '''
        #æ²¡æ³•é€‰æ‹©èçƒ
        #bpy.ops.object.metaball_add(type='ELLIPSOID', enter_editmode=False, align='WORLD', location=(0, 0.8, 1), scale=(0.4, 0.1, 1))
        '''
        
        bpy.ops.mesh.primitive_uv_sphere_add(enter_editmode=False, align='WORLD', location=(0, 0.8, 0.8), scale=(0.5, 0.1, 1.2))
        bpy.context.object.rotation_euler[0] = -40/360 * 2* pi
        bpy.context.object.name = "flower_ye1"
        green = bpy.data.materials.new('green')
        color = (0.2,0.6,0.05,1 )
        green.diffuse_color = color
        bpy.context.object.data.materials.append(green)
        bpy.context.object.active_material.metallic = 1
        bpy.context.object.active_material.specular_intensity = 1
        bpy.context.object.active_material.roughness = 1
        bpy.context.object.parent = flower
        
        '''
        #bpy.ops.object.metaball_add(type='ELLIPSOID', enter_editmode=False, align='WORLD', location=(0, -0.8, 1), scale=(0.4, 0.1, 1))
        '''
        
        bpy.ops.mesh.primitive_uv_sphere_add(enter_editmode=False, align='WORLD', location=(0, -0.8, 0.8), scale=(0.5, 0.1, 1.2))
        bpy.context.object.rotation_euler[0] = 40/360 * 2* pi
        bpy.context.object.name = "flower_ye2"
        bpy.context.object.data.materials.append(green)
        bpy.context.object.active_material.metallic = 1
        bpy.context.object.active_material.specular_intensity = 1
        bpy.context.object.active_material.roughness = 1
        bpy.context.object.parent = flower

        #åˆ¶ä½œèŠ±ç“£
        r = 2
        num = 11
        w = random.random()
        for i in range(num):
            theta = i * pi * 2/num
            pos = (r*cos(theta) , r*sin(theta) , h)
            bpy.ops.mesh.primitive_cone_add(enter_editmode=False, align='WORLD', location=pos, scale=(1, 0.3, 0.6))
            bpy.context.object.name = "flower_ban"
            bpy.context.object.parent = flower
            #æ ¹æ®ä¸èŠ±æœµä¸­å¿ƒçš„ä½ç½®å…³ç³»ï¼Œæ¯ä¸ªèŠ±ç“£zè½´æ–¹å‘æ—‹è½¬ä¸åŒåº¦
            bpy.context.object.rotation_euler[2] = (i * pi * 2/num) + 1.57
            #æ¯ä¸ªèŠ±ç“£xè½´æ—‹è½¬éšæœºè§’åº¦ä½¿ä¹‹å¹³èºº #æ‰€æœ‰çš„æ“ä½œéƒ½æ˜¯ä»¥è‡ªå·±ä¸ºä¸­å¿ƒçš„
            bpy.context.object.rotation_euler[0] = 1.57-0.2*(w+1)
            yellow = bpy.data.materials.new('yellow')
            color = (1 ,0.8 ,0 ,1 )
            yellow.diffuse_color = color
            bpy.context.object.data.materials.append(yellow)
            bpy.context.object.active_material.metallic = 1
            bpy.context.object.active_material.specular_intensity = 1
            bpy.context.object.active_material.roughness = 1




        l1 = random.random()
        '''
        #l2 = random.random()# history version
        #ä½ç½®éšæœºç¦»å¤ªè¿‘ä¼šç©¿æ¨¡ï¼Œåº”è¯¥ä½¿ç”¨ç²’å­æ¨¡å‹
        '''
        flower.location.x = n1 * (r * 1.8 + 1) #-(l1-0.5)
        flower.location.y = n2 * (r * 1.8 + 1) #-(l2-0.5)
        #éšæœºè½¬è§’åº¦
        flower.rotation_euler[2] = (w-0.5)*pi
        #éšå³å¤§å°ï¼ŒèŠ±çš„é•¿åº¦ä¸èŠ±çš„å¤§å°æˆæ­£æ¯”
        flower.scale = (l1*0.4+0.8 ,l1*0.4+0.8,l1*0.4+0.8)
        
        # æ’å…¥å…³é”®å¸§ï¼Œåˆ¶ä½œåŠ¨ç”»
        key_point = 20
        for t in range(key_point):
            bpy.context.scene.frame_set(20*t)
            s = random.random()
            rotation_angle_x = (s - 0.5) * 0.02 * pi
            rotation_angle_y = (s - 0.5) * 0.02 * pi
            flower.rotation_euler.rotate_axis('X', rotation_angle_x)
            flower.rotation_euler.rotate_axis('Y', rotation_angle_y)
            flower.keyframe_insert(data_path="rotation_euler", index=0)  # Xè½´
            flower.keyframe_insert(data_path="rotation_euler", index=1)  # Yè½´
            

bpy.ops.object.light_add(type='SPOT', align='WORLD', location=(20, -8, 25), scale=(1, 1, 1))
bpy.context.object.rotation_euler[0] = 0.785
bpy.context.object.rotation_euler = (0.785, 0.785 ,0)
bpy.ops.object.camera_add(enter_editmode=False, align='VIEW', location=(4, 9, 15), rotation=(0.872, 0, -1.046), scale=(1, 1, 1))
bpy.context.object.data.type = 'ORTHO'
bpy.context.object.data.ortho_scale = 35
```


### æ€»ç»“ ğŸ¤”

- è¿™æ¬¡ æˆ‘ä»¬ 
	- è®¾ç½®äº† å…³é”®å¸§
	- åˆ¶ä½œäº† åŠ¨ç”» 
	- å¹¶ä¸”æ¸²æŸ“å‡ºäº† åŠ¨ç”»åºåˆ—
- æˆ‘ä»¬å¯ä»¥è®¾ç½®å˜åŒ–çš„ç¯å…‰å—?ğŸ¤”

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240530-1717030676820)

- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹