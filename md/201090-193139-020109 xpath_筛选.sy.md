---
show: step
version: 1.0
enable_checker: true
---

# è¯­æ³• html ç”Ÿæˆ
## å›å¿†

- æŠŠå‰é¢çš„requestså’Œè¿™ä¸ªetreeç»“åˆäº†
	- é€šè¿‡requestsè·å¾—ç½‘é¡µçš„response
	- etreeé€šè¿‡HTMLå‡½æ•°æŠŠä»–è½¬åŒ–ä¸ºä¸€æ£µetreeæ ‘
	- é€šè¿‡xpathç­›é€‰å‡ºèŠ‚ç‚¹
	- é€šè¿‡å¾ªç¯éå†èŠ‚ç‚¹è¿›è¡Œè¾“å‡º
- æµç¨‹è·‘èµ·æ¥äº†
- ä½†æ˜¯è¿™ä¸ªxpathæœ‰ç‚¹å¤æ‚
- è¦ä»å¤´åˆ°å°¾å†™å¾—è¿™ä¹ˆéº»çƒ¦ä¹ˆï¼Ÿ
- æœ‰ä»€ä¹ˆæŠ€å·§å—ä¹ˆï¼ŸğŸ¤”

### æœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547071875)

- ç‚¹å‡»ç¬¬ä¸€ä¸ªå¼€å§‹ç ”ç©¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547145505)

- xpathæ˜¯w3cåˆ¶å®šçš„
- xpathæ˜¯xsltæ ‡å‡†çš„ä¸»è¦å…ƒç´ 

### è·¯å¾„è¡¨è¾¾å¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547289914)

- è¿™äº›ä¸œè¥¿æ€ä¹ˆç†è§£å‘¢ï¼Ÿ
- æˆ‘è¿›å…¥ç¯å¢ƒç ”ç©¶ä¸€ä¸‹

### æ“ä½œ
- domæ ‘å¦‚ä¸‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547430790)

- æˆ‘ä»¬æ¥è¯•ä¸€ä¸‹å„ç§è·¯å¾„è¡¨è¾¾å¼

### nodename

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547430790)

- å…ˆæ‰¾ä¸ªä¸å­˜åœ¨çš„"oeasy"
- ç„¶åè¾“å‡ºä»–çš„tag

### è¾“å‡º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634447480542)

- ä»€ä¹ˆéƒ½è¾“å‡ºä¸å‡ºæ¥
- å› ä¸ºæ ¹æœ¬å°±æ˜¯ä¸å­˜åœ¨çš„
	- titleé‡Œé¢çš„æ˜¯å…·ä½“æ–‡æœ¬
	- è¿™é‡Œç­›é€‰çš„æ˜¯å…ƒç´ æ ‡ç­¾

```python
import requests
from lxml import etree
response = requests.get("http://localhost/oeasy.html")
s_html = response.text
et_html = etree.HTML(s_html)
target = et_html.xpath("oeasy")
for element in target:
    print(element.tag)
```

### ç›´æ¥å­èŠ‚ç‚¹å
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630547430790)

- target = et_html.xpath("body")
	- å¯ä»¥æ‰¾åˆ° body å…ƒç´ 
- target = et_html.xpath("head")
	- å¯ä»¥æ‰¾åˆ° head å…ƒç´ 
- target = et_html.xpath("ul")
	- ä¸å¯ä»¥æ‰¾åˆ° ul å…ƒç´ 

- è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ

### ç›´æ¥å­èŠ‚ç‚¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630548980094)

- å½“å‰èŠ‚ç‚¹æ˜¯html
	- æœ‰ä¸¤ä¸ªç›´æ¥å­èŠ‚ç‚¹head å’Œ body
	- æ‰€ä»¥åªèƒ½æ‰¾åˆ°è¿™ä¸¤ä¸ª
	- ulã€h1ä¹‹ç±»çš„éƒ½æ‰¾ä¸åˆ°
	- å¦‚æœæƒ³è¦æ‰¾åˆ°çš„è¯
	- åº”è¯¥æ€åŠå‘¢ï¼Ÿ

### å–ç›´æ¥å­èŠ‚ç‚¹/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630549031635)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634447762056)

- target = et_html.xpath("body/ul")
	- å½“å‰èŠ‚ç‚¹ä¸‹æ‰¾body
	- bodyä¸‹æ‰¾ul
- æ‰¾åˆ°äº†
- å¦‚æœæˆ‘æƒ³è·³è¿‡bodyæ‰¾åˆ°ulå¯ä»¥ä¹ˆï¼Ÿ

### å–å­å­™èŠ‚ç‚¹ //

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630549156523)

- ä¸è®ºä¸­é—´æ˜¯å¦éš”äº†bodyæˆ–è€…åˆ«çš„
- åªè¦å­å­™ä¸­æœ‰è¿™æ ·çš„
- å°±å¯ä»¥

- target = et_html.xpath("//ul")
	- å½“å‰èŠ‚ç‚¹ä¸‹æ‰¾ç›´æ¥å­èŠ‚ç‚¹æœ‰æ²¡æœ‰ul
	- åœ¨ç›´æ¥å­èŠ‚ç‚¹bodyä¸‹æ‰¾åˆ°ulå­èŠ‚ç‚¹
	- å¯ä»¥æ‰¾åˆ°
- å¯ä»¥æ‰¾åˆ°liä¹ˆï¼Ÿ
	- æ‰¾åˆ°ä¸‰ä¸ª
	- liç®—æ˜¯æ ¹èŠ‚ç‚¹htmlçš„é‡å­™å­äº†
	- æ€»å…±ä¸‰ä¸ªé‡å­™å­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634447900080)

### å½“å‰èŠ‚ç‚¹ .
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630549715299)

- æŸ¥æ‰¾åˆ°äº†å½“å‰çš„èŠ‚ç‚¹
	- å°±æ˜¯html
- target = et_html.xpath("./body/ul")	
	- ä»å½“å‰èŠ‚ç‚¹å¯ä»¥å¾€ä¸‹æ‰¾åˆ°body
	- ä»bodyå¾€ä¸‹æ‰¾åˆ°ul
- target = et_html.xpath("./body/./ul")
	- ä¹Ÿèƒ½æ‰¾åˆ°ul

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634448117097)

### å‘ä¸Šä¸€å±‚ ..
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630550003428)

- target = et_html.xpath("./html/../head")
	- å¯ä»¥æ‰¾åˆ°head

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211017-1634448166301)

### é€‰å–å±æ€§ @

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210902-1630550057213)

- è¿™ä¸ªæˆ‘ä»¬è¿˜æ²¡æœ‰ 
- å› ä¸ºè¿™ä¸ªhtmlä¸­ç›®å‰ä»»ä½•å…ƒç´ éƒ½æ²¡æœ‰å±æ€§

## æ€»ç»“

- è¿™æ¬¡æ·±å…¥äº†xpath
- xpathå¯ä»¥ç”¨æ¥ç­›é€‰xmlæ–‡ä»¶ä¸­çš„èŠ‚ç‚¹
- xpathæœ‰ä¸€å¥—è‡ªå·±çš„è¯­æ³•
	- nodename ç›´æ¥å­èŠ‚ç‚¹
	- /åœ¨æœ€å‰é¢æ˜¯æ ¹ä¸‹çš„æ„æ€
	- /åœ¨ä¸­é—´æ˜¯ç›®å½•ä¸‹çš„æ„æ€
	- //å­å­™ç»“ç‚¹
	- . å½“å‰èŠ‚ç‚¹
	- .. å‘ä¸Šä¸€å±‚èŠ‚ç‚¹
	- @ å±æ€§
- è¿™ä¸ªå±æ€§æˆ‘ä»¬è¿˜æ²¡æœ‰è¯•è¯•
- æ€ä¹ˆç”¨å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´
