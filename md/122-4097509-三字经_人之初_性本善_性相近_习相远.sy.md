---
show: step
version: 1.0
enable_checker: true
---

# 列表 - 嵌套 embedded

## 回忆

- 上次 给《短歌行》曲 做了伴奏
	- 类似的还有 《观沧海》

![图片描述](https://doc.shiyanlou.com/courses/3584/labs/4096199/uid1190679-20250625-1750810084773) 	

- 四言 传统
	- 从 尧舜禹 / 夏商周 史诗叙事
	- 到 春秋风采 诗经
	- 到 战国故事 四字成语
	- 再到 三国魏晋 骈四骊六
	- 近代的 《百家姓》、《千字文》
	- 一直到 小品中的 四六八句
- 可是 为什么 《三字经》 是 三个字 呢？

### 三言本质

![图片描述](https://doc.shiyanlou.com/courses/3584/labs/4097509/uid1190679-20250626-1750943824941)

- 可以补足 语气助词
	- 人之初啊，性本善呢。
	- 性相近哪，习相远呀。
	- 或者 直接 用一个4分休止符

### 尝试编曲

![图片描述](https://doc.shiyanlou.com/courses/3584/labs/4097509/uid1190679-20250626-1750944731743) 

- 选 徵调式
	- 

### 基础

- 提示词

```
我要使用 Python 配合 mido生成一个旋律。这个旋律呢，是给三字经配的一个旋律。《三字经》里面每一个字都对应其中的一个音符。整体使用四四拍，每小节有四拍。那第一、二、三，三拍对应人之初这三个音符。第四个呢，是一个四分休止符。这是第一句。第二句、第三句、第四句也一样。都是三个音符加上一个休止符。要求这个第四句的这个韵脚，也就是最后一个音符，它落在主音上，整体使用五声调式中的徵调式。先来4个小节。
```

- 生成效果

![图片描述](https://doc.shiyanlou.com/courses/3584/labs/4097509/uid1190679-20250626-1750946088399) 

```
import mido
from mido import Message, MidiFile, MidiTrack
import random

def generate_sanzijing_melody(output_file="sanzijing_melody.mid", segments=1):
    """
    使用mido库为《三字经》生成徵调式旋律
    - 每字对应一个四分音符，每句4小节（3音+1休）
    - 第四句韵脚固定在徵调式主音
    - 生成指定乐段数量
    """
    mid = MidiFile()
    track = MidiTrack()
    mid.tracks.append(track)
    
    # 设置拍号和速度（四四拍，100BPM）
    track.append(Message('set_tempo', tempo=mido.bpm2tempo(100)))
    track.append(Message('time_signature', numerator=4, denominator=4, clocks_per_click=24, notated_32nd_notes_per_beat=8))
    
    # 徵调式五声音阶：G4(67, sol)为主音，五声音阶为G4, A4, C5, D5, E5
    wu_sheng_scale = [67, 69, 72, 74, 76]  # sol, la, do, re, mi
    tonic_note = wu_sheng_scale[0]  # 主音sol，韵脚固定音
    
    # 时间参数：480 ticks/beat（标准MIDI分辨率）
    ticks_per_beat = mid.ticks_per_beat
    quarter_note = ticks_per_beat  # 四分音符时值
    
    current_time = 0  # 当前ticks时间
    
    for seg in range(segments):
        for phrase_idx in range(4):  # 每个乐段4个乐句
            for note_pos in range(3):  # 每乐句3个音符
                # 确定音符：第四句第三音（韵脚）必须为主音
                if phrase_idx == 3 and note_pos == 2:
                    note_num = tonic_note
                else:
                    # 其他位置在五声音阶中选择，保持旋律流畅
                    if phrase_idx == 0 and note_pos == 0:
                        # 第一句首音优先使用主音或宫音（sol或do）
                        note_num = random.choice([wu_sheng_scale[0], wu_sheng_scale[2]])
                    else:
                        # 基于前一音符小范围波动，避免大跳
                        if phrase_idx == 0 and note_pos > 0:
                            # 第一句内部音符衔接
                            prev_note = wu_sheng_scale[note_pos-1]
                            possible_notes = [prev_note]
                            if prev_note + 2 in wu_sheng_scale:
                                possible_notes.append(prev_note + 2)
                            if prev_note - 2 in wu_sheng_scale:
                                possible_notes.append(prev_note - 2)
                            if not possible_notes:
                                possible_notes = wu_sheng_scale
                            note_num = random.choice(possible_notes)
                        else:
                            # 其他乐句随机选择音阶内音符
                            note_num = random.choice(wu_sheng_scale)
                
                # 添加音符开启消息
                track.append(Message('note_on', note=note_num, velocity=64, time=current_time))
                current_time = 0  # 重置时间增量
                
                # 添加音符关闭消息（四分音符时长）
                track.append(Message('note_off', note=note_num, velocity=64, time=quarter_note))
            
            # 每句第4拍休止（四分休止符）
            track.append(Message('note_on', note=0, velocity=0, time=quarter_note))
            current_time = 0  # 重置时间增量
        
        # 乐段间气口：1小节休止（4拍）
        for _ in range(4):
            track.append(Message('note_on', note=0, velocity=0, time=quarter_note))
        current_time = 0  # 重置时间增量
    
    mid.save(output_file)
    print(f"MIDI文件已生成：{output_file}")
    print(f"总乐段数：{segments}")

if __name__ == "__main__":
    # 生成1个乐段（4小节为1乐段）
    generate_sanzijing_melody(segments=1)
```

###  乐段 到 乐章

- 如何 根据这个 乐段 
	- 添加前奏 
	- 添加尾声
	- 添加气口
	- 生成乐章

### 完整三字经
```
《三字经》全文如下：
人之初，性本善。性相近，习相远。
苟不教，性乃迁。教之道，贵以专。
昔孟母，择邻处。子不学，断机杼。
窦燕山，有义方。教五子，名俱扬。
养不教，父之过。教不严，师之惰。
子不学，非所宜。幼不学，老何为。
玉不琢，不成器。人不学，不知义。
为人子，方少时。亲师友，习礼仪。
香九龄，能温席。孝于亲，所当执。
融四岁，能让梨。悌于长，宜先知。
首孝悌，次见闻。知某数，识某文。
一而十，十而百。百而千，千而万。
三才者，天地人。三光者，日月星。
三纲者，君臣义。父子亲，夫妇顺。
曰春夏，曰秋冬。此四时，运不穷。
曰南北，曰西东。此四方，应乎中。
曰水火，木金土。此五行，本乎数。
十干者，甲至癸。十二支，子至亥。
曰黄道，日所躔。曰赤道，当中权。
赤道下，温暖极。我中华，在东北。
寒燠均，霜露改。右高原，左大海。
曰江河，曰淮济。此四渎，水之纪。
曰岱华，嵩恒衡。此五岳，山之名。
古九州，今改制，称行省，三十五。
曰士农，曰工商。此四民，国之良。
曰仁义，礼智信。此五常，不容紊。
地所生，有草木。此植物，遍水陆。
有虫鱼，有鸟兽。此动物，能飞走。
稻粱菽，麦黍稷。此六谷，人所食。
马牛羊，鸡犬豕。此六畜，人所饲。
曰喜怒，曰哀惧。爱恶欲，七情俱。
青赤黄，及黑白。此五色，目所识。
酸苦甘，及辛咸。此五味，口所含。
膻焦香，及腥朽。此五臭，鼻所嗅。
匏土革，木石金。丝与竹，乃八音。
曰平上，曰去入。此四声，宜调协。
高曾祖，父而身。身而子，子而孙。
自子孙，至玄曾。乃九族，人之伦。
父子恩，夫妇从。兄则友，弟则恭。
长幼序，友与朋。君则敬，臣则忠。
此十义，人所同。当师叙，勿违背。
斩齐衰，大小功。至缌麻，五服终。
礼乐射，御书数。古六艺，今不具。
惟书学，人共遵。既识字，讲说文。
有古文，大小篆。隶草继，不可乱。
若广学，惧其繁。但略说，能知原。
凡训蒙，须讲究。详训诂，明句读。
为学者，必有初。小学终，至四书。
论语者，二十篇。群弟子，记善言。
孟子者，七篇止。讲道德，说仁义。
作中庸，乃孔伋。中不偏，庸不易。
作大学，乃曾子。自修齐，至平治。
孝经通，四书熟。如六经，始可读。
诗书易，礼春秋。号六经，当讲求。
有连山，有归藏。有周易，三易详。
有典谟，有训诰。有誓命，书之奥。
我周公，作周礼。著六官，存治体。
大小戴，注礼记。述圣言，礼乐备。
曰国风，曰雅颂。号四诗，当讽咏。
诗既亡，春秋作。寓褒贬，别善恶。
三传者，有公羊。有左氏，有谷梁。
经既明，方读子。撮其要，记其事。
五子者，有荀扬。文中子，及老庄。
经子通，读诸史。考世系，知终始。
自羲农，至黄帝。号三皇，居上世。
唐有虞，号二帝。相揖逊，称盛世。
夏有禹，商有汤。周文武，称三王。
夏传子，家天下。四百载，迁夏社。
汤伐夏，国号商。六百载，至纣亡。
周武王，始诛纣。八百载，最长久。
周辙东，王纲坠。逞干戈，尚游说。
始春秋，终战国。五霸强，七雄出。
嬴秦氏，始兼并。传二世，楚汉争。
高祖兴，汉业建。至孝平，王莽篡。
光武兴，为东汉。四百年，终于献。
魏蜀吴，争汉鼎。号三国，迄两晋。
宋齐继，梁陈承。为南朝，都金陵。
北元魏，分东西。宇文周，与高齐。
迨至隋，一土宇。不再传，失统绪。
唐高祖，起义师。除隋乱，创国基。
二十传，三百载。梁灭之，国乃改。
梁唐晋，及汉周。称五代，皆有由。
炎宋兴，受周禅。十八传，南北混。
辽与金，皆称帝。元灭金，绝宋世。
舆图广，超前代。九十年，国祚废。
太祖兴，国大明。号洪武，都金陵。
迨成祖，迁燕京。十六世，至崇祯。
权阉肆，寇如林。李闯出，神器焚。
清世祖，膺景命。靖四方，克大定。
由康雍，历乾嘉。民安富，治绩夸。
道咸间，变乱起。始英法，扰都鄙。
同光后，宣统弱。传九帝，满清殁。
革命兴，废帝制。立宪法，建民国。
古今史，全在兹。载治乱，知兴衰。
史虽繁，读有次。史记一，汉书二。
后汉三，国志四。兼证经，参通鉴。
读史者，考实录。通古今，若亲目。
口而诵，心而惟。朝于斯，夕于斯。
昔仲尼，师项橐。古圣贤，尚勤学。
赵中令，读鲁论。彼既仕，学且勤。
披蒲编，削竹简。彼无书，且知勉。
头悬梁，锥刺股。彼不教，自勤苦。
如囊萤，如映雪。家虽贫，学不辍。
如负薪，如挂角。身虽劳，犹苦卓。
苏老泉，二十七。始发奋，读书籍。
彼既老，犹悔迟。尔小生，宜早思。
若梁灏，八十二。对大廷，魁多士。
彼既成，众称异。尔小生，宜立志。
莹八岁，能咏诗。泌七岁，能赋棋。
彼颖悟，人称奇。尔幼学，当效之。
蔡文姬，能辨琴。谢道韫，能咏吟。
彼女子，且聪敏。尔男子，当自警。
唐刘晏，方七岁。举神童，作正字。
彼虽幼，身已仕。有为者，亦若是。
犬守夜，鸡司晨。苟不学，曷为人。
蚕吐丝，蜂酿蜜。人不学，不如物。
幼而学，壮而行。上致君，下泽民。
扬名声，显父母。光于前，裕于后。
人遗子，金满籝。我教子，唯一经。
勤有功，戏无益。戒之哉，宜勉力。
```


### 总结
- 这次研究了 
	- 三言古诗《三字经》
	- 成于宋代
- 唐代文化 就有 唐诗
	- 五言古诗 
- 为什么会有 五言古诗 呢？
- 下次再说 👋