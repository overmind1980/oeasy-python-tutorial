---
show: step
version: 1.0
enable_checker: true
---

# ç±»å‹æç¤º(type hint)

## å›å¿†

- ä¸Šæ¬¡å­¦ä¹ äº†mypy
- å¯ä»¥å¯¹pythonæ–‡ä»¶è¿›è¡Œé™æ€ç±»å‹æ£€æŸ¥
	- è¯´å¥½äº†æ˜¯intçš„
	- å°±ä¸€å®šæ˜¯intçš„
	- çœŸçš„è®¤çœŸåšæ£€æŸ¥
- ä¸è¿‡é‡åˆ°æœªçŸ¥çš„æ¨¡å—è°ƒç”¨
	- è¿˜æ˜¯ä¼šæ‰§è¡Œçš„
	- æ¯•ç«Ÿæ£€æŸ¥å’Œè¿è¡Œæ˜¯ä¸¤å›äº‹
	- ä½ ä¹Ÿä¸çŸ¥é“åˆ«äººæ€ä¹ˆç”¨ä½ çš„è¿™ä¸ªå‡½æ•°
	- ä½ ä¹Ÿä¸çŸ¥é“äººå®¶ä¼ è¿‡æ¥ä»€ä¹ˆå®å‚
- é™¤äº†é™æ€ç±»å‹æ£€æŸ¥
	- å¯ä»¥è®©pythonæ–‡ä»¶æ›´åŠ è§„èŒƒä¸€äº›ä¹ˆï¼Ÿ


### pylint 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220827-1661600186878)

- pylint
	- python çš„ linter
- ä»€ä¹ˆæ˜¯linterå‘¢ï¼Ÿ

### linter

- lint
	- å°±æ˜¯ç»’æ¯›

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220827-1661600626176)

- è¡£æœä¸Šæœ‰å¾ˆå¤šçŒ«æ¯›ã€ç‹—çŒ«
- ä¸å¤ªä¸¥è‚ƒ
- ç”¨linterç»™æ»šä¸‹æ¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220827-1661600796085)

- è¡£æœä¸Šçš„å¤§å°æ¯›ç—…(Error)
- ç”šè‡³å°ç‘•ç–µ(Warning)
- éƒ½èƒ½ç»™æŒ‘å‡ºæ¥
- ä¸ºä»€ä¹ˆå«åšlinterå‘¢ï¼Ÿ

### å›åˆ°1969å¹´


- Stephen Curtis Johnson

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220827-1661604689501)

- 5å²å¼€å§‹æ¥è§¦ç”µè„‘	
	- ä»–çš„çˆ·çˆ·æ˜¯ç»Ÿè®¡å±€çš„
	- è·Ÿä»–è¯´è¿‡è¿™ä¹ˆå¥è¯
>Well, we can now send a message around the world in 1/7 of a second, but it still takes 20 years for that same message to go through 1/4 inch of human skull!â€™ 

- ä»–åæ¥å»äº†çœŸé‡‘æ—¶ä»£çš„è´å°”å®éªŒå®¤
- æ˜¯æ ¸å¿ƒæˆå‘˜
- å†™äº†ä¸‰ä¸ªä¸œè¥¿
	-  YACC
	-  Portable C Compiler
	-  Lint(ç²˜æ¯›å™¨)  
- æˆ‘ä»¬å…ˆçœ‹çœ‹ç›®å‰çš„ä»£ç 

### ä»£ç 

```
from typing import Set
def get_factor_set(num: int) -> Set[int]:
    s: Set[int] = {1}
    for i in range(2, num + 1):
        if num % i == 0:
            s.add(i)
    return s

def gcd(n1: int, n2: int) -> Set[int]:
    s1: Set[int] = get_factor_set(n1)
    s2: Set[int] = get_factor_set(n2)
    common_devisor_set: Set[int] = s1.intersection(s2)
    return max(common_devisor_set)

print(gcd(3600,4096))
```

- è¿™ä¸ªä»£ç å¯ä»¥è¿è¡Œ
- è¯•ä¸€ä¸‹è¿™ä¸ªlinter

### pylint

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661645152498)

- æœ‰å„ç§é—®é¢˜
- åˆ†æˆä¸åŒçº§åˆ«

### é—®é¢˜çº§åˆ«
- å±‚æ¬¡æ¸…æ™°ï¼Œä»ä½åˆ°é«˜
	- æƒ¯ç”¨æ³•
		- C convention related checks for coding standard violation
	- é‡æ„ç›¸å…³
		- R refactoring related checks
	- è­¦å‘Šâš ï¸
		- W various warnings
	- é”™è¯¯
		- E errors, for probable bugs in the code
	- è‡´å‘½
		- F fatal, if an error occurred which prevented pylint from doing further processing

- ä¸€ä¸ªä¸ªæ”¹

### ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661654424578)

- æ²¡æœ‰æ¨¡å—æ–‡æ¡£å­—ç¬¦ä¸²
- ä¹Ÿæ²¡æœ‰å‡½æ•°æ–‡æ¡£å­—ç¬¦ä¸²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661658030480)

- ä¿®æ”¹å®Œæˆ
- ç»§ç»­

### ç»§ç»­ä¿®æ”¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661658299914)

- éƒ½æ˜¯å˜é‡å‘½åæ³•çš„é—®é¢˜
- è¦æ±‚è›‡å½¢å‘½å

```
"""this is gcd module"""
from typing import Set
def get_factor_set(num: int) -> Set[int]:
    """get factor set from num """
    set_temp: Set[int] = {1}
    for i in range(2, num + 1):
        if num % i == 0:
            set_temp.add(i)
    return set_temp

def gcd(num_1: int, num_2: int) -> Set[int]:
    """ get gce from two numbers"""
    set_1: Set[int] = get_factor_set(num_1)
    set_2: Set[int] = get_factor_set(num_2)
    common_devisor_set: Set[int] = set_1.intersection(set_2)
    return max(common_devisor_set)

print(gcd(3600,4096))
```

- ä¿®æ”¹æ‰äº†æ‰€æœ‰ç‘•ç–µ
- æœ€ç»ˆå¾—åˆ°10åˆ†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661658235397)

- è°è¦æ±‚çš„å‘¢?

### pep0008

- è¿™æ˜¯ä¸€ä¸ªå…³äºç¼–ç¨‹é£æ ¼çš„æ–‡æ¡£
- å¯ä»¥å†³å®šä»£ç çš„å‘³é“(smells)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220828-1661688092724)

- ä»å„ç±»æ ‡è¯†ç¬¦
- åˆ°å‡½æ•°ä¹‹é—´ä¸­é—´ç©ºå‡ è¡Œ
- è§„çŸ©å¾ˆå¤š
- è€Œä¸”è¶Šæ¥è¶Šç»†
- å¦‚æœé€šè¿‡äº†pylint
- å°±æ˜¯ç¬¦åˆè¿™ä¸ªç¼–ç è§„èŒƒçš„

### mypy vs pylint

- mypyæ˜¯é™æ€ç±»å‹æ£€æŸ¥
	- æ£€æŸ¥çš„æ˜¯æ•°æ®ç±»å‹
- pylintæ˜¯é™æ€ä»£ç åˆ†æå·¥å…·
	- åˆ†æä»£ç é”™è¯¯
	- åˆ†æä»£ç é£æ ¼
	- åˆ†æå¾—æ¯”è¾ƒä¸¥æ ¼
	- ç±»ä¼¼çš„è¿˜æœ‰flake8
		- ä¹Ÿæ˜¯åŸºäºpep8å¯¹ä»£ç åšé™æ€åˆ†æ
- å¦‚ä½•ç†è§£é™æ€å‘¢ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220829-1661738554613)

- 1 + "1" æ˜¯åŠ¨æ€(dynamic)è¿è¡Œæ—¶(runtime)æ‰èƒ½å‘ç°é”™è¯¯çš„
- é™æ€(static)åˆ†æ(analyze)å‘ç°ä¸äº†é”™è¯¯
- é‚£æœ‰æ²¡æœ‰åŠ¨æ€ä»£ç åˆ†æå·¥å…·å‘¢ï¼Ÿ

### åŠ¨æ€ä»£ç åˆ†æ

- æœ‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220829-1661739293022)

- åŠ¨æ€(dynamic)ä»£ç åˆ†æ(analyze)å¯ä»¥åˆ†æè¿è¡Œæ—¶(runtime)çš„ä»£ç 
- åªæœ‰è¿è¡Œçš„æ—¶å€™æ‰èƒ½è¿›è¡Œ
- ä¸€èˆ¬ç”¨pythonè¿è¡Œä»£ç 
- çœ‹pythonæŠ¥é”™
- æ‰€ä»¥åŠ¨æ€ä»£ç åˆ†æå·¥å…·å°±æ˜¯python
- å›§rz

### æ€»ç»“

- æˆ‘ä»¬è¿™æ¬¡ç ”ç©¶äº†pylint
	- lintæ˜¯ç²˜æ¯›å™¨
	- å¯ä»¥æŠŠå¾ˆå¤šå°æ¯›ç—…ç²˜å‡ºæ¥
	- ä¸€ä¸ªä¸ªæ”¹
	- æŒ‘æ¯›ç—…çš„ç†ç”±æ˜¯pep8
	- éƒ½æ”¹å¥½äº†å°±ç»Ÿä¸€äº†ä»£ç è§„èŒƒ
- pythonè¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„ä¹ˆï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ğŸ‘‹