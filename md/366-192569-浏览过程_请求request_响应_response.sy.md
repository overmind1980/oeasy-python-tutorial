---
show: step
version: 1.0
enable_checker: true
---

# å¯¼å…¥ request åŒ…

## æ–°çš„å¼€å§‹

- ç°åœ¨å°±è¦æ·±å…¥å­¦ä¹  python çˆ¬è™«äº†
	- æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿ
	- é¦–å…ˆéœ€è¦å®‰è£…ä¸€ä¸ª http æœåŠ¡å™¨
- æˆ‘ä»¬å¯ä»¥ä»ã€Šoeasy æ•™æ‚¨ç©è½¬ linuxã€‹ä¸­
	- æ‰¾åˆ°`nginx`è¿™ä¸ªå®éªŒ

### nginx

- é¦–å…ˆè¦å¼€å¯ nginx
  - nginx æ˜¯ä¸€ä¸ªé™æ€ç½‘é¡µæœåŠ¡å™¨
  - ngin çš„æ„æ€æ˜¯ engine x
  - æ˜¯ä¸€ä¸ªé™æ€ç½‘é¡µçš„å¼•æ“


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668769671876/wm)

- æœåŠ¡å¯åŠ¨å®Œæˆä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949090031)

- è¯•ç€ç”¨æµè§ˆå™¨è®¿é—® localhost

### è®¿é—®ç½‘é¡µ

- åœ¨åœ°å€æ ä¸­è¾“å…¥http://localhost
	- æ³¨æ„æ˜¯httpè€Œä¸æ˜¯http`s`
		- æ²¡æœ‰`s`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949192013)

- èƒ½è®¿é—®è‡ªå®šä¹‰çš„ç½‘é¡µä¹ˆï¼Ÿ

### æ‹·è´æ–‡ä»¶

- git clone http://gitee.com/overmind1980/oeasypython.git
	- æºæ–‡ä»¶åœ¨oeasypython/samples/020101/oeasy.html æ‰¾åˆ°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668755504216)

- æˆ‘ä»¬è¦æŠŠè¿™ä¸ªæ–‡ä»¶æ‹·è´åˆ°ç½‘é¡µæœåŠ¡å™¨çš„æ ¹ç›®å½•ä¸‹

### ç½‘é¡µçš„æ ¹ç›®å½•

- ç½‘é¡µæœåŠ¡å™¨æ ¹ç›®å½•åœ¨å“ªå‘¢ï¼Ÿ
    - `whereis nginx`
	- /usr/share/nginx/html/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668756096801)

- sudo cp oeasypython/samples/020101/oeasy.html /usr/share/nginx/html
	- sudo ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ
	- cp æ‹·è´
	- æŠŠçº¢è‰²çš„ä¸‹è½½åˆ°çš„ç½‘é¡µ
	- æ”¾åˆ°é»„è‰²çš„ç½‘ç«™æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹

### æµè§ˆè¿‡ç¨‹

- æµè§ˆå™¨å¯ä»¥è®¿é—®åˆ°
	- http://localhost/oeasy.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949467471)

### æ£€æŸ¥å…ƒç´ 

- F12 æ£€æŸ¥å…ƒç´ 
	- é€‰æ‹©ç½‘ç»œ Networks

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949720315)

- å¦‚æœ<kbd>F12</kbd>æ²¡æœ‰ç”¨çš„è¯
	- åœ¨é”®ç›˜æœ€ä¸‹é¢ä¸€è¡Œæ‰¾åˆ°<kbd>Fn</kbd>é”®
	- <kbd>Fn</kbd>+<kbd>F12</kbd>
- å®åœ¨ä¸è¡Œå³é”®
	- æ£€æŸ¥å…ƒç´ ä¹Ÿå¯ä»¥æ‰¾åˆ°
- ç„¶ååˆ·æ–°

### åˆ·æ–°

- F5 ä¹Ÿå¯ä»¥åˆ·æ–°
	- åˆ·æ–°åä¼šçœ‹åˆ°ç½‘ç»œä¸­çš„çš„
		- è¯·æ±‚ requests
		- å“åº” response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406249941)

- é€‰ä¸­ oeasy.html æ–‡ä»¶
	- è¿™ä¸ªæ–‡ä»¶å°±æ˜¯é€šè¿‡ 
		- http get ä¸­çš„è¯·æ±‚å’Œå“åº”çš„å¾—åˆ°çš„
- è¯·æ±‚å°±æ˜¯ 
	- request
- å“åº”å°±æ˜¯ 
	- response

### è¯·æ±‚ request

- é¦–å…ˆä»æµè§ˆå™¨å‘å‡ºä¸€ä¸ª`http get`è¯·æ±‚(request)
  - http
    - è¶…æ–‡æœ¬ä¼ è¾“åè®®
		- hyper-text transmit protocol
    - æ˜¯ç½‘ç»œä¼ è¾“ä¸­ä½¿ç”¨çš„åè®®
  - get
    - æ˜¯å¾—åˆ°ç›¸åº”æ–‡ä»¶çš„æ–¹æ³•
    - é™¤äº†getä¹‹å¤–è¿˜æœ‰postç­‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406366911)

- è¿™æ˜¯ä»ç«ç‹æµè§ˆå™¨å‘å‡ºçš„è¯·æ±‚
- è¯·æ±‚é‡Œé¢åŒ…æ‹¬ä¸€äº›ä»€ä¹ˆå‘¢ï¼Ÿ

### è¯·æ±‚å¤´ request head
- ç«ç‹æµè§ˆå™¨ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€äº›è¯·æ±‚å¤´
  - Accept-Language
    - è¯·æ±‚çš„è¯­è¨€
  - Host
    - è¯·æ±‚çš„ä¸»æœº
  - User-Agent
    - è¯·æ±‚çš„æµè§ˆå™¨
- nginx æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚ä¹‹å
	- å°±ä¼šè¿›è¡Œå¤„ç†
	- å°±åƒè·‘å ‚çš„æœåŠ¡å‘˜ä¼šå¤„ç†å®¢äººè¦æ±‚ä¸€æ ·
	- æŠŠå®¢äººçš„éœ€æ±‚æç»™åå°æœåŠ¡å™¨
- åå°æœåŠ¡å™¨æ ¹æ®å®¢äººè¦æ±‚å¾—åˆ°ä¸€ä¸ªå›åº”é¡µ
	- nginx å°±æŠŠè¿™ä¸ª `å›åº”é¡µ` ä½œä¸º `è¯·æ±‚Request `çš„ `å“åº”Response`
    - ç„¶åè¿™ä¸ªå›åº”é¡µå°±è¿”å›åˆ°æµè§ˆå™¨äº†

### å“åº” Response

- æœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„ä¸œè¥¿
	- å¤„ç†åå‘å›æµè§ˆå™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406600963)

- æµè§ˆå™¨ä¼šå…ˆæ¥åˆ°å“åº”å¤´
  - Contentâ€”Type
    - æ¥æ”¶æ–‡ä»¶ç±»å‹
    	- htmlå°±åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“
    	- zipå°±ç›´æ¥ä¸‹è½½
  - Contentâ€”Length
    - å†…å®¹å­—èŠ‚é•¿åº¦
  - Date
    - æ¥æ”¶æ—¶é—´
  - Server
    - æœåŠ¡å™¨
### å®Œæˆ

- è¿™ä¸ªè¿‡ç¨‹å®Œæˆäº†
  - æ•´ä¸ª http get ä¼šå¾—åˆ°ä¸€ä¸ªçŠ¶æ€ç (Status_Code)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406753249)

- Get è¯·æ±‚å¾—åˆ°äº†å“åº”
  - çŠ¶æ€ç æ˜¯ 200
  - æ„æ€æ˜¯ OK
- è¿˜æœ‰ä»€ä¹ˆåˆ«çš„çŠ¶æ€ç ä¹ˆï¼Ÿ

## æ€»ç»“

- æˆ‘ä»¬å®‰è£…äº† nginx æœåŠ¡å™¨
	- ä½¿ç”¨æµè§ˆå™¨è®¿é—®äº†æœåŠ¡å™¨ä¸Šçš„ç½‘é¡µ
- æµè§ˆå™¨å‘é€äº†è¯·æ±‚
	- request
- æœåŠ¡å™¨å›åº”äº†å“åº”
	- response
- æœ€ç»ˆçŠ¶æ€ç 
  - 200 æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630412050376)

- è¿˜æœ‰å…¶ä»–çŠ¶æ€ç å—ï¼ŸğŸ¤£
- ä¸‹æ¬¡å†è¯´ğŸ‘‹
