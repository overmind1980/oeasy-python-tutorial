---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - æ·±æ‹·è´ deepcopy

## å›å¿†

- ä¸‰ç§ èµ‹å€¼çš„ æƒ…å†µ 
  - = 
	- ç›´æ¥ å¤åˆ¶å˜é‡åœ°å€
  - æµ…æ‹·è´ 
	- æ–°å»ºåˆ—è¡¨
	- å¤åˆ¶ ç¬¬ä¸€å±‚åˆ—è¡¨é¡¹
  - æ·±æ‹·è´ 
	- æ–°ç”³è¯·ç©ºé—´
	- å½»åº•åšä¸€ä¸ªæ–°çš„å‰¯æœ¬
	- æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½å¤åˆ¶å‡ºæ¥
	- è¿™å°±æ˜¯æ·±æ‹·è´æ‰€è°“æ·±çš„åœ°æ–¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669712354030)

- å¦‚æœ æ˜¯ å¤šç»´åˆ—è¡¨çš„è¿ç®— å‘¢ï¼Ÿ
	- å†…å­˜ä¸­çš„æ ·å­ æ˜¯ å¦‚ä½•çš„ å‘¢ï¼ŸğŸ¤”

### ç›´æ¥ç›¸åŠ 

```
import copy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = l_people + l_people
print(id(l_people2),id(l_people2[0]))
l_people[0][1] = 90
```

- å°†ç›¸åŠ ç»“æœè¿›è¡Œèµ‹å€¼
	- https://pythontutor.com/visualize.html#mode=edit

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669714963590)

- `l_people` + `l_people` 
	- ç¡®å®ä¼šåˆ†é… ä¸€ä¸ªæ–°çš„ åˆ—è¡¨ç©ºé—´
	- æ–°ç©ºé—´ ç›¸å½“äº `l_people` çš„ 2å€
	- ä½†å¤åˆ¶çš„ ä»…ä»…æ˜¯ åˆ—è¡¨åœ°å€
	- åº•å±‚ æŒ‡å‘ åŒä¸€ä½ç½®
	- è¿˜æ˜¯ä¸€æ”¹å…¨æ”¹
- å¯åŠ¨æ·±æ‹·è´æ¨¡å¼

### æ·±æ‹·è´

```
from copy import deepcopy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = deepcopy(l_people) + l_people
print(id(l_people2),id(l_people2[0]))
l_people[0][1] = 90
```

- ä»copyä¸­å¯¼å…¥deepcopy

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669715299295)

- ä½¿ç”¨äº†deepcopyçš„
	- åˆ†é…äº† æ–°çš„ å†…å­˜ç©ºé—´
- æ²¡ä½¿ç”¨deepcopyçš„ 
	- å°± ä¸åˆ†é…

### éƒ½ç”¨deepcopy

```
from copy import deepcopy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = deepcopy(l_people) + l_people
print(id(l_people2),id(l_people2[0]))
l_people[0][1] = 90
```

- deepcopy

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669715451325)

- è¿™æ¬¡ éƒ½ç”¨äº† deepcopy
	- éƒ½åˆ†é…äº† æ–°çš„ç©ºé—´
- é‚£ä¹˜æ³•å‘¢ï¼Ÿ

### ä¹˜æ³•

```
import copy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = l_people * 2
print(id(l_people2),id(l_people2[0]))
l_people[0][1] = 90
```

- ç›´æ¥ä¹˜æ³•
	- ç„¶åç›´æ¥èµ‹å€¼

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669715561284)

- ä¸ç”¨deepcopy
	- è¿˜æ˜¯ ç›´æ¥å¼•ç”¨ åœ°å€

### ä½¿ç”¨deepcopy

```
import copy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = deepcopy(l_people) * 2
```

- deepcopy ç¡®ä¿ åˆ†é… æ–°ç©ºé—´
	- ä½†æ˜¯ æ–°ç©ºé—´ è¢«é‡å¤å¼•ç”¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669715790112)

- æƒ³è¦éƒ½
	- åˆ†é…æ–°ç©ºé—´

### è¿˜æ˜¯å¾—éƒ½ç”¨deepcopy

```
import copy
l_oeasy = ["oeasy", 80]
l_o2z = ["o2z", 85]
l_people = [l_oeasy, l_o2z]
print(id(l_people),id(l_people[0]))
l_people2 = deepcopy(l_people) + deepcopy(l_people) 
```

- deepcopy

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221129-1669715451325)

- å¤šç»´åˆ—è¡¨å¯ä»¥ç”¨ä¹˜æ³•å—ï¼Ÿ

### åˆ—è¡¨åµŒå¥—

```
x = [[0]]
x = x * 3
x
x[0].append(1)
x
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/763906/uid1190679-20250116-1736997813545) 

- x æœ€å¼€å§‹ å°±æ˜¯ åˆ—è¡¨
  - xçš„ åˆ—è¡¨é¡¹ è¿˜æ˜¯åˆ—è¡¨
  - æœ€é‡Œé¢çš„åˆ—è¡¨ å…ƒç´ ä¸º 0
- ç„¶å x ä¹˜ä»¥ 3
  - å¾—åˆ° [[0],[0],[0]]
- x[0]æ˜¯[0]
	- æ·»åŠ  1 ä¹‹åæ˜¯[0,1]
- å¯æ˜¯ä¸ºä»€ä¹ˆ 
	- x[1]ã€x[2]ä¹Ÿéƒ½æ˜¯ Â [0,1]å‘¢ï¼Ÿ

### è§‚å¯Ÿ

- x =[[0]]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210914-1631623686937)

- x = x \* 3

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210914-1631623716306)

- x æ˜¯ä¸€ä¸ªåˆ—è¡¨
	- x åˆ—è¡¨é‡Œé¢æœ‰ 3ä¸ªåˆ—è¡¨é¡¹
	- 3ä¸ªå…ƒç´  éƒ½æ˜¯ åˆ—è¡¨
	- éƒ½å¼•ç”¨ åŒä¸€ åˆ—è¡¨åœ°å€
	- è¢«å¼•ç”¨åˆ—è¡¨è¿™ä¸ªåˆ—è¡¨ çš„å€¼ æ˜¯ x[0]
- æˆ‘å¯ä»¥çœ‹åˆ°è¿™ä¸ªåœ°å€å—ï¼Ÿ

### è§‚å¯Ÿåœ°å€

```
x[0]
id(x[0])
id(x[1])
id(x[2])
```

- ç¡®å®å¼•ç”¨çš„æ˜¯
	- åŒä¸€ä¸ªåœ°å€ç©ºé—´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221130-1669774157923)

- è¿™æ€ä¹ˆè¿½åŠ (append)å‘¢ï¼Ÿ

### è¿½åŠ  append

- å…³é”®çš„ä¸€æ­¥æ¥äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210914-1631623810957)

- x[0].append(1)
	- x[0] é™„åŠ  append äº† 1
	- x[0]ã€x[1]ã€x[2]æŒ‡å‘åŒä¸€ä½ç½®
	- ç­‰äº ä»–ä»¬ ä¸‰ä¸ª éƒ½è¿½åŠ äº†
- æ‰€ä»¥ x å°±æ˜¯
  - [[0, 1], [0, 1], [0, 1]]
- å¦‚æœæˆ‘æ¢ä¸€ç§æ–¹å¼åˆå§‹åŒ–xå‘¢ï¼Ÿ

### æ–°æƒ…å†µ

```
x = [[0], [0], [0]]
x[0].append(1)
x
```

- è¿™å’Œåˆšæ‰
	- å®Œå…¨ä¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/763906/uid1190679-20250116-1736998009071) 

### åŸå› åˆ†æ

- è¿™æ¬¡xçš„ä¸‰ä¸ªåˆ—è¡¨é¡¹
	- æ¥è‡ªäºå®Œå…¨ä¸åŒçš„ä¸‰ä¸ªåœ°å€
	- å’Œä¸Šæ¬¡ä¹˜æ³•çš„æ¥æºä¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211126-1637924709657)

- å›å¿†ä¹˜æ³•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210914-1631623493488)

- å› ä¸ºx[0]ã€x[1]ã€x[2]å¼•ç”¨åŒæ ·çš„åœ°å€
	- æ‰€ä»¥ ä¸€æ”¹å…¨æ”¹

- åˆ—è¡¨è¿˜æœ‰ä¸€ç§è¿ç®—æ–¹å¼
	- å«åšç¼åˆ(zip)

### ç¼åˆ(zip)

```
l1 = [1, 2, 3]
l2 = [4, 5, 6]
l3 = list(zip(l1, l2))
l3
```

- zip å¯ä»¥æŠŠè‹¥å¹²åˆ—è¡¨åŒä¸€ä½ç½®çš„å…ƒç´ å‹åœ¨ä¸€èµ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/763906/uid1190679-20250117-1737080258621) 

- æŠŠä¸¤ä¸ªåˆ—è¡¨é‡ŒåŒæ ·ä½ç½®çš„å…ƒç´ 
	- ç¼åˆåœ¨ä¸€èµ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210915-1631698233000)

### æ€»ç»“

- æˆ‘ä»¬äº†è§£äº† å¤šç»´åˆ—è¡¨è¿ç®—
	- åŠ æ³•è¿ç®—
		- åŠ æ³•çš„ç»“æœ ä¼šäº§ç”Ÿ æ–°çš„åˆ—è¡¨ç©ºé—´
		- ä½† å¤šç»´çš„åˆ—è¡¨å¼•ç”¨åº•å±‚ è¿˜æ˜¯åŸæ¥çš„åœ°å€
		- å¯ä»¥ ç”¨ æ·±æ‹·è´(deepcopy) åˆ¶ä½œ å…¨æ–° é«˜ç»´ åˆ—è¡¨
	- ä¹˜æ³•è¿ç®—
		- ä¹˜æ³•çš„æœ¬è´¨ æ˜¯ ç´¯åŠ 
		- å¤šç»´ åˆ—è¡¨çš„ä¹˜ç§¯ çš„åº•å±‚ è¿˜æ˜¯ åŸæ¥çš„åœ°å€
		- å¯ä»¥ ç”¨ æ·±æ‹·è´(deepcopy) åˆ¶ä½œ å…¨æ–° å¤šç»´ åˆ—è¡¨
	- ç¼åˆæ“ä½œ
		- æŠŠä¸¤ä¸ªåˆ—è¡¨é‡ŒåŒæ ·ä½ç½®çš„å…ƒç´ 
		- ç¼åˆåœ¨ä¸€èµ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/763906/uid1190679-20250117-1737080258621) 

- ç¼åˆé‡Œ å‡ºç°çš„å°æ‹¬å· 
	- è¯¥`æ€ä¹ˆ`ç†è§£å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹
