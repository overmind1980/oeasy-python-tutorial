---
show: step
version: 1.0
enable_checker: true
---

# è¯­æ³• html ç”Ÿæˆ
## å›å¿†

- ä¸Šæ¬¡å¯ä»¥é€šè¿‡å­—ç¬¦ä¸²æ„å»ºä¸€æ£µetreeäº†
- è¿™æ£µæ ‘å¯ä»¥åˆ é™¤ç©ºæ ¼
- å¯ä»¥æ§åˆ¶è¾“å‡ºçš„ç¼©è¿›
- æˆ‘èƒ½å¤ŸæŠŠå‰é¢çš„requestså’Œè¿™ä¸ªetreeç»“åˆèµ·æ¥å—
	- é€šè¿‡requestè·å¾—ç½‘é¡µ
	- é€šè¿‡etreeæŠŠä»–è½¬åŒ–ä¸ºä¸€æ£µetreeæ ‘
- å¯ä»¥ä¹ˆï¼ŸğŸ¤”ğŸ¤”

### æ•´åˆ
- requests

```
import requests
response = requests.get("http://localhost/")
s_html = response.content
```
- etree

```
from lxml import etree
html = etree.HTML("<root>  <a/>   <b>  </b>     </root>")
etree.tostring(html)
```

### æ•´åˆ

```
import requests
from lxml import etree
response = requests.get("http://localhost/oeasy.html")
s_html = response.content
et_html = etree.HTML(s_html)
print(etree.tostring(et_html))
```

- æˆ‘æ˜¯å¯ä»¥ç”Ÿæˆetreeçš„
- ä½†æ˜¯æ•´ä¸ªç½‘é¡µéƒ½ä¸‹æ¥äº†
- æˆ‘éœ€è¦çš„æ˜¯å…¶ä¸­çš„ä¸‰ç§é£Ÿç‰©
- å¦‚ä½•ç­›é€‰å‘¢ï¼Ÿ
- xpath

### å›å¿†xpath

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210901-1630506661307)

```
build_text_list = etree.XPath("//text()") # lxml.etree only!
print(build_text_list(html))
```

### å°è¯•é€‰æ‹©

```
import requests
from lxml import etree
response = requests.get("http://localhost/oeasy.html")
s_html = response.content
et_html = etree.HTML(s_html)
food = et_html.xpath("//html/body/ul/li")
print(food)
```

- xpathé€‰æ‹©çš„æ˜¯
- htmlä¸‹é¢çš„
- bodyä¸‹é¢çš„
- ulä¸‹é¢çš„li

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210901-1630506938012)

- ç¡®å®æ‰¾åˆ°äº†ä¸‰ä¸ªli

### ä¹˜èƒœè¿½å‡»

```
from lxml import etree
response = requests.get("http://localhost/oeasy.html")
s_html = response.content
et_html = etree.HTML(s_html)
food = et_html.xpath("//html/body/ul/li")
print(food)
for element in food:
    print(element.text)
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210901-1630507138409)

- è¯•éªŒæˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210901-1630507176668)

## æ€»ç»“

- æŠŠå‰é¢çš„requestså’Œè¿™ä¸ªetreeç»“åˆäº†
	- é€šè¿‡requestè·å¾—ç½‘é¡µ
	- é€šè¿‡etreeæŠŠä»–è½¬åŒ–ä¸ºä¸€æ£µetreeæ ‘
	- é€šè¿‡xpathç­›é€‰å‡ºèŠ‚ç‚¹
	- é€šè¿‡å¾ªç¯éå†èŠ‚ç‚¹è¿›è¡Œè¾“å‡º
- æµç¨‹è·‘èµ·æ¥äº†
- ä½†æ˜¯è¿™ä¸ªxpathæœ‰ç‚¹å¤æ‚
- è¦ä»å¤´åˆ°å°¾å†™å¾—è¿™ä¹ˆéº»çƒ¦ä¹ˆï¼Ÿ
- æœ‰ä»€ä¹ˆæŠ€å·§å—ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´
