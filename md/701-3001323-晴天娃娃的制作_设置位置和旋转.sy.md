---
show: step
version: 1.0 
enable_checker: true
---


# python_blender

## å¼€å§‹

- ä¸Šæ¬¡æˆ‘ä»¬åˆ¶ä½œäº†
	- æ¸å˜é¢œè‰²çš„çƒ
	- éšæœºé¢œè‰²çš„çƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716858925397)

- æƒ³åšä¸ªæ™´å¤©å¨ƒå¨ƒ
	- æ€ä¹ˆåšå‘¢ï¼ŸğŸ¤”

### åˆ¶ä½œä¸‰ä¸ªçƒä½“

- ç™½è‰²çš„ä¸ºå¤´éƒ¨
- é»‘è‰²çš„ä¸ºçœ¼çƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716079897637)

- çœ¼çƒ å‚æ•°
	- ä¸€ä¼šå„¿è¦ç”¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716079933923)

- å¦‚ä½•ä½¿ç”¨ä»£ç ç”Ÿæˆ?

### ä»£ç ç”Ÿæˆå¤´éƒ¨

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete() 
head = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "head"
```

- ç”Ÿæˆå¤´éƒ¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716080296272)

### ç”Ÿæˆå·¦çœ¼

```
import bpy

bpy.ops.object.select_all(action="SELECT") # é€‰æ‹©æ‰€æœ‰ç‰©ä½“
bpy.ops.object.delete() # åˆ é™¤é€‰å®šçš„ç‰©ä½“
head = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716081739529)

- å‡†å¤‡ä¸Šè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716081891814)

### ä¸Šè‰²

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete()
head = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (0, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716083834390)

### å¦ä¸€åªçœ¼ç›

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete() 
head = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (1, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)


l_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "l_eye"
bpy.context.object.location = (0.7, -0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
bpy.context.object.data.materials.append(mat)
```

- çº¢çœ¼ç›çš„æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716084510596)

- å¯ä»¥æ§åˆ¶å±‚æ¬¡ç»“æ„å—?

### å±‚æ¬¡ç»“æ„

- å·¦å³çœ¼å¯¹è±¡
	- éš¶å±äº è„‘è¢‹ 

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete() 
bpy.ops.mesh.primitive_uv_sphere_add()
head = bpy.context.object
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (1, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head

l_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "l_eye"
bpy.context.object.location = (0.7, -0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716084834691)

- å·¦çœ¼ã€å³çœ¼ ä¸¤ä¸ªå¯¹è±¡
	- æˆä¸º head çš„å­—å¯¹è±¡

### å¢åŠ ä¸€ä¸ªèº«ä½“

- æ·»åŠ ä¸€ä¸ªåœ†é”¥ä½“

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240528-1716858961196)

- å¹¶ä¿®æ”¹å‚æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716085007598)

- å°†æ·»åŠ  èº«ä½“åœ†é”¥ çš„æ“ä½œ
	- è½¬åŒ–ä¸º ä»£ç 

### ä»£ç åŒ–

```
import bpy

bpy.ops.object.select_all(action="SELECT")
bpy.ops.object.delete() 
bpy.ops.mesh.primitive_uv_sphere_add()
head = bpy.context.object
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (0, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head

l_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "l_eye"
bpy.context.object.location = (0.7, -0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head

bpy.ops.mesh.primitive_cone_add()
body = bpy.context.object
body.name  = "body"
body.location = (0,0,-1)
body.scale = (1,1,2)
```

- å¯ä»¥åŠ ä¸Š åŒæ‰‹å’ŒåŒè„šå—?
- å¯ä»¥å¸¦ä¸Š å¸½å­ æˆ–è€… çœ¼é•œå—?
- å¯ä»¥ æ·»åŠ  é¼»å­å’Œè€³æœµå—?
- è¿™ä¸ªä»»åŠ¡å°±äº¤ç»™ä½ äº†

### å†å°è£…

- ç°åœ¨åœºæ™¯ä¸­æœ‰ä¸¤ä¸ªå¯¹è±¡
	- head
	- body

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240605-1717566178766)

- å¯ä»¥æŠŠèº«ä½“å’Œå¤´éƒ¨	
	- æ•´åˆæˆä¸€ä¸ª è§’è‰² å—?	 

### å†å°è£…

- æŠŠheadã€body
	- å°è£…è¿› character

```
import bpy

bpy.ops.object.select_all(action="SELECT") 
bpy.ops.object.delete()  
bpy.ops.mesh.primitive_uv_sphere_add()
head = bpy.context.object
bpy.context.object.name  = "head"

r_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "r_eye"
bpy.context.object.location = (0.7, 0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
mat = bpy.data.materials.new('mat_eye')
color = (0, 0, 0, 1)
mat.diffuse_color = color
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head

l_eye = bpy.ops.mesh.primitive_uv_sphere_add()
bpy.context.object.name = "l_eye"
bpy.context.object.location = (0.7, -0.5, 0.3)
bpy.context.object.scale = (0.3, 0.3, 0.3)
bpy.context.object.data.materials.append(mat)
bpy.context.object.parent = head

bpy.ops.mesh.primitive_cone_add()
body = bpy.context.object
body.name  = "body"
body.location = (0,0,-1)
body.scale = (1,1,2)

character = bpy.data.objects.new("character", None)
bpy.data.collections["Collection"].objects.link(character)
head.parent = character
body.parent = character
```

- åˆ¶ä½œæˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240519-1716105840478)

- å¯ä»¥å°è£…æˆå‡½æ•°å—?

### å‡½æ•°

```
import bpy

def clear_scene():
    bpy.ops.object.select_all(action="SELECT")
    bpy.ops.object.delete()

def create_material(name, color):
    mat = bpy.data.materials.new(name)
    mat.diffuse_color = color
    return mat

def create_eye(name, location, parent):
    bpy.ops.mesh.primitive_uv_sphere_add()
    eye = bpy.context.object
    eye.name = name
    eye.location = location
    eye.scale = (0.3, 0.3, 0.3)
    
    # Add black material
    if not bpy.data.materials.get('mat_eye'):
        mat = create_material('mat_eye', (0, 0, 0, 1))
    else:
        mat = bpy.data.materials['mat_eye']
    eye.data.materials.append(mat)
    
    eye.parent = parent
    return eye

def create_character():
    # Create empty parent object
    character = bpy.data.objects.new("character", None)
    bpy.data.collections["Collection"].objects.link(character)
    
    # Create head
    bpy.ops.mesh.primitive_uv_sphere_add()
    head = bpy.context.object
    head.name = "head"
    head.parent = character
    
    # Create eyes
    create_eye("r_eye", (0.7, 0.5, 0.3), head)
    create_eye("l_eye", (0.7, -0.5, 0.3), head)
    
    # Create body
    bpy.ops.mesh.primitive_cone_add()
    body = bpy.context.object
    body.name = "body"
    body.location = (0, 0, -1)
    body.scale = (1, 1, 2)
    body.parent = character
    
    return character

if __name__ == "__main__":
    clear_scene()
    create_character()
```

- å¯ä»¥åˆ©ç”¨å·¦å³çœ¼ç›çš„å¯¹ç§°æ€§æ¥åšå—?

### åˆ©ç”¨å¯¹ç§°æ€§

```
import bpy

def clear_scene():
    bpy.ops.object.select_all(action="SELECT")
    bpy.ops.object.delete()

def create_material(name, color):
    mat = bpy.data.materials.new(name)
    mat.diffuse_color = color
    return mat

def create_eye(name, location, parent):
    bpy.ops.mesh.primitive_uv_sphere_add()
    eye = bpy.context.object
    eye.name = name
    eye.location = location
    eye.scale = (0.3, 0.3, 0.3)
    
    # Add black material
    if not bpy.data.materials.get('mat_eye'):
        mat = create_material('mat_eye', (0, 0, 0, 1))
    else:
        mat = bpy.data.materials['mat_eye']
    eye.data.materials.append(mat)
    
    eye.parent = parent
    return eye

def create_character():
    # Create empty parent object
    character = bpy.data.objects.new("character", None)
    bpy.data.collections["Collection"].objects.link(character)
    
    # Create head
    bpy.ops.mesh.primitive_uv_sphere_add()
    head = bpy.context.object
    head.name = "head"
    head.parent = character
    
    # Create eyes
    for pos in [-0.5, 0.5]:
	    create_eye("r_eye", (0.7, pos, 0.3), head)

    # Create body
    bpy.ops.mesh.primitive_cone_add()
    body = bpy.context.object
    body.name = "body"
    body.location = (0, 0, -1)
    body.scale = (1, 1, 2)
    body.parent = character
    return character

if __name__ == "__main__":
    clear_scene()
    create_character()
```

### æ›´å¤šå¯èƒ½æ€§

- åŒè…¿

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3001323/uid1190679-20250212-1739319943323)

### åŒè„š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3001323/uid1190679-20250212-1739319969889) 

### å¸½å­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3001323/uid1190679-20250212-1739319995906) 

### ç¿…è†€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3001323/uid1190679-20250212-1739320012622) 

### å‚æ•°åŒ–ç”Ÿæˆæ¯›æ¯›è™«

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/3001323/uid1190679-20250211-1739243295570) 

```
import bpy
import mathutils

# æ¸…é™¤åœºæ™¯ä¸­çš„æ‰€æœ‰ç‰©ä½“
bpy.ops.object.select_all(action='SELECT')
bpy.ops.object.delete(use_global=False)

# åˆ›å»ºæ¯›æ¯›è™«çš„å‡½æ•°
def create_caterpillar(segment_count, segment_radius, segment_distance, color):
    # åˆ›å»ºææ–™
    mat = bpy.data.materials.new(name="CaterpillarMaterial")
    mat.diffuse_color = color  # è®¾ç½®é¢œè‰²

    # åˆ›å»ºæ¯›æ¯›è™«çš„æ¯ä¸ªéƒ¨åˆ†
    for i in range(segment_count):
        bpy.ops.mesh.primitive_uv_sphere_add(radius=segment_radius, location=(i * segment_distance, 0, 0))
        obj = bpy.context.object
        obj.data.materials.append(mat)  # å°†ææ–™åº”ç”¨åˆ°å¯¹è±¡ä¸Š

    # åˆ›å»ºçœ¼ç›
    eye_color = (0.0, 0.0, 0.0, 1.0)  # çœ¼ç›é¢œè‰²ï¼ˆé»‘è‰²ï¼‰
    eye_radius = segment_radius * 0.2  # çœ¼ç›å¤§å°
    eye_distance = segment_radius * 0.5  # çœ¼ç›ä¹‹é—´çš„è·ç¦»

    # åˆ›å»ºå·¦çœ¼
    bpy.ops.mesh.primitive_uv_sphere_add(radius=eye_radius, location=(-0.3, eye_distance, segment_radius * 0.5))
    left_eye = bpy.context.object
    left_eye.data.materials.append(mat)

    # åˆ›å»ºå³çœ¼
    bpy.ops.mesh.primitive_uv_sphere_add(radius=eye_radius, location=(-0.3, -eye_distance, segment_radius * 0.5))
    right_eye = bpy.context.object
    right_eye.data.materials.append(mat)

    # è®¾ç½®çœ¼ç›é¢œè‰²
    eye_mat = bpy.data.materials.new(name="EyeMaterial")
    eye_mat.diffuse_color = eye_color
    left_eye.data.materials[0] = eye_mat
    right_eye.data.materials[0] = eye_mat

    # åˆ›å»ºè„š
    foot_color = (0.0, 0.0, 0.0, 1.0)  # è„šçš„é¢œè‰²ï¼ˆé»‘è‰²ï¼‰
    foot_radius = segment_radius * 0.1  # è„šçš„åŠå¾„
    foot_length = segment_radius * 0.8  # è„šçš„é•¿åº¦

    # ä¸ºæ¯ä¸ªèº«ä½“æ®µæ·»åŠ å·¦å³è„š
    for i in range(segment_count):
        # å·¦è„š
        bpy.ops.mesh.primitive_cylinder_add(radius=foot_radius, depth=foot_length, 
                                            location=(i * segment_distance, segment_radius * 1.2, -segment_radius * 0.5),
                                            rotation=(mathutils.Vector((0, 0, 1)).rotation_difference(mathutils.Vector((0, 1, 0))).to_euler()))
        left_foot = bpy.context.object
        left_foot.data.materials.append(mat)

        # å³è„š
        bpy.ops.mesh.primitive_cylinder_add(radius=foot_radius, depth=foot_length, 
                                            location=(i * segment_distance, -segment_radius * 1.2, -segment_radius * 0.5),
                                            rotation=(mathutils.Vector((0, 0, 1)).rotation_difference(mathutils.Vector((0, 1, 0))).to_euler()))
        right_foot = bpy.context.object
        right_foot.data.materials.append(mat)

        # è®¾ç½®è„šçš„é¢œè‰²
        foot_mat = bpy.data.materials.new(name="FootMaterial")
        foot_mat.diffuse_color = foot_color
        left_foot.data.materials[0] = foot_mat
        right_foot.data.materials[0] = foot_mat

# è®¾ç½®æ¯›æ¯›è™«çš„å‚æ•°
segment_count = 10  # æ¯›æ¯›è™«èº«ä½“çš„æ®µæ•°
segment_radius = 0.5  # æ¯ä¸ªæ®µçš„åŠå¾„
segment_distance = 1.0  # æ®µä¹‹é—´çš„è·ç¦»
caterpillar_color = (0.0, 1.0, 0.0, 1.0)  # ç»¿è‰²ï¼Œæ ¼å¼ä¸º(R, G, B, Alpha)

# åˆ›å»ºæ¯›æ¯›è™«
create_caterpillar(segment_count, segment_radius, segment_distance, caterpillar_color)
```

### æ€»ç»“ ğŸ¤”

- è¿™æ¬¡æˆ‘ä»¬åˆ¶ä½œäº†
	- æ™´å¤©å¨ƒå¨ƒ
- å¯ä»¥æ§åˆ¶æ‘„åƒæœº 
	- ä»ä¸åŒè§’åº¦æ‹æ‘„ä»–å—?
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹
