---
show: step
version: 1.0
enable_checker: true
---

# åˆ—è¡¨ - åˆ‡ç‰‡ - èµ‹å€¼ - assignment

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶çš„æ˜¯del åˆ é™¤
	- å¯ä»¥ åˆ é™¤åˆ—è¡¨é¡¹
	- ä¹Ÿå¯ä»¥ åˆ é™¤åˆ‡ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/529966/uid1190679-20241108-1731068958974) 

- å°±åƒæ‹©èœä¸€æ ·

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669113091247)

- æ‹©å‡ºå»çš„èœ åˆ° å“ªå„¿å»äº† å‘¢ï¼ŸğŸ¤” 

### åœ°å€

- è‹±é›„åˆ—è¡¨
	- åˆ˜å…³å¼ 
	- https://pythontutor.com/render.html#mode=display

```
hero_list = ["åˆ˜å¤‡", "å…³ç¾½", "å¼ é£"]
print(hero_list)
del hero_list[1:2]
print(hero_list)
```

- å¸§æ ˆ(Frame)ä¸Š åªèƒ½çœ‹è§ hero_list
	- hero_list å­˜çš„æ˜¯ å¼•ç”¨çš„åœ°å€(id)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/745546/uid1190679-20250330-1743321214278/wm) 

- å †å¯¹è±¡ç©ºé—´(heap)ä¸Š ç”³è¯·äº† å†…å­˜ 
	- hero_list[0] 
	- hero_list[1]
	- hero_list[2]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/745546/uid1190679-20250330-1743321349898/wm) 

- del åˆ—è¡¨åˆ‡ç‰‡å
	- å †å¯¹è±¡ç©ºé—´(heap)ä¸Š é‡Šæ”¾äº†hero_list[1]å†…å­˜
	- åˆ—è¡¨ è¿˜å‰© 2ä¸ªåˆ—è¡¨é¡¹
	- å¸§æ ˆ(Frame)ä¸Š è¿˜æ˜¯ åªèƒ½çœ‹è§ hero_list
- å¦‚æœ æŠŠåˆ‡ç‰‡ç»“æœ	
	- èµ‹ç»™ `æ–°`å˜é‡ å‘¢ï¼Ÿ

### è§‚å¯Ÿ

```
l1 = list(range(10))
l2 = l1[0:10:2]
l3 = l1[1:10:2]
l4 = l1[1:9:3]
l5 = l1[3:10:3]
```

- åˆ‡ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630224932111)

- åˆ‡ç‰‡åˆ‡å®Œäº†ä¹‹å
	- æŠŠåˆ‡ç‰‡ä¿¡æ¯ç»™ä¸€ä¸ªåˆ—è¡¨å˜é‡
		- è¿™ä¸ªåˆ‡ç‰‡å°±ä¿ç•™ä¸‹æ¥äº†
- å¦‚æœåˆ‡ç‰‡ æ²¡æœ‰è¢«èµ‹ç»™ä»»ä½•å¯¹è±¡
	- ä¹Ÿå°±æ¶ˆå¤±äº†
- ä¿®æ”¹åˆ‡ç‰‡
	- ä¼šå½±å“åŸå§‹åˆ—è¡¨å—ï¼Ÿ

### ä¿®æ”¹åˆ‡ç‰‡

```
l1 = [0, 1, 2 ,3]
l2 = l1[1:3]
l2.append(4)
```

- æ–°åˆ‡ç‰‡
	- æœ‰è‡ªå·±çš„ç©ºé—´
- å¯¹æ–°åˆ‡ç‰‡å¯¹è±¡çš„æ“ä½œ
	- ä¸å½±å“åŸæ¥çš„åˆ‡ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669121650271)

- é‚£å¦‚ä½• è®©åˆ—è¡¨ äº’ç›¸å½±å“ å‘¢ï¼Ÿ

### äº’ç›¸å½±å“

- è®©l1ã€l2æŒ‡å‘åŒä¸€ä¸ªåœ°å€ç©ºé—´

```
l1 = list("oeasy")
l2 = l1
l1.append("?")
l1.append("!")
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669123282969)

- ä¸ºå•¥l1ã€l2ä¼šç›¸äº’å½±å“ï¼Ÿ

### id

- å› ä¸ºä»–ä»¬æ ¹æœ¬å°±æ˜¯åŒä¸€ä¸ª åˆ—è¡¨
	- å»çœ‹çœ‹ å…·ä½“åœ°å€

```
l1 = list("oeasy")
print(l1,id(l1))
l2 = l1
print(l2,id(l2))
l1.append("?")
l1.append("!")
print(id(l1) == id(l2))
```

- l1ã€l2 å¼•ç”¨çš„æ˜¯
	- åŒä¸€ä¸ªåˆ—è¡¨å¯¹è±¡åœ°å€
	- æ‰€ä»¥ä¸è®ºè°append
	- éƒ½ä¼šappendåˆ°è¿™ä¸ªåˆ—è¡¨ä¸Š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/745546/uid1190679-20250109-1736405121155) 

- å¯ä»¥æŸ¥åˆ°
	- è¿™åˆ—è¡¨ è¢«å¼•ç”¨çš„ `å‡ æ¬¡` å—ï¼Ÿ

### getrefcount

- getrefcountå¯ä»¥å¾—åˆ° å †heapä¸­çš„ å¯¹è±¡
	- åˆ°åº•ç”± å‡ ä¸ªå˜é‡å è¿›è¡Œå¼•ç”¨

```
import sys
l1 = list("oeasy")
l2 = l1
print(sys.getrefcount(l1))
```

- æ˜æ˜æ˜¯ l1 
	- 1ä¸ªå˜é‡å¼•ç”¨å•Š
	- æœ€å¤š l2 ä¹Ÿå¼•ç”¨
	- 2 ä¸ª

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/745546/uid1190679-20250109-1736406082988) 

- ä¸ºä»€ä¹ˆæ˜¾ç¤ºä¸º3å‘¢ï¼Ÿ

### å¸®åŠ©æ‰‹å†Œ

```
help(sys.getrefcount)
```

- æœ¬æ¥ åº”è¯¥æ˜¯2ä¸ª
	- ä½†æ˜¯ç”±äºè¿™ä¸ªå‡½æ•°è°ƒç”¨çš„æ—¶å€™
	- åœ¨å‡½æ•°å†…éƒ¨è¿˜æœ‰ä¸€ä¸ªå‚æ•° ä¹Ÿå¼•ç”¨äº†è¿™ä¸ªä½ç½®
	- æ‰€ä»¥ä¼šæ¯”æƒ³è±¡åœ°å˜é‡å¤š 1

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210905-1630830139942)

- å–æ¶ˆå¼•ç”¨
	- è¢«å¼•ç”¨æ•° ä¼šå‡å°‘ å—ï¼Ÿ

### å–æ¶ˆå¼•ç”¨

- æ¯æ¬¡getrefcountè¢«è°ƒç”¨çš„æ—¶å€™
	- ä¸´æ—¶å¢åŠ ä¸€ä¸ªå¼•ç”¨
	- è°ƒç”¨å®Œäº†å°±é‡Šæ”¾

```
import sys
l1 = [1, 2, 3]
print(sys.getrefcount(l1))
l2 = l1
print(sys.getrefcount(l1))
l2 = []
print(sys.getrefcount(l1))
```


- è¿™æ—¶å€™ l2å¼•ç”¨ åˆ«çš„åœ°å€
	- é‚£l1 åº”ç”¨æ•° å°±ä¼šå‡ä¸€

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669123647436)

- ç›®å‰ å¦‚æœl2 å’Œ l1 åº”ç”¨ åŒä¸€ä½ç½®
	- é‚£ä¹ˆ ä»–ä¿©å°±ä¼šä¸€æ”¹å…¨æ”¹
	- æœ‰ä»€ä¹ˆåŠæ³•ä¸è¦ ä¸€æ”¹å…¨æ”¹å—ï¼Ÿ

### copy

- å»ºç«‹å‰¯æœ¬
	- å°±æ˜¯æ‹·è´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220728-1658976784346)

- è¿™ä¸ªå•è¯æºäº
	- ä¸­ä¸–çºªæ—¶å€™æŠ„å†™æ–‡å­—

- å½±å“åˆ° åæ¥çš„ 
	- å¤å°æœº å’Œ å¤å°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/3584/labs/745546/uid1190679-20250110-1736495557746) 

- èƒ¶ç‰‡æ—¶ä»£
	- è¡¨ç¤ºèƒ¶ç‰‡çš„æ‹·è´
	- åˆ¶ç‰‡å…¬å¸å…¶å®å–çš„æ˜¯æ‹·è´

### éªŒè¯

- åˆ°äº†ç”µè„‘æ—¶ä»£
	- å¤åˆ¶å‘½ä»¤å°±æ˜¯c(o)p(y)
- åˆ—è¡¨ å’Œ åˆ—è¡¨çš„æ‹·è´ 
	- å¼•ç”¨ä¸åŒçš„ä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210829-1630210778781)

- è¿™ ä¸¤ä¸ªåˆ—è¡¨ åœ°å€ä¸ç›¸åŒå—ï¼Ÿ

### ç¡®ä¿

- è§‚å¯Ÿ id
	- idä¸åŒ
	- å¼•ç”¨çš„æ˜¯ ä¸åŒç©ºé—´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669124490608)

- è¿˜æœ‰ å…¶ä»–åˆ¶ä½œå‰¯æœ¬çš„ æ–¹æ³•å—ï¼Ÿ

### ä½¿ç”¨æ„é€ å‡½æ•°

- ä½¿ç”¨listçš„æ„é€ å‡½æ•°
	- æ ¹æ®l1å†æ„é€ ä¸€ä¸ªl2

```
l1 = [1, 2, 3]
l2 = list(l1)
print(id(l1), id(l2))
```

- id ä¹Ÿä¸åŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669124730716)

- è¿˜æœ‰ åˆ¶ä½œå‰¯æœ¬çš„ æ–¹æ³• å—ï¼Ÿ

### ä½¿ç”¨å®Œå…¨åˆ‡ç‰‡

```
l1 = [1, 2, 3]
l2 = l1[:]
print(id(l1), id(l2))
```

- ç¡®å®idä¹Ÿä¸åŒ


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221122-1669124769593)

- ç›®å‰ å°±æ˜¯ è¿™ä¸‰ç§æ–¹æ³•

### æ€»ç»“ğŸ¤”

- åˆ—è¡¨ èµ‹å€¼è¿ç®—
  1. ç›´æ¥ å°†åˆ—è¡¨ èµ‹å€¼
	- é€ æˆä¸¤ä¸ªåˆ—è¡¨æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡
		- ä¸€æ”¹å…¨æ”¹
		- æ‰€æœ‰æ“ä½œéƒ½ä¼šä½œç”¨åˆ°ä¸€ä¸ªå¯¹è±¡ä¸Š
  2. å°†åˆ—è¡¨å‰¯æœ¬ èµ‹ç»™ å˜é‡
	- è¿™ä¸¤ä¸ªåˆ—è¡¨å˜é‡æŒ‡å‘ä¸åŒçš„å¯¹è±¡
		- äº’ä¸å½±å“
	- åˆ¶ä½œå‰¯æœ¬çš„ 3ç§æ–¹æ³•
		- copyæ‹·è´
		- listæ„é€ å‡½æ•°
		- sliceåˆ‡ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221115-1668500786899)

- åˆ—è¡¨å¯ä»¥åšåŠ æ³•å—ï¼ŸğŸ¤”
	- æ¯”å¦‚ l1 + l2

- ä¸‹æ¬¡å†è¯´ ğŸ‘‹
