---
show: step
version: 1.0
enable_checker: true
---

# åºåˆ—åŒ–

## å›å¿†

- ä¸Šæ¬¡æˆ‘ä»¬ç ”ç©¶æ•°æ®åºåˆ—åŒ–
  - å­—ç¬¦ä¸²
  - å­—èŠ‚å‹æ•´æ•°
  - åŒç²¾åº¦æµ®ç‚¹æ•°
- ä¾æ¬¡å†™å…¥
  - ç„¶åå¯ä»¥è¿›è¡Œæ•°æ®ç±»å‹è½¬åŒ–
  - å¹¶ä¸”è¿›è¡Œè¿ç®—
- å¯ä»¥å¯¹äºåºåˆ—åŒ–
	- å®šç‚¹å†™å…¥
	- å®šç‚¹è¯»å–
- è¿™å¹¶ä¸éš¾
- æˆ‘ä»¬å¯ä»¥æŒ‰ç…§éœ€æ±‚å¯¹æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œä¹ˆï¼Ÿ

### å°è¯•ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°

- ä»æ¸¸ä¹åœºè·³è½¬åˆ°æ“ç»ƒåœº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662038812791)

- å¸¦å‚æ•°è¿è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662038826599)

- å®éªŒç»“æœæ˜ç¡®

### å°è¯•åºåˆ—åŒ–å†™å…¥

```
import sys
import struct

f = open(sys.argv[1],"wt")
f.write(sys.argv[2])
f.write("\n")
f.close()
f = open(sys.argv[1],"ab")
hours = int(sys.argv[3])
b_hours = struct.pack("b",hours)
f.write(b_hours)
salary = float(sys.argv[4])
d_salary = struct.pack("d",salary)
f.write(d_salary)
f.close()
```

- ç»™å‚æ•°

```
python3 write.py oeasyd oeasy 4 11.1
```

### æŸ¥çœ‹ç»“æœ

- oeasydç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220901-1662039301135)

- %!xxd

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220902-1662076894652)

### è¯»å‡ºæ¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240923-1727100120584)

- ç”±äºä¸çŸ¥é“nameé•¿åº¦
	- ä»ç»“å°¾å€’ç€å›å»

```
import sys
import struct
f = open(sys.argv[1],"rb")
b_name = f.readline()
s_name = b_name.decode()
s_name = s_name.replace("\n","")
f.close()
f = open(sys.argv[1],"rb")
f.seek(-9,2)
hours = f.read(1)
b_hours = struct.unpack("b",hours)[0]
f.seek(-8,2)
salary = f.read(8)
d_salary = struct.unpack("d",salary)[0]
f.close()
print(s_name,b_hours,d_salary)
```

- è¯»å‡ºæ¥æ˜¯æ²¡é—®é¢˜çš„
	- é—®é¢˜ç°åœ¨è¯»äº†ä¸¤æ¬¡
- æœ‰å¯èƒ½åªè¯»ä¸€æ¬¡
	- ç„¶ååˆ‡ç‰‡(slice)ä¹ˆï¼Ÿ

### å®éªŒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220319-1647698924778)


- ç°åœ¨å¾—åˆ°çš„æ˜¯ä¸€ä¸ªå­—èŠ‚åºåˆ—

### å¤„ç†

- é¦–å…ˆæ˜¯ä¸çŸ¥é“åå­—æœ‰å¤šé•¿
	- å¦‚æœæˆ‘çŸ¥é“æ€»é•¿åº¦
	- ç„¶åå‡å»åé¢çš„ 9 ä¸ªå­—èŠ‚çš„æ•°å­—ä½ç½®
	- ç„¶åå†å‡å»ä¸€ä¸ªåˆ†éš”ç¬¦
	- å°±å¯ä»¥çŸ¥é“åå­—çš„é•¿åº¦äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210827-1630027603007)

- å…¶å®ç°åœ¨éœ€è¦åšçš„
	- å°±æ˜¯æ‰¾åˆ°å„ä¸ªå˜é‡çš„é¦–æœ«ä½ç½®
- åªä¸è¿‡åŸæ¥ç”¨çš„æ˜¯f.seek
	- ç°åœ¨åº”è¯¥ç”¨åºåˆ—ç´¢å¼•çš„æ–¹å¼ 

### åˆ‡ç‰‡

- æ—¢ç„¶çŸ¥é“äº†åå­—å­—ç¬¦ä¸²çš„é•¿åº¦
	- ç„¶åå°±å¯ä»¥æŠŠåå­—å…ˆåˆ‡å‡ºæ¥
- ç”¨åˆ°çš„æ˜¯ä¸€ä¸ªåˆ‡ç‰‡æ“ä½œ
  - [0:5] ä»ç¬¬ 0 ä¸ªå­—èŠ‚åˆ°ç¬¬ 5 ä¸ªå­—èŠ‚ä¹‹å‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210827-1630029941960)

- åˆ‡å®Œäº†åå­—ç»§ç»­åˆ‡æ•°å­—
	- åå­—ä¹‹åæœ‰ä¸ª`\n`

### ç»§ç»­è¯»

- è®¡ç®—ä½ç½®
	- åå­—çš„é•¿åº¦æ˜¯ 5
	- åŠ ä¸Šå›è½¦æ˜¯ 6
	- ç¬¬ 6 ä¸ªå­—èŠ‚å°±æ˜¯å·¥ä½œæ—¶é•¿çš„å­—èŠ‚æ•´å‹æ•°å­—
	- æ‰€ä»¥ä½¿ç”¨[6:7]
	- æˆªå–è¿™ä¸ªå­—èŠ‚

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210827-1630030315558)

- ç„¶åå‡†å¤‡è¯»å–å·¥èµ„

### å†è¯»

- ç¬¬6ä¸ªå­—èŠ‚å·¥ä½œæ—¶é•¿
- ç¬¬7ä¸ªå­—èŠ‚åˆ°ç¬¬14ä¸ªå­—èŠ‚
- æ€»å…±å…«ä¸ªå­—èŠ‚
- æ­£å¥½å¯¹åº”è¿™ä¸ª8å­—èŠ‚æµ®ç‚¹æ•°
- 
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211105-1636107799595)

- è¯»å–å‡º double å‹çš„ salary æ•°å€¼
- ç„¶åè¿›è¡Œè¾“å‡º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210827-1630030772196)

- å®Œæˆï¼âœ¿


### æ–‡ä»¶

```
import sys
import struct
f = open(sys.argv[1],"rb")
b = f.read()
length = len(b)
s_name = b[0: length-9].decode()
s_name = s_name.replace("\n","")
f.seek(-9,2)
hours = f.read(1)
b_hours = struct.unpack("b",hours)[0]
f.seek(-8,2)
salary = f.read(8)
d_salary = struct.unpack("d",salary)[0]
f.close()
print(s_name,b_hours,d_salary)
```

- æ—¢ç„¶èƒ½å¤Ÿä¸€æŠŠè¯»å‡ºæ¥
- å¯ä»¥ä¸€æŠŠå†™è¿›å»ä¹ˆ?

### å­—èŠ‚æµå†™å…¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210827-1630031022671)

- å­—èŠ‚æµæ•´åˆ
- ç¡®å®å¯ä»¥ä¸²èµ·æ¥
- è¿™æ ·ä¸€æŠŠå†™å…¥å­—èŠ‚æµå°±æ›´åˆç†äº†
- ä½†æ˜¯æœ‰ä¸ªå°é—®é¢˜
- å­—ç¬¦ä¸²å’Œæ•°å­—éƒ¨åˆ†ä¹‹å‰æ²¡æœ‰åˆ†éš”ç¬¦
- è¿˜æ˜¯å¾—æœ‰ä¸ª`\n`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220319-1647699681272)

- è¿™æ ·å°±æˆåŠŸä¸€æ¬¡å†™å…¥äº†
- è€Œä¸”æ˜¯åºåˆ—åŒ–åœ°å†™å…¥
- å†å»è¯»å‡ºæ¥

### è¯»å‡º

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220319-1647699900897)

- é¦–å…ˆå®šç‚¹è¯»å‡ºæ•°æ®
	- ç¡®è®¤å†™çš„ä½ç½®
- å¦‚æœæ˜¯ä¿®æ”¹å‘¢ï¼Ÿ
	- æ¯æ¬¡éƒ½éœ€è¦å…¨è¯»éœ€å…¨å†™ä¹ˆï¼Ÿ
	- èƒ½å¦åªä¿®æ”¹å·¥ä½œæ—¶é—´ï¼Ÿ

### å®šç‚¹

- å…·ä½“å†™å…¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220319-1647700514151)

- å¯ä»¥çœ‹åˆ°`\n`ä¹‹åçš„å­—èŠ‚å€¼
	- è¢«ä»`0x05`ä¿®æ”¹ä¸º`0x03`
- è¯•éªŒæˆåŠŸ
- ä½ å¯ä»¥æŠŠä»–è½å®ä¸ºæ–‡ä»¶ä¹ˆï¼Ÿ

### æ€»ç»“ 
- è¿™æ¬¡ç ”ç©¶äº†é…åˆå‘½ä»¤è¡Œå‚æ•°çš„è¯»å†™
	- é€šè¿‡å‚æ•°ä¼ é€’æ•°æ®
	- pythonæ–‡ä»¶æ¥æ”¶å‚æ•°
	- å…·ä½“å†™æŸä¸ªæ–‡ä»¶
	- å†™å…¥æŸäº›æ•°æ®
	- ç„¶åå†è¯»å–å‡ºæ¥
	- ç”šè‡³å¯ä»¥å®šç‚¹ä¿®æ”¹
- å¯ä»¥ä»å¤šä¸ªæ–‡ä»¶ä¸­è¯»å–ä¹ˆï¼Ÿ
	- æ¯ä¸ªæ–‡ä»¶ä¸­ä¸€ä¸ªæ•°å­—
	- ç„¶åæŠŠä»–ä»¬éƒ½åŠ èµ·æ¥ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹