---
show: step
version: 1.0
enable_checker: true
---

# æ”¾å…¥è·¯å¾„

## å›å¿†ä¸Šæ¬¡å†…å®¹

- è¿™æ¬¡æ€»ç®—å¯ä»¥æŠŠ python æ–‡ä»¶ ç›´æ¥æ‰§è¡Œäº†
  - sleep.pyæ–‡ä»¶å¤´éƒ¨è¦å£°æ˜ç”¨çš„å“ªä¸ªè§£é‡Šå™¨
	- `#!/usr/bin/python3`
	- ç”¨çš„æ˜¯ `python3` è§£é‡Š `pythonä»£ç `
- ä¿®æ”¹ `py`æ–‡ä»¶ çš„æƒé™
  - ç»™å½“å‰ç”¨æˆ·å¢åŠ  æ‰§è¡Œ`execute` æƒé™
	- chmod u+x sleep.py
- è¿è¡Œ`./sleep.py`æˆåŠŸ
	- ä½†æˆ‘ä¸æƒ³æ€»å¸¦ç€å½“å‰è·¯å¾„`./`
- ä½†æˆ‘æƒ³è¦ç›´æ¥`sleep.py`å°±è¿è¡Œ
	- è¿™å¯èƒ½ä¹ˆ?ğŸ¤ª

### è¿›è¡Œæœç´¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613894555384)

### æŒ‰å›¾ç´¢éª¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613894612126)

```bash
#æ˜¾ç¤ºå½“å‰è·¯å¾„
echo $PATH
```

- echo $PATH
  - echo : æ˜¾ç¤º
  - `$` : è¯´æ˜è¿™æ˜¯ä¸€ä¸ª `ç¯å¢ƒå˜é‡`
  - `PATH` : èƒ½ç›´æ¥è¿è¡Œç¨‹åºçš„`è·¯å¾„`
- $PATH é‡Œé¢æœ‰ä»€ä¹ˆï¼Ÿ
  - è¿™é‡Œé¢æœ‰å¾ˆå¤š`è·¯å¾„`
  - è·¯å¾„ä¹‹é—´ç”¨`:`åˆ†éš”å¼€
- è¿™äº›è·¯å¾„ä¸‹çš„å‘½ä»¤éƒ½å¯ä»¥ç›´æ¥æ‰§è¡Œ
	- æ— éœ€è¾“å…¥è·¯å¾„ç›´æ¥è¿è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220318-1647609341731)

- æ¯”å¦‚æˆ‘ä»¬æœ€ç†Ÿæ‚‰çš„ls

### æ‰§è¡Œè·¯å¾„

- å›å¿†ä¸€ä¸‹æ— è®ºæˆ‘ä»¬åœ¨å“ªé‡Œ
- éƒ½èƒ½èƒ½æ‰§è¡Œ ls

```bash
ls
#ls å‘½ä»¤åœ¨å“ª
whereis ls
# ä»è·¯å¾„ç›´æ¥æ‰§è¡Œls
/usr/bin/ls
#ls è¯¦ç»†ä¿¡æ¯
ls -lh /usr/bin/ls 
```

- ls æ˜¯ /usr/binä¸‹é¢çš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648105545833)

- `/usr/bin` åœ¨ `$PATH` çš„è·¯å¾„åˆ—è¡¨é‡Œ
  - æ‰€ä»¥ `/usr/bin/ls` å°±èƒ½ä¸éœ€è¦è·¯å¾„`/usr/bin/`
  - åªç”¨æ–‡ä»¶å`ls`ç›´æ¥æ‰§è¡Œ
- è€Œä¸”ä¸è®ºå½“å‰è·¯å¾„åœ¨å“ª
  - åœ¨ä»»æ„è·¯å¾„ä¸‹
  - `ls` éƒ½èƒ½ç›´æ¥æ‰§è¡Œ
- å¦‚æœç¯å¢ƒå˜é‡ `$PATH` ä¸­æ²¡æœ‰`/usr/bin`
  - å°±æ‰¾ä¸åˆ° `ls` äº†
  - å°±è¿ `ls` ä¹Ÿä¸èƒ½æ‰§è¡Œäº†
  - çœŸçš„ä¹ˆï¼Ÿ

### è¿·å¤±è·¯å¾„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220328-1648418704798)

- æ²¡æœ‰äº†$PATH
  - çœŸçš„è¿lséƒ½æ‰¾ä¸åˆ°äº†ğŸ˜±ğŸ˜±ğŸ˜±
  - ä½ è¯´ç¯å¢ƒå˜é‡é‡è¦ä¸é‡è¦ï¼Ÿï¼
- æ¢å¤è·¯å¾„
  - å¯ä»¥é‡å¯ä¸€ä¸‹terminal
  - è·¯å¾„å°±æ¢å¤äº† 
- åæ­£å¦‚æœè·¯å¾„åœ¨ `$PATH` è·¯å¾„ä¸‹é¢
	- è·¯å¾„ä¸‹çš„ç¨‹åºå°±å¯ä»¥ç›´æ¥æ‰§è¡Œ
	- æ‰§è¡Œè·¯å¾„ä¸ºä»€ä¹ˆæœ‰é‚£ä¹ˆå¤šå‘¢ï¼Ÿ

### æ‰§è¡Œè·¯å¾„ä½œç”¨

- æ¯”å¦‚æˆ‘æœ‰ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„mcæœåŠ¡å™¨
	- éƒ½åœ¨æˆ‘çš„ç¡¬ç›˜é‡Œ
	- æˆ‘æ€ä¹ˆçŸ¥é“éœ€è¦ç”¨å¯åŠ¨å“ªä¸ªç‰ˆæœ¬å‘¢ï¼Ÿ
- è¿™ä¸¤ä¸ªå¯åŠ¨çš„ä½ç½®ä¸åŒ
	- æ›´æ˜ç¡®è¯´
	- å°±æ˜¯å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ä¸åŒ

- ç±»ä¼¼çš„éœ€æ±‚å¾ˆå¤š
	- æ¯”å¦‚æœ‰ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„ tomcat 
	- æˆ–è€…ä¸¤ä¸ªä¸åŒç‰ˆæœ¬çš„ java
	- æˆ–è€…ä¸åŒç‰ˆæœ¬çš„python3
- æˆ‘ä»¬ç”¨çš„è¿™ä¸ª python3 åˆ°åº•åœ¨å“ªå‘¢ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648105667493)


### python3çš„ä½ç½®

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220318-1647609917569)

- `python3` å°±åœ¨`/usr/bin/`ä¸‹é¢
- `python3` å’Œ `ls` éƒ½åœ¨ `/usr/bin/`ä¸‹é¢
- `/usr/bin` çš„å«ä¹‰
	- usr 
		- unix software resources unixè½¯ä»¶èµ„æº
	- bin 
		- binary  äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶

### åˆ†æè·¯å¾„

- è·¯å¾„ä¸­åŒ…å« `python3` æ‰€åœ¨çš„è·¯å¾„
  - `/usr/bin`
  - è§ä¸‹å›¾çº¢æ¡†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210221-1613896706330)

- æ— è®ºå½“å‰è·¯å¾„åœ¨ä»€ä¹ˆä½ç½®
  - åªè¦è¾“å…¥ `python3`
	- ç³»ç»Ÿå°±å» `$PATH` é‡Œé¢ä»å‰å¾€åæ‰¾
	- åœ¨ `/usr/bin` å½“ä¸­æ‰¾åˆ°äº†python3
	- å°±ä¸å¾€åæ‰¾äº†
	- ç„¶åæ‰§è¡Œ `/usr/bin` ä¸­æ‰¾åˆ°çš„ `python3`
- åªè¦è¿™ä¸ªè·¯å¾„ `/usr/bin` åœ¨ `$PATH` ä¸­
	- ç³»ç»Ÿå°±ä¼šåœ¨ `$PATH` é‡Œé¢æ‰¾ç›¸åº”çš„è·¯å¾„
- é‚£æˆ‘ä»¬æŠŠ `sleep.py` æ‹·è´åˆ° `/usr/bin` ä¸å°±èƒ½è¢«æ‰¾åˆ°äº†ä¹ˆï¼Ÿ
- é¦–å…ˆå¾—æ˜ç¡®
	- å½“å‰è¿™ä¸ªå­˜æ”¾ `sleep.py` çš„è·¯å¾„åœ¨å“ªé‡Œå‘¢ï¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648115497636)

- pwd
	- present working directory
	- å½“å‰å·¥ä½œè·¯å¾„
- å½“å‰è·¯å¾„å°±åœ¨ `~`
	- å°±æ˜¯`/home/shiyanlou`
	- å°±æ˜¯å½“å‰ç”¨æˆ·`shiyanlouçš„`ç”¨æˆ·æ–‡ä»¶å¤¹

- ä»€ä¹ˆæ˜¯ç”¨æˆ·æ–‡ä»¶å¤¹å‘¢ï¼Ÿ

### ç”¨æˆ·æ–‡ä»¶å¤¹

- æˆ‘ä»¬çš„ç³»ç»Ÿéƒ½æ˜¯å¤šç”¨æˆ·çš„
	- å¤šç”¨æˆ·æ„å‘³ç€å¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ç™»å½•ä½¿ç”¨
	- æ¯ä¸ªç”¨æˆ·éƒ½æœ‰è‡ªå·±çš„æ¡Œé¢ã€æ–‡æ¡£ã€ä¸‹è½½ç›®å½•

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648115574111)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648115595297)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648115610783)

### æ”¾å…¥è·¯å¾„

```bash
#æŠŠæ–‡ä»¶æ‹·è´è¿‡å»
cp sleep.py /usr/bin
#ç”¨ç®¡ç†å‘˜æƒé™ç»™è€ƒè¿‡å»
sudo cp ./sleep.py /usr/bin
#å°è¯•æ‰§è¡Œ
sleep.py
#ä¸ºå½“å‰ç”¨æˆ·å¢åŠ å¯æ‰§è¡Œæƒé™
chmod u+x /usr/bin/sleep.py
#ä½¿ç”¨ç®¡ç†å‘˜æƒé™ææƒ
sudo chmod u+x /usr/bin/sleep.py
#å°è¯•æ‰§è¡Œ
sleep.py
#å°è¯•ç”¨ç®¡ç†å‘˜æ‰§è¡Œ
sudo sleep.py
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648116056956)

- æœ€å sleep.py æ˜¯å¯ä»¥æ‰§è¡Œçš„
- ä½†å‰æè¿˜æ˜¯
	- éœ€è¦åœ¨æœ€å‰é¢æ‰“ä¸€ä¸ª sudo 
	- è¿›è¡Œææƒ
	- æ‰èƒ½æ‰§è¡Œ
- å¦‚æœæˆ‘æƒ³ä¸ç”¨sudoå°±ç›´æ¥è¿è¡Œsleep.pyå‘¢

### lsçš„å‚æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220310-1646910685288)

- å¦‚æœä¸æ¸…æ¥šlså‚æ•°ä½œç”¨çš„è¯
	- å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹å¸®åŠ©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220810-1660095772721)

- å…ˆå­¦python
	- å­¦å®Œä¹‹åå¯ä»¥å»[ã€Šoeasyæ•™æ‚¨ç©è½¬linuxã€‹](https://www.lanqiao.cn/courses/2712)çœ‹çœ‹shellçš„ä¸€äº›ç»†èŠ‚

### åˆ†æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220310-1646910685288)

- sleep.pyè¿™ä¸ªæ–‡ä»¶
	- æ‹¥æœ‰è€…(owner) æ˜¯root
	- ç”¨æˆ·ç»„(group) æ˜¯ root
- å½“å‰ç”¨æˆ·ä¸èƒ½ç›´æ¥æ‰§è¡Œ
	- åªæœ‰ root æ‰èƒ½æ‰§è¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220810-1660096098201)

- rootä»£è¡¨ç€æœ€é«˜çš„æƒé™
- æ‰€ä»¥å¿…é¡»è¦åŠ ä¸Šsudoæ‰å¯ä»¥
- é‚£åŸæ¥çš„sleep.pyä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥è¿è¡Œå‘¢ï¼Ÿ

### æ‰€æœ‰è€…æ¥æº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664548275255)

- åŸæ¥çš„æ‰€æœ‰è€…ç”¨æˆ·åæ˜¯shiyanlouå•Š
- é‚£ä¸ºä»€ä¹ˆæ‹·è´åˆ°/usr/binä¸‹é¢ä¹‹å
- æ‰€æœ‰è€…å°±å˜æˆrootäº†å‘¢ï¼Ÿ

### å›å¿†æ‹·è´è¿‡ç¨‹

- å›å¿†ä¸€ä¸‹æ‹·è´çš„æ—¶å€™
- ç›´æ¥æ‹·è´å¤±è´¥äº†

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664548361978)

- åªèƒ½ææƒè¿›è¡Œæ‹·è´
- è¿™æ˜¯cpæ‰§è¡Œè€…å°±ä¸æ˜¯shiyanlouäº†
- è€Œæ˜¯root
- æˆ‘æƒ³è®©æ™®é€šç”¨æˆ·ä¹Ÿèƒ½æ‰§è¡Œsleep.py
- å¯ä»¥å—ï¼Ÿ


### ææƒ

- å°è¯•å†ææƒ

```bash
#ä½¿ç”¨ç®¡ç†å‘˜æƒé™ææƒ
sudo chmod a+x /usr/bin/sleep.py
#å°è¯•æ‰§è¡Œ
sleep.py
```

- a+x æ„æ€æ˜¯
  - `a`ll users éƒ½å¢åŠ 
  - e`x`ecute çš„æƒé™

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648106052159)

- ä¸åŒä½ç½®çš„xå«ä¹‰ä¸åŒ
	- è“è‰²å¯¹åº” æ–‡ä»¶æ‹¥æœ‰è€…(owner) - (root)
	- çº¢è‰²å¯¹åº” æ–‡ä»¶æ‹¥æœ‰è€…ç”¨æˆ·ç»„(group) - (root)
	- é»„è‰²å¯¹åº” æ‰€æœ‰ç”¨æˆ· (all)
- ç›®å‰æ‰€æœ‰ç”¨æˆ·éƒ½èƒ½æ‰§è¡Œsleep.pyäº†

### é—®é¢˜

- å¯æ˜¯ä»€ä¹ˆéƒ½æ”¾åˆ° `/usr/bin`ä¸‹é¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648116508052)

- å°±åƒé¸¡è›‹éƒ½æ”¾åœ¨åŒä¸€ä¸ªç¯®å­é‡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220324-1648116515379)

- ç›®å½•ä¹‹ä¸‹éå¸¸æ‚ä¹±

### è°ƒæ•´

- /usr/binä¸‹é¢æ–‡ä»¶
	- å¾ˆå¤š
	- å¾ˆä¹±
	- å¾ˆä¸å®‰å…¨

```bash
#å…ˆæŠŠ/usr/binä¸‹é¢çš„sleep.pyåˆ æ‰
rm /usr/bin/sleep.py
#ä¸è®©åˆ å°±ç”¨ç®¡ç†å‘˜æƒé™åˆ 
sudo rm /usr/bin/sleep.py
#ç¡®è®¤åˆ é™¤
ls /usr/bin/sleep.py
```

- ç¡®è®¤åˆ é™¤ä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220318-1647610377476)

- æˆ‘å¸Œæœ› sleep.py è¿˜æ”¾åœ¨å½“å‰ç”¨æˆ·æ–‡ä»¶å¤¹~
- ä¹Ÿèƒ½åœ¨ä»»æ„è·¯å¾„ä¸‹æ‰§è¡Œ

## æ€»ç»“

- æƒ³è¦åœ¨ä»»æ„è·¯å¾„ä¸‹ç›´æ¥æ‰§è¡Œ `sleep.py`
  - å¯ä»¥æŠŠ `sleep.py` æ”¾å…¥ `/usr/bin/` ä¸‹é¢
- ä½†æ˜¯`/usr/bin`é‡Œé¢æ”¾çš„éƒ½æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶
- æˆ‘æƒ³æŠŠ `sleep.py` æ”¾åœ¨ `shiyanlou` çš„å®¿ä¸»ç›®å½•é‡Œé¢
- ç„¶åæŠŠæˆ‘çš„ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿå˜é‡ `$PATH` ä¸­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220930-1664549610079)

- è¿™æ ·æœ‰å¯èƒ½å—ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ï¼ğŸ‘‹