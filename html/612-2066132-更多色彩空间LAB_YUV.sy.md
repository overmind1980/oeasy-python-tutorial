---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Š
- å›¾åƒä¸ä½†å¯ä»¥ä»åƒç´ çŸ©é˜µçš„æ–¹å¼è¿›è¡Œè£åˆ‡ä¸åˆå¹¶
- è¿˜å¯ä»¥ä»é€šé“çš„è§’åº¦åˆ†ç¦»ä¸åˆå¹¶
- é»˜è®¤çš„çŠ¶æ€å°±æ˜¯BGRä¸‰è‰²é€šé“èåˆ
- å¯ä»¥å°†å…¶ä»–é€šé“çš„ä¿¡æ¯ç‹¬ç«‹ç­›é€‰å‡ºæ¥
- è¿˜æœ‰ä»€ä¹ˆå…¶ä»–è‰²å½©æ¨¡å¼å—ï¼Ÿï¼Ÿ

### è‰²å½©æ¨¡å¼åˆ—è¡¨

```python
# -*- coding: utf-8 -*-
import cv2  
import numpy as np  
import os
import matplotlib.pyplot as plt

envpath = '/headless/anaconda3/lib/python3.8/site-packages/cv2/qt/plugins/platforms'
os.environ['QT_QPA_PLATFORM_PLUGIN_PATH'] = envpath

#è¯»å–åŸå§‹å›¾åƒ
img_BGR = cv2.imread("/usr/local/support/flower.png")

#BGRè½¬æ¢ä¸ºRGB
img_RGB = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2RGB)

#ç°åº¦åŒ–å¤„ç†
img_GRAY = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2GRAY)

#BGRè½¬HSV
img_HSV = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2HSV)

#BGRè½¬YCrCb
img_YCrCb = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2YCrCb)

#BGRè½¬HLS
img_HLS = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2HLS)

#BGRè½¬XYZ
img_XYZ = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2XYZ)

#BGRè½¬LAB
img_LAB = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2LAB)

#BGRè½¬YUV
img_YUV = cv2.cvtColor(img_BGR, cv2.COLOR_BGR2YUV)

#è°ƒç”¨matplotlibæ˜¾ç¤ºå¤„ç†ç»“æœ
titles = ['BGR', 'RGB', 'GRAY', 'HSV', 'YCrCb', 'HLS', 'XYZ', 'LAB', 'YUV']  
images = [img_BGR, img_RGB, img_GRAY, img_HSV, img_YCrCb,
          img_HLS, img_XYZ, img_LAB, img_YUV]  
for i in range(9):  
   plt.subplot(3, 3, i+1), plt.imshow(images[i], 'gray')  
   plt.title(titles[i])  
   plt.xticks([]),plt.yticks([])  
plt.show()
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708504022952)

### CMYK è‰²å½©æ¨¡å¼

```
import cv2
from colormath.color_objects import sRGBColor, CMYKColor
from colormath.color_conversions import convert_color

# Load the RGB image using OpenCV
rgb_image = cv2.imread('monkey.png')

# Convert RGB to CMYK using colormath
cmyk_image = cv2.cvtColor(rgb_image, cv2.COLOR_BGR2RGB)

for i in range(cmyk_image.shape[0]):
    for j in range(cmyk_image.shape[1]):
        rgb_pixel = cmyk_image[i, j]
        rgb_color = sRGBColor(rgb_pixel[0] / 255.0, rgb_pixel[1] / 255.0, rgb_pixel[2] / 255.0)
        cmyk_color = convert_color(rgb_color, CMYKColor)
        #print(cmyk_color)
        cmyk_image[i, j] = [255 - cmyk_color.cmyk_c * 255,
                            255 - cmyk_color.cmyk_m * 255,
                            255 - cmyk_color.cmyk_y * 255]

# Split the CMYK channels
c_channel, m_channel, y_channel = cv2.split(cmyk_image)
k_channel =  cv2.imread("/home/shiyanlou/monkey.png",cv2.IMREAD_GRAYSCALE)

# Display all the CMYK channels
cv2.imshow("Cyan Channel", c_channel)
cv2.imshow("Magenta Channel", m_channel)
cv2.imshow("Yellow Channel", y_channel)
cv2.imshow("Key (Black) Channel", k_channel)
cv2.imshow("original", rgb_image)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708508324394)

### ä¸Šè‰²æ•ˆæœ

```
import cv2
from colormath.color_objects import sRGBColor, CMYKColor
from colormath.color_conversions import convert_color

# Load the RGB image using OpenCV
rgb_image = cv2.imread('monkey.png')

# Convert RGB to CMYK using colormath
cmyk_image = cv2.cvtColor(rgb_image, cv2.COLOR_BGR2RGB)

for i in range(cmyk_image.shape[0]):
    for j in range(cmyk_image.shape[1]):
        rgb_pixel = cmyk_image[i, j]
        rgb_color = sRGBColor(rgb_pixel[0] / 255.0, rgb_pixel[1] / 255.0, rgb_pixel[2] / 255.0)
        cmyk_color = convert_color(rgb_color, CMYKColor)
        #print(cmyk_color)
        cmyk_image[i, j] = [255 - cmyk_color.cmyk_c * 255,
                            255 - cmyk_color.cmyk_m * 255,
                            255 - cmyk_color.cmyk_y * 255]

# Split the CMYK channels
c_channel, m_channel, y_channel = cv2.split(cmyk_image)
k_channel =  cv2.imread("/home/shiyanlou/monkey.png",cv2.IMREAD_GRAYSCALE)

# Display all the CMYK channels
cv2.imshow("Cyan Channel", c_channel)
cv2.imshow("Magenta Channel", m_channel)
cv2.imshow("Yellow Channel", y_channel)
cv2.imshow("Key (Black) Channel", k_channel)
cv2.imshow("original", rgb_image)
cv2.waitKey(0)
cv2.destroyAllWindows()
```

- æ•ˆæœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240221-1708510549479)

### æ€»ç»“ğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹