---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡ç ”ç©¶äº†å›¾åƒçš„shape
	- é«˜åº¦
	- å®½åº¦
	- é€šé“æ•°
- å¹¶ä¸”æŠŠå›¾åƒä»RGBè‰²å½©æ¨¡å¼ä¿®æ”¹ä¸ºç°åº¦è‰²å½©æ¨¡å¼
	- ç»“æœä»ç„¶æ˜¯ä¸‰ç»´åˆ—è¡¨
- çœŸæ­£çš„ç°åº¦å›¾ä¹Ÿæ˜¯ä¸‰ç»´åˆ—è¡¨å—ï¼ŸğŸ¤”

### ç´ æ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699088581080)

- å‡†å¤‡ç´ æå›¾ç‰‡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703912098758)

- é‡å¯è“æ¡¥åä¼šå‘ç°gear.jpg

### ä»¥ç°åº¦çš„æ–¹å¼è¯»å–å›¾åƒ

```
import cv2                                                     
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)                                      
print(image)                                                   
print(image.shape)                                                 
key = cv2.waitKey()                                            
if key & 0xFF == ord("q"):                                     
    cv2.destoryAllWindows()
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703929234703)

- è¿™ä¸ªç¡®å®æ˜¯äºŒç»´åˆ—è¡¨
- å…·ä½“ç»´åº¦å¦‚ä½•å‘¢ï¼Ÿ

### æ•°æ®ç±»å‹ä¸å›¾åƒç»´åº¦
```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)
height, width = image.shape
print(image)
print("type(image)====", type(image))
print("image.ndim====", image.ndim)
print("image.dtype====", image.dtype)
print("height====",height)
print("width====",width)
print("image.size====", image.size)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703929386222)

- imageçš„ç±»å‹æ˜¯numpyæ•°ç»„
	- äºŒç»´æ•°ç»„
	- æ•°æ®ç±»å‹ä¸º8-bitçš„æ— ç¬¦å·æ•´æ•°
- æ³¨æ„shapeä¸­
	- å…ˆå¾—åˆ°çš„æ˜¯é«˜åº¦å€¼
	- åå¾—åˆ°çš„æ˜¯å®½åº¦å€¼
- å…·ä½“æ•°å€¼æ˜¯ä»€ä¹ˆå«ä¹‰å‘¢ï¼Ÿ


### æŸ¥çœ‹å…·ä½“åƒç´ ä¿¡æ¯
```
import cv2 
image = cv2.imread("/mnt/cgshare/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("image",image)
height, width = image.shape
print(image)
print("image[0,0]=======",image[0][0])
print("image[0,1]=======",image[0][1])
print("image[1,0]=======",image[1][0])
print("image[1,1]=======",image[1][1])                                      
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- æŸ¥çœ‹å›¾åƒæ—¶
	- å¯ä»¥ç”¨æ‰‹è§¦æ§æ¿æåˆæˆ–æ”¾å¤§å›¾åƒå·¦ä¸Šè§’
		- ç¬¬ä¸€ç»´åº¦æ˜¯çºµåæ ‡y
		- ç¬¬äºŒç»´åº¦æ˜¯æ¨ªåæ ‡x

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931005975)

- å¯ä»¥åšä¸€ä¸ªå•åƒç´ çš„jpgæ–‡ä»¶å—ï¼Ÿ

### å•åƒç´ çš„å›¾ç‰‡

- è§‚å¯ŸçŸ©é˜µæ•ˆæœ

```
import cv2 
import numpy as np
vector = np.zeros((1,1),np.uint8)
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector",vector)
vector[0,0] = 255 
print("vector=======",vector)
print("vector[0]====",vector[0])
print("vector[0][0]====",vector[0][0])
cv2.imshow("vector2",vector)
cv2.waitKey()
cv2.destroyAllWindows()
```

- åˆ¶ä½œäº†
	- ä¸€ä¸ªçº¯é»‘åƒç´ 
	- ä¸€ä¸ªçº¯ç™½åƒç´ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931155992)

- å¯ä»¥è®©åƒç´ æ›´å¤æ‚ä¸€äº›å—ï¼Ÿ

### å¤æ‚åƒç´ 

- è®¾ç½®ä¸€ä¸ª3*1çš„å‘é‡çŸ©é˜µ
	- å¹¶è§‚å¯Ÿ

```
import cv2
import numpy as np
one_pixel = np.zeros((3,1),np.uint8)
print("one_pixel=======",one_pixel)
print("one_pixel[0]====",one_pixel[0])
print("one_pixel[0][0]====",one_pixel[0][0])
cv2.imshow("one_pixel",one_pixel)
for n in range(3):
    one_pixel[n,0] = int(256/3*n)
print("one_pixel=======",one_pixel)
print("one_pixel[0]====",one_pixel[0])
print("one_pixel[0][0]====",one_pixel[0][0])
cv2.imshow("one_pixel_2",one_pixel)
cv2.waitKey()
cv2.destroyAllWindows()
```

- éƒ½æ˜¯ 3 * 1çš„çŸ©é˜µ
	- ä¸€ä¸ªæ˜¯çº¯é»‘
	- å¦ä¸€ä¸ªæ˜¯æ¸å˜è‰²
- å¯ä»¥åš2*2çŸ©é˜µå—ï¼Ÿ


### 2*2çš„çŸ©é˜µ
```
import cv2                                  
import numpy as np                          
matrix = np.zeros((2,2),np.uint8)           
print("matrix=======",matrix)               
print("matrix[0]====",matrix[0])            
print("matrix[0][0]====",matrix[0][0])      
cv2.imshow("matrix",matrix)                 
for i in range(2):                          
    for j in range(2):                      
        matrix[i,j] = int(256/4 * (i*2 + j ))
print("matrix=======",matrix)               
print("matrix[0]====",matrix[0])            
print("matrix[0][0]====",matrix[0][0])      
cv2.imshow("matrix_2",matrix)               
cv2.waitKey()                               
cv2.destroyAllWindows()
```

- å¹¶è§‚å¯Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931479868)

- å¯ä»¥ç›´æ¥è®¾ç½®åƒç´ ç‚¹çš„é¢œè‰²å—ï¼Ÿ

### è®¾ç½®åƒç´ ç‚¹çš„é¢œè‰²

```
import cv2       
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)     
image[6,25] = 0  
cv2.imshow("black pixel",image)
image[6,25] = 255
cv2.imshow("white pixel",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- æ³¨æ„è§‚å¯Ÿ
	- (y=6,x=25)ç‚¹å¤„çš„é¢œè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931663161)

- å¯ä»¥ä½¿ç”¨çŸ©é˜µæ‰¹é‡è®¾ç½®é¢œè‰²å—ï¼Ÿ

### è®¾ç½®çŸ©é˜µèŒƒå›´å†…çš„é¢œè‰²
```
import cv2     
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)   
image[38:75,184:231] = 0
cv2.imshow("black rectangle",image)
image[38:75,184:231] = 128
cv2.imshow("gray rectangle",image)
image[38:75,184:231] = 255
cv2.imshow("white rectangle",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- åœ¨çŸ©é˜µèŒƒå›´å†…çš„åƒç´ 
	- ç»Ÿä¸€è¢«è®¾ç½®ä¸ºä¸€ä¸ªå…·ä½“é¢œè‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703931972078)

- å¦‚æœå¿½ç•¥èµ·ç‚¹æˆ–è€…ç»ˆç‚¹ä¼šå¦‚ä½•å‘¢ï¼Ÿ

### å¿½ç•¥èµ·ç‚¹æˆ–è€…ç»ˆç‚¹
```
import cv2              
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)            
image[:,184:231] = 255  
cv2.imshow("omit x",image)
image[38:75,:] = 255    
cv2.imshow("omit y",image)
image[:,:] = 255        
cv2.imshow("omit x and y",image)
key = cv2.waitKey()     
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703932338881)

### å¿½ç•¥xåæ ‡çš„æœ€å¤§å€¼
```
import cv2             
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)           
image[38:204,300:] = 255
cv2.imshow("omit x max",image)
key = cv2.waitKey()    
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ
	- xç›¸å½“äºä»300åˆ°æœ€å¤§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703932476456)

- å¿½ç•¥yçš„æœ€å°å€¼åˆä¼šå¦‚ä½•å‘¢ï¼Ÿ

### å¿½ç•¥yåæ ‡çš„æœ€å°å€¼
```
import cv2
image = cv2.imread("/home/shiyanlou/gear.jpg",cv2.IMREAD_GRAYSCALE)
cv2.imshow("original",image)
height, width = image.shape
print(image)
image[:80,150:300] = 255
cv2.imshow("omit y min",image)
key = cv2.waitKey()
if key & 0xFF == ord("q"):
    cv2.destroyAllWindows()
```

- ç»“æœ
	- yç›¸å½“äºä»0åˆ°80

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703933698098)

- æ€»ç»“ä¸€ä¸‹å§

### æ€»ç»“
- è¿™æ¬¡äº†è§£äº†ä¸€ä¸ªçº¯ç°åº¦å›¾çš„ç»“æ„
	- çº¯ç°åº¦å›¾è¢«ç†è§£ä¸ºä¸€ä¸ªäºŒç»´çŸ©é˜µ
		- ç¬¬ä¸€ç»´ æ˜¯ é«˜åº¦y
		- ç¬¬äºŒç»´ æ˜¯ å®½åº¦x
	- æ¯ä¸ªåƒç´ ç‚¹å¯¹åº”ä¸€ä¸ª8-bitçš„æ— ç¬¦å·æ•´æ•°
- å¯ä»¥é€šè¿‡è®¾ç½®å…·ä½“çŸ©é˜µå€¼çš„æ–¹å¼è®¾ç½®åƒç´ ç‚¹çš„é¢œè‰²
- ä¹Ÿå¯ä»¥é€šè¿‡è®¾ç½®å­çŸ©é˜µçš„æ–¹å¼è®¾ç½®çŸ©å½¢åŒºåŸŸçš„é¢œè‰²
- å¯ä»¥è®¾ç½®çŸ©é˜µåŒºåŸŸçš„åƒç´ å€¼å—ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹