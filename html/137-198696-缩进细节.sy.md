---
show: step
version: 1.0
enable_checker: true
---

# 缩进细节

## 回忆

- 这次学习了条件分支
- 首先进行 if 单分支条件语句
- 如果 expression 表达式成立
- 就执行相应的语句
- 如果条件满足的话
  - 可以执行多条语句么？🤔
- 试试

### 满足条件

```
t = float(input("your temperature:"))
if t > 38:
    print("\033[41m[warning]\033[0mYou have a fever!")
if t > 38:
    print("\033[41m[warning]\033[0mTake a rest!")
```

- 满足第 2 句条件的话
  - 可以执行第 3 句
- 还满足第 4 句条件的话
  - 可以执行第 5 句
- 其实第 2、4 两句条件相同的
  - 可以把执行部分合并起来么？

### 多行缩进

- 如果合并成两行的话
- 会如何呢？

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631082825825)

- 如果满足要求
- 两条语句都会执行
- 这个缩进必须 4 个字符么？
- 试试 👊

### 尝试

- 只要是相同字符
  - 3 个字符
  - 2 个字符
  - 甚至 1 个字符
  - 都没有问题

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631083248023)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631091801779)

- 那如果没有缩进会如何呢？

### 没有缩进

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631083405192)

- 没有缩进
- 会报错误
- 期待着一个缩进的块

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631083418281)

- 缩进是一定要有的
- 而且必须齐头并进
- 即使缩进只有一格
- 也要保持齐头并进
- 但是缩进多少才合理呢？

### 规定

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631084058004)

- 最好就是 4 格缩进
- 可以在 vim 中进行控制
- `:set noet sw=4 ts=4 sts=4 ai`
  - 可以快速设置
- `gg=G`可以从头到尾快速缩进
- 缩进的 3,4 行其实就是一个 block
- 严格使用缩进来体现代码的逻辑从属关系
- 如果缩进不对 那么这个代码本身就是错误的
- 这样一眼就能看见错误
- 至少和 c++比起来是这样的
- 官方文档曾经吐槽其他语言使用的大括号
  - https://docs.python.org/3/faq/design.html#why-does-python-use-indentation-for-grouping-of-statements

### 官方吐槽

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624047387)

- 例程
	- 看起来 if 满足时可以执行两句
	- 实际上执行一句
	- 看起来对的
	- 但是要找半天
- 而且大括号让程序增加很多行
	- 还有关于大括号放置位置的争论
- python 这下好了
	- 直接就把大括号去了
	- 为什么 python 中空格缩进会这么重要呢？

### 缩进作用

- 其实空格在有些情况下是会被忽略的
- 比如

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210918-1631933226086)

- 就像其他语言一样
- 生成语法树的时候
- 这些空格可以被忽略
- 那什么时候空格不能被忽略呢？

### 缩进

- 在用缩进控制 block 范围的时候
  - block 是语句块
  - block 语句块是由语句 statement 组成的
  - block 语句块的范围是由缩进控制的

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210918-1631933430568)

- 大多数情况
- 我们会选择第一种方式
- 一句是一个 statement 语句
- 3 个 statement 语句构成一个 block 语句块
- 这个 block 语句块是和 if 对接的

- 过程是这样的
- 但是在这个 程序块 block 中是否会出现意外呢
- 有意就一定有意外 😄

### 意外

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631091515110)

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20210908-1631091523247)

- 为什么会这样呢？

### 简化分析

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624433697)


![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624456984)

- 如果t是 39 的话
  - 第三行就能执行
  - l 就能被声明
  - 声明了之后就可以被正常输出

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624469673)

- 如果是 35 的话
  - 第三行就不能执行
  - l 就不能被声明
  - 没声明就无法被正常输出
- 怎么办？

### 提前声明

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624507325)

- 不论 if 条件是否满足
- l 都最好提前声明了
  - 而不是在某个分支里面被声明
  - 因为只在某些分支里被声明
  - 另一些没有声明这个变量的分支就没法调用这个变量
- 在一开始就把所有要用的变量声明好
- 是一个好习惯

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624542452)

- 我们尝试去调试一下

### 调试

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624667425)

- 输入t的值
- 我们是可以显示出t的值
- 然后就到了分支语句if

### 条件

- 判断条件结果为False

![图片描述](https://doc.shiyanlou.com/courses/uid1190679-20220724-1658624805108)

- 直接跳过第四句
- 跳到第五句继续执行
- 我们去总结一下

### 总结

- 这次学习了 if 单分支条件语句中的缩进块
- 缩进的范围是程序逻辑的体现
	- 某行缩进与不缩进意味着这行是不是属于 if 的语句块
	- 这很好很显眼
	- 而且要注意变量声明最好在最前面做
	- 比较清晰
- 毕竟
	- Readability counts.
	- 可读性很重要
- 我们可以 debug 调试 这个程序么？🤔
- 下次再说 👋
