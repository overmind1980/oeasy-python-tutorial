---
show: step
version: 1.0
enable_checker: true
---

# opencv

## å›å¿†

- ä¸Šæ¬¡å®‰è£…äº†opencv
	- å¹¶ä¸”æ‰“å¼€äº†å›¾ç‰‡
	- æŸ¥çœ‹äº†å›¾ç‰‡
	- è¿˜å¦å­˜äº†å›¾ç‰‡
- å›¾ç‰‡çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
- ä¸ºä»€ä¹ˆè¾“å‡ºçš„æ—¶å€™ä¼šè¾“å‡ºä¸€ä¸ªä¸‰ç»´æ•°ç»„å‘¢ï¼ŸğŸ¤”

### å›¾ç‰‡çš„è¾“å‡º

```
import cv2 
image = cv2.imread("/home/shiyanlou/kun1.png")
print(image)
```

- æ‰§è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231230-1703906728016)

- çœ‹èµ·æ¥åƒæ˜¯ä¸€ä¸ªä¸‰ç»´çš„åˆ—è¡¨
	- è¿™å¦‚ä½•ç†è§£å‘¢ï¼Ÿ

### è§‚å¯Ÿç±»å‹

```
import cv2
image = cv2.imread("/home/shiyanlou/kun1.png")
print(type(image))
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708754449313)

- è¿™æ˜¯ä¸€ä¸ªnumpy.ndarray

### ndarray

- ndarray
	- n-demensional array

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708754609333)

- åŒè´¨ã€å›ºå®šå¤§å°çš„nçº¬æ•°ç»„

### Attribute

```
import cv2
image = cv2.imread("/home/shiyanlou/kun1.png")
print("ndim:",image.ndim)
print("shape:",image.shape)
print("size:",image.size)
print("dtype:",image.dtype)
print("nbytes:",image.nbytes)
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708755163812)

- ä¸‰ç»´æ•°ç»„
	- å„ç»´çš„æ•°å­—
	- æ•°æ®ç±»å‹
	- æ•´ä½“å®¹é‡
- å¯ä»¥åšä¸€ä¸ªç©ºç™½çš„ å›¾ç‰‡å—ï¼Ÿ

### ç©ºç™½å›¾ç‰‡

```
import numpy as np
import cv2
canvas = np.zeros((300,300,3), np.uint8)
cv2.imshow("canvas",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

- å¾—åˆ°ä¸€ä¸ªçº¯é»‘çš„ç”»å¸ƒ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708755700811)

- ç”»å¸ƒå…·ä½“çš„æ•°å€¼å¦‚ä½•å‘¢ï¼Ÿ

### å…·ä½“æ•°å€¼

```
import numpy as np
import cv2
canvas = np.zeros((300,300,3), np.uint8)
print(canvas)
cv2.imshow("canvas",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ ç¬¬ä¸‰ç»´ æ˜¯ ä¸‰å…ƒç»„
	- ä¸‰ä¸ªé›¶ å¯¹åº”é»‘è‰²

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708755794490)

- å¯ä»¥åœ¨è¿™ç”»å¸ƒä¸Šé¢å†™å­—å—ï¼Ÿ

### ç»˜åˆ¶æ–‡å­—

```
import numpy as np
import cv2
canvas = np.zeros((300,300,3), np.uint8)
cv2.putText(canvas,"oeasy",(30,80),cv2.FONT_HERSHEY_TRIPLEX,2,(0,0,255),5)
cv2.imshow("Text",canvas)
cv2.waitKey()
cv2.destroyAllWindows()
```

- putText æ˜¯å…·ä½“çš„å‡½æ•°
	- è¿™ä¸ªå‡½æ•°å‚æ•°å¾ˆå¤š
	- å…·ä½“æ€ä¹ˆç†è§£å‘¢ï¼Ÿ

### å®˜ç½‘æœç´¢

- ç™¾åº¦æœç´¢
	- opencv putText( site:opencv.org

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708756052569)

- æ‰¾åˆ° docs.opencv.orgçš„é¡µé¢

### è§‚å¯Ÿ

- https://docs.opencv.org/4.8.0/d9/dfa/classcv_1_1freetype_1_1FreeType2.html

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240224-1708756102511)

- è¿™é‡Œçš„å‚æ•°åˆ—è¡¨
	- åŸºäºc++æºæ–‡ä»¶
	- å¯ä»¥å€Ÿé‰´

```
void cv::putText(
    cv::Mat& img, // å¾…ç»˜åˆ¶çš„å›¾åƒ
    const string& text, // å¾…ç»˜åˆ¶çš„æ–‡å­—
    cv::Point origin, // æ–‡æœ¬æ¡†çš„å·¦ä¸‹è§’
    int fontFace, // å­—ä½“ (å¦‚cv::FONT_HERSHEY_PLAIN)
    double fontScale, // å°ºå¯¸å› å­ï¼Œå€¼è¶Šå¤§æ–‡å­—è¶Šå¤§
    cv::Scalar color, // çº¿æ¡çš„é¢œè‰²ï¼ˆRGBï¼‰
    int thickness = 1, // çº¿æ¡å®½åº¦
    int lineType = 8, // çº¿å‹ï¼ˆ4é‚»åŸŸæˆ–8é‚»åŸŸï¼Œé»˜è®¤8é‚»åŸŸï¼‰
    bool bottomLeftOrigin = false // true='origin at lower left'
);
```

###  è¿è¡Œç»“æœ

```
cv2.putText(canvas,"oeasy",(30,80),cv2.FONT_HERSHEY_TRIPLEX,2,(0,0,255),5)
```
|åç§°|æ•°å€¼|ä½œç”¨|
|---|---|---|
|Point origin| (30,80)|åŸç‚¹ä½ç½®|
|fontFace|cv2.FONT_HERSHEY_TRIPLEX|å­—ä½“|
|fontScale|2|å°ºå¯¸å› å­|
|color|(0,0,255)| é¢œè‰² çº¢è‰²|
|thickness|8|çº¿æ¡å®½åº¦|

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704370095686)

###  è®¾ç½®æ–‡å­—å­—ä½“
```
import numpy as np
import cv2 
from random import randint
image = np.zeros((480,640,3), np.uint8)
text = "oeasy learns to opencv"
cv2.putText(image, text, (20, 20),  cv2.FONT_HERSHEY_COMPLEX, 1, (0, 255, 255),1)
cv2.putText(image, text, (20, 50),  cv2.FONT_HERSHEY_COMPLEX_SMALL, 1, (0, 255,255),1)
cv2.putText(image, text, (20, 80),  cv2.FONT_HERSHEY_DUPLEX, 1, (0, 255, 255),1)
cv2.putText(image, text, (20, 110), cv2.FONT_HERSHEY_PLAIN, 1, (0, 255, 255), 1)
cv2.putText(image, text, (20, 140), cv2.FONT_HERSHEY_SCRIPT_COMPLEX, 1, (0, 255,255),1)
cv2.putText(image, text, (20, 170), cv2.FONT_HERSHEY_SCRIPT_SIMPLEX, 1, (0, 255,255),1)
cv2.putText(image, text, (20, 200), cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 255, 255),1)
cv2.putText(image, text, (20, 230), cv2.FONT_HERSHEY_TRIPLEX, 1, (0, 255, 255),1)
cv2.imshow("PolyLines",image)
cv2.waitKey()
cv2.destroyAllWindows()
```

- ç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704370142037)

### å­—ä½“åˆ—è¡¨

| å­—ä½“åç§° | å­—ä½“è¯´æ˜|
| --- | --- |
| FONT_HERSHEY_SIMPLEX|æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“
| FONT_HERSHEY_PLAIN|å°å·æ— è¡¬çº¿å­—ä½“
| FONT_HERSHEY_DUPLEX|æ­£å¸¸å¤§å°æ— è¡¬çº¿å­—ä½“ï¼Œæ¯”FONT_HERSHEY_SIMPLEXæ›´å¤æ‚
| FONT_HERSHEY_COMPLEX|æ­£å¸¸å¤§å°æœ‰è¡¬çº¿å­—ä½“
| FONT_HERSHEY_TRIPLEX|æ­£å¸¸å¤§å°æœ‰è¡¬çº¿å­—ä½“ï¼Œæ¯”FONT_HERSHEY_COMPLEXæ›´å¤æ‚
| FONT_HERSHEY_COMPLEX_SMALL|FONT_HERSHEY_COMPLEXçš„å°è¯‘æœ¬
| FONT_HERSHEY_SCRIPT_SIMPLEX|æ‰‹å†™é£æ ¼å­—ä½“
| FONT_HERSHEY_SCRIPT_COMPLEX|æ‰‹å†™é£æ ¼å­—ä½“ï¼Œæ¯”FONT_HERSHEY_SCRIPT_SIMPLEXæ›´å¤æ‚

### é¢ å€’æ–‡å­—
```
import numpy as np                                                  
import cv2                                                          
canvas = np.zeros((300,300,3), np.uint8)                            
cv2.putText(canvas,"oeasy",(30,80),cv2.FONT_HERSHEY_DUPLEX,1,(0,0,255),1,8,True)
cv2.imshow("updown",canvas)                                         
cv2.waitKey()                                                       
cv2.destroyAllWindows()
```

- è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704370466144)

- å¯ä»¥åœ¨å›¾åƒä¸Šå†™å­—å—ï¼Ÿ

### åœ¨å›¾åƒä¸Šå†™å­—

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231104-1699092504730)

```
import cv2             
image = cv2.imread("/home/shiyanlou/kun1.png")
cv2.putText(image,"kun",(30,80),cv2.FONT_HERSHEY_DUPLEX,1,(0,0,255),1)
cv2.imshow("kun",image)
cv2.waitKey()          
cv2.destroyAllWindows()                           
cv2.imwrite('/home/shiyanlou/kunkun.png',image)
```

### è¿è¡Œç»“æœ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240104-1704370559535)

- å†™å­—çš„ä½œç”¨ åº”è¯¥å°±æ˜¯
	- æ”¹å˜ å¯¹åº”æ•°ç»„ ä¸­
	- å¯¹åº”åƒç´ çš„å€¼

### æ€»ç»“

- å¯ä»¥åœ¨ç©ºç™½é»‘åº•å›¾åƒä¸Šå†™å­—
	- å­—ä½“
	- é¢œè‰²
	- æœå‘
	- å¤§å°
	- ...éƒ½å¯ä»¥ä¿®æ”¹
- å¯ä»¥è¯•è¯•ä½¿ç”¨æ»šåŠ¨æ¡å—ï¼ŸğŸ¤”
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´	ğŸ‘‹

