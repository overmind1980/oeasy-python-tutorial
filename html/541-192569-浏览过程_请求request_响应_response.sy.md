---
show: step
version: 1.0
enable_checker: true
---

# å¯¼å…¥ request åŒ…

## æ–°çš„å¼€å§‹

- ç°åœ¨å°±è¦æ·±å…¥å­¦ä¹  python çˆ¬è™«äº†
	- æˆ‘ä»¬ä»å“ªé‡Œå¼€å§‹å‘¢ï¼Ÿ
	- é¦–å…ˆè®¿é—®ä¸€ä¸‹æœ¬åœ°ä¸»æœº

```
firefox http://localhost
```

- è¿æ¥å¤±è´¥
- æœ¬åœ°æ²¡æœ‰å¼€å¯webæœåŠ¡

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231214-1702559995198)

- <kbd>ctrl</kbd> + <kbd>c</kbd>
	- ç»ˆæ­¢ç«ç‹

### nginx

- è¦å¼€å¯é™æ€ç½‘é¡µæœåŠ¡å™¨
	- nginx
    - ngin çš„æ„æ€æ˜¯ engine x

```
sudo service nginx start
sudo service nginx status
```

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668769671876)

- æœåŠ¡å¯åŠ¨å®Œæˆä¹‹å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949090031)

- è¯•ç€ç”¨æµè§ˆå™¨è®¿é—® localhost

### è®¿é—®ç½‘é¡µ

```
firefox http://localhost
```

- åœ¨åœ°å€æ é‡Œçš„æ˜¯http://localhost
	- æ³¨æ„æ˜¯http
	- è€Œä¸æ˜¯http`s`
		- æ²¡æœ‰`s`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662949192013)

- èƒ½è®¿é—®
	- `è‡ªå®šä¹‰`ç½‘é¡µä¹ˆï¼Ÿ

### ç¼–è¾‘ç½‘é¡µ

- é¦–å…ˆåœ¨ç”¨æˆ·å®¿ä¸»æ–‡ä»¶å¤¹
	- å»ºç«‹ä¸€ä¸ªç½‘é¡µ

```
vi oeasy.html
```

- ç½‘é¡µæ–‡ä»¶å¦‚ä¸‹

```html
<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<title>menu</title>
		<meta charset="utf-8">
	</head>
	<body width="700px">
		<h1>menu</h1>
		<ul id="ulist">
			<li>
				<span class="food">è±†æ±</span>
				<price>10</price>
			</li>
			<li>
				<span class="food">ç¾Šç˜ªæ±¤</span>
				<price>15</price>
			</li>
			<li>
				<span class="food">æŠ˜è€³æ ¹</span>
				<price>20</price>
			</li>
		</ul>
	</body>
</html>
```

### ä¿å­˜ç½‘é¡µ

- å¤åˆ¶åç²˜è´´
	- <kbd>"</kbd><kbd>+</kbd><kbd>p</kbd>

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231214-1702560722970)

- ç„¶å:wq
	- ä¿å­˜å¹¶é€€å‡º

### ç½‘é¡µçš„æ ¹ç›®å½•

```shell
whereis nginx
```

- ç½‘é¡µæœåŠ¡å™¨æ ¹ç›®å½•åœ¨å“ªå‘¢ï¼Ÿ
	- /usr/share/nginx/html/

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240331-1711879932052)

### æ‹·è´ç½‘é¡µ è‡³ æœåŠ¡å™¨

```shell
ls /usr/share/nginx/html
sudo cp ./oeasy.html /usr/share/nginx/html
ls /usr/share/nginx/html
```

- sudo cp ./oeasy.html /usr/share/nginx/html
	- sudo ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ
	- cp æ‹·è´
	- æŠŠfood.html
	- ç½‘ç«™æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240331-1711879981294)

### æµè§ˆè¿‡ç¨‹

```
firefox http://localhost/oeasy.html
```

- æµè§ˆç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231215-1702609500691)

### æ£€æŸ¥å…ƒç´ 

- é€‰ä¸­ç«è‘«èŠ¦è“æ——
	- F12 æ£€æŸ¥å…ƒç´ 
	- é€‰æ‹©ç½‘ç»œ Networks

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366142481)

- å¦‚æœ<kbd>F12</kbd>æ²¡æœ‰ç”¨çš„è¯
	- åœ¨é”®ç›˜æœ€ä¸‹é¢ä¸€è¡Œæ‰¾åˆ°<kbd>Fn</kbd>é”®
	- <kbd>Fn</kbd>+<kbd>F12</kbd>
- å®åœ¨ä¸è¡Œå³é”®
	- æ£€æŸ¥å…ƒç´ ä¹Ÿå¯ä»¥æ‰¾åˆ°
- ç„¶ååˆ·æ–°

### åˆ·æ–°

- F5 ä¹Ÿå¯ä»¥åˆ·æ–°
	- åˆ·æ–°åä¼šçœ‹åˆ°ç½‘ç»œä¸­çš„çš„
		- è¯·æ±‚ requests
		- å“åº” response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366198856)

- é€‰ä¸­ oeasy.html æ–‡ä»¶
	- è¿™ä¸ªæ–‡ä»¶å°±æ˜¯nginx  
	- å“åº”httpçš„è¯·æ±‚ å¾—åˆ°çš„

### è¯·æ±‚ä¸å“åº”

- è¯·æ±‚å°±æ˜¯ 
	- request

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630412050376)

- å“åº”å°±æ˜¯ 
	- response

### è¯·æ±‚ request

- é¦–å…ˆä»æµè§ˆå™¨
	- å‘å‡ºä¸€ä¸ª`http get`è¯·æ±‚(request)
  - http
    - è¶…æ–‡æœ¬ä¼ è¾“åè®®
		- hyper-text transmit protocol
    - æ˜¯ç½‘ç»œä¼ è¾“ä¸­ä½¿ç”¨çš„åè®®
  - GET
    - è¯·æ±‚æ‰€ç”¨çš„æ–¹æ³•
    - é™¤äº† GETä¹‹å¤–
    - è¿˜æœ‰POSTç­‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240331-1711880204864)

- è¿™æ˜¯ ä»ç«ç‹æµè§ˆå™¨
	- å‘å¾€æœåŠ¡å™¨çš„ è¯·æ±‚
- è¯·æ±‚å¤´é‡Œé¢ 
	- éƒ½åŒ…æ‹¬ä¸€äº›ä»€ä¹ˆå‘¢ï¼Ÿ

### è¯·æ±‚å¤´ request head

- ç«ç‹æµè§ˆå™¨ä¼šè‡ªåŠ¨åŠ ä¸Šä¸€äº›è¯·æ±‚å¤´
  - Accept-Language
    - æ¥å—çš„è¯­è¨€
  - Host
    - è¢«è¯·æ±‚çš„ä¸»æœº
  - User-Agent
    - å‘è¯·æ±‚çš„æµè§ˆå™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406366911)

- nginx æœåŠ¡å™¨æ¥æ”¶åˆ°äº†è¯·æ±‚ä¹‹å
	- å°±ä¼šè¿›è¡Œå¤„ç†
	- å°±åƒè·‘å ‚çš„ ä¼šå¤„ç†å®¢äººè¦æ±‚ä¸€æ ·
	- æŠŠå®¢äººéœ€æ±‚ æç»™åå°æœåŠ¡å™¨
- åå°æœåŠ¡å™¨æ ¹æ®å®¢äººè¦æ±‚å¾—åˆ°ä¸€ä¸ªå›åº”é¡µ
	- nginx å°±æŠŠè¿™ä¸ª `å›åº”é¡µ` ä½œä¸º `è¯·æ±‚Request `çš„ `å“åº”Response`
    - ç„¶åè¿™ä¸ªå›åº”é¡µå°±è¿”å›åˆ°æµè§ˆå™¨äº†

### å“åº” Response

- æœåŠ¡å™¨æ ¹æ®æ¥æ”¶åˆ°çš„ä¸œè¥¿å¤„ç†
	- å°†ç»“æœä½œä¸ºå“åº”å‘å›ç»™æµè§ˆå™¨

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406600963)

- æµè§ˆå™¨ä¼šæ¥åˆ°å“åº”å¤´
  - Contentâ€”Type
    - æ¥æ”¶æ–‡ä»¶ç±»å‹
    	- htmlå°±åœ¨æµè§ˆå™¨ä¸­æ¸²æŸ“
    	- zipå°±ç›´æ¥ä¸‹è½½
  - Contentâ€”Length
    - å†…å®¹å­—èŠ‚é•¿åº¦
  - Date
    - æ¥æ”¶æ—¶é—´
  - Server
    - æœåŠ¡å™¨

### å®Œæˆ

- è¯·æ±‚-å“åº” è¿‡ç¨‹å®Œæˆäº†
  - æ•´ä¸ª http get ä¼šå¾—åˆ°ä¸€ä¸ªçŠ¶æ€ç (Status_Code)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20231015-1697366395464)

- Getè¯·æ±‚ å¾—åˆ°äº†å“åº”
  - æˆåŠŸçŠ¶æ€ç æ˜¯ 200
  - æ²¡æœ‰ä¿®æ”¹æ˜¯ 304
- å…·ä½“å•¥æ„æ€å‘¢ï¼ŸğŸ¤”

### 304

- æœ€åˆ æµè§ˆå™¨ å·²ç»å¾—åˆ° è¿™ä¸ªhtmlæ–‡ä»¶äº†
	- å¹¶ä¸”å·²ç» ç¼“å­˜åˆ°äº† æœ¬åœ°ç¡¬ç›˜
	- è€Œä¸” è®°å½•äº†è¿™ä¸ªhtmlæ–‡ä»¶çš„ ä¿®æ”¹æ—¶é—´

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668758245286)

- è¿™æ¬¡ è¯·æ±‚çš„æ—¶å€™
	- æŠŠè¿™ä¸ªhtml ä¸Šæ¬¡çš„ä¿®æ”¹æ—¶é—´
	- ä½œä¸ºè¯·æ±‚å¤´ ä¸€å¹¶å‘è¿‡å»
- å¦‚æœ æœåŠ¡å™¨ç«¯ çš„ç½‘é¡µ
	- æ²¡æœ‰ æ›´æ–°çš„ä¿®æ”¹
	- ç›´æ¥ å‘Šè¯‰ä½ 304
	- ç½‘é¡µ æˆ‘æœåŠ¡å™¨ å°±ä¸ä¼ ç»™ä½ äº†
	- ä½ å°± è¿˜ç”¨ä¸Šæ¬¡ç¼“å­˜çš„ å§
- é™¤æ­¤ä¹‹å¤– è¿˜æœ‰åˆ«çš„çŠ¶æ€ç å—ï¼Ÿ

### 404

- æ¯”å¦‚æˆ‘ä»¬è®¿é—®ä¸€ä¸ªæœåŠ¡å™¨ä¸­ä¸å­˜åœ¨çš„èµ„æº
	- æ¯”å¦‚è¿™ä¸ª favicon.ico

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630407149757)

- ç¡®å®æ˜¯404çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630407083152)

- ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿ

### 404

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668737376530)

- æ‰¾ä¸åˆ°è¿™ä¸ªurlå¯¹åº”çš„ç½‘é¡µ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668737389354)

### 404

- çŠ¶æ€404

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668757107812)

- 404å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ
  - ç‚¹å‡»çŠ¶æ€ç åé¢é‚£ä¸ªå°é—®å·
  - å¦‚æœæ²¡æœ‰ç½‘çš„è¯å°±æŠŠåœ°å€å¤åˆ¶ç²˜è´´å‡ºæ¥
	- https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status

### çŠ¶æ€ç 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630406931714)

- å¾€ä¸‹ç¿»
	- ç¡®å®æ‰¾åˆ°äº†å¯¹äº404çš„ç†è§£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668757299186)

- è¿™ä¸€å †304ã€404çš„çŠ¶æ€ç 
	- è°è§„å®šçš„å‘¢ï¼Ÿ

### è§„åˆ™

- è¿™ä¸€å¥—è§„åˆ™æ¥è‡ªäºç«ç‹å¯¹äº HTTP åè®®çš„ç†è§£
  - å…·ä½“è¯´å°±æ˜¯æ¥è‡ªäº
	- [rfc2616](https://www.rfc-editor.org/rfc/inline-errata/rfc2616.html)
- rfc2616 
	- å°±æ˜¯ Request for Comments: 2616
	- rfc æ˜¯ å¾æ±‚(request)æ„è§(comments)çš„ç¨¿å­
    - rfc2616 æ˜¯ å½“æ—¶å› ç‰¹ç½‘(internet) åä¼š(society) æå‡ºçš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20221118-1668757714896)

- é€šè¿‡è¿™ä¸ªå®šä¹‰äº† http åè®®çš„æœ€åˆçš„æ ·å­	
	- ä»rfc2616å¼€å§‹å°±æœ‰404äº†
	- rfc2616ä¹‹å‰è¿404éƒ½æ²¡æœ‰
- æœ‰äº†å¤±è´¥
	- ä¹Ÿå°±å­•è‚²äº†æˆåŠŸ

### æˆåŠŸ

- å°è¯•è®¿é—® http://localhost/50x.html
	- 200

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20240331-1711880782739)

- 200-299 
	- éƒ½æ˜¯æˆåŠŸ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210831-1630407043185)

## æ€»ç»“

- æˆ‘ä»¬å®‰è£…å¹¶å¯åŠ¨äº† 
	- nginx æœåŠ¡å™¨

|çŠ¶æ€ç  | çŠ¶æ€|
|---|---|
|200| Ok|
|304| Not modified|
|304| Not found|

- ä½¿ç”¨æµè§ˆå™¨è®¿é—®äº†æœåŠ¡å™¨ä¸Šçš„ç½‘é¡µ
	- æµè§ˆå™¨å‘é€äº†è¯·æ±‚
		- request
	- æœåŠ¡å™¨å›åº”äº†å“åº”
		- response

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20220912-1662951986226)

- åˆ°æ­¤ä¸ºæ­¢æˆ‘ä»¬è¿˜æ²¡æœ‰çˆ¬è™«
- çˆ¬è™« åœ¨å“ªå„¿ å‘¢ï¼ŸğŸ¤£
- ä¸‹æ¬¡å†è¯´ğŸ‘‹
