---
show: step
version: 1.0
enable_checker: true
---

# xpath è·¯å¾„è¡¨è¾¾å¼

## å›å¿†

- è¿™æ¬¡æ·±å…¥äº† xpath ä¸­çš„å…ƒç´ é€‰æ‹©
  - å¯ä»¥æ ¹æ®å…ƒç´ å±‚çº§å…³ç³»é€‰æ‹©
  - ä¹Ÿå¯ä»¥æ ¹æ®å…ƒç´ ä½ç½®é€‰æ‹©
  - è¿˜å¯ä»¥æ ¹æ®å±æ€§å…·ä½“å€¼é€‰æ‹©
  - è€Œä¸”å¯ä»¥æ ¹æ®æ–‡æœ¬çš„å€¼è¿›è¡Œé€‰æ‹©
  - ç”šè‡³å¼€å§‹ä½¿ç”¨é€šé…ç¬¦
- xpath æ˜¯æ•´ä¸ªçˆ¬å–çš„æ ¸å¿ƒ
  - æœ‰ä»€ä¹ˆä¸œè¥¿å¯ä»¥ç»ƒä¹ ä¹ˆï¼ŸğŸ¤”

### ç»ƒä¹ æ¥æº

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637464853090)

- æ„Ÿè°¢ Miloslav Nic æä¾›çš„å­¦ä¹ èµ„æº

### æ˜ç¡®ç›´æ¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637464950597)

- æ ¹ä¸‹çš„AAAä¸‹çš„DDDä¸‹çš„BBB

### // ä»»æ„å±‚çº§

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465048074)

- ä»»æ„å±‚çº§ä¸‹çš„DDDä¸‹çš„BBB

### ä»»æ„å…ƒç´  \*

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465123532)

- æ ¹ä¸‹çš„AAAä¸‹çš„CCCä¸‹çš„DDDä¸‹çš„ä»»æ„å…ƒç´ 

### ä»»æ„å…ƒç´  \*

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465141210)

- æ ¹ä¸‹çš„ä»»æ„å…ƒç´ ä¸‹çš„ä»»æ„å…ƒç´ ä¸‹çš„ä»»æ„å…ƒç´ ä¸‹çš„BBB

### æ‰€æœ‰å…ƒç´ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465153365)

- ä»»æ„å±‚çº§ä¸‹çš„ä»»æ„å…ƒç´ 

### [] é‡Œçš„é€šè¿‡æ’è¡Œé€‰æ‹©

- ä½¿ç”¨è°“è¯è¿›è¡Œç­›é€‰
	- ç¬¬ä¸€ä¸ªå…ƒç´ 

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465210729)

- æˆ–æœ€åä¸€ä¸ªå…ƒç´ 

### @ å±æ€§é€‰æ‹©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465270501)

### @\* ä»»æ„å±æ€§


![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465305130)

- ä»»æ„è·¯å¾„ä¸‹çš„æœ‰idå±æ€§çš„BBBå…ƒç´ 

### å±æ€§å€¼é€‰æ‹©

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465403238)

- ä»»æ„è·¯å¾„ä¸‹çš„
	- æœ‰idå±æ€§å€¼ä¸ºb1çš„
		- BBBå…ƒç´ 
- normalize-space
	- å¯å°†å±æ€§å€¼å¼€å¤´å’Œç»“å°¾çš„ç©ºæ ¼å»æ‰ 

### å­èŠ‚ç‚¹è®¡æ•° count

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465478311)

- ä»»æ„è·¯å¾„ä¸‹çš„
	- æœ‰ä¸¤ä¸ªBBBå­å…ƒç´ çš„
	- ä»»æ„å…ƒç´ 

### ä»»æ„å­èŠ‚ç‚¹è®¡æ•°

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465496014)

- ä»»æ„è·¯å¾„ä¸‹çš„
	- æœ‰ä»»æ„ä¸¤ä¸ªå…ƒç´ çš„
	- ä»»æ„å…ƒç´ 

### æŒ‡å®šæ ‡ç­¾å

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465555824)

### æ ‡ç­¾åå¼€å§‹äº start-with

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465600865)

### æ ‡ç­¾ååŒ…å« contains

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465629077)

### å­—ç¬¦ä¸²é•¿åº¦ string-length

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465667964)

### è·¯å¾„çš„å¹¶é›† |

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465717155)

### ç›´æ¥çš„å­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465816123)

- å…¶å®/child:AAA å°±æ˜¯/AAA
- child:ä¸€èˆ¬å¯çœç•¥
- å­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä¸æ˜¯å­èŠ‚ç‚¹
	- ä½†å±äºåä»£èŠ‚ç‚¹


### åä»£èŠ‚ç‚¹ descendant

- descendant
	- [dÉªËˆsendÉ™nt]

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465912628)

- child ç›´æ¥å­èŠ‚ç‚¹
- decendant åä»£èŠ‚ç‚¹

### ä»»æ„å±‚çº§é…åˆå’Œåä»£èŠ‚ç‚¹ descendant

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637465983899)

- ç»è¿‡éªŒè¯
  - //CCC/descendant::\*
    - å°±æ˜¯//CCC//\*
  - //CCC/descendant::DDD
    - å°±æ˜¯//CCC//DDD
- æ‰€ä»¥
  - /descendant::å°±æ˜¯//
  - /child::å°±æ˜¯/

### ç›´æ¥çˆ¶äº²

- childæ˜¯ç›´å±å­èŠ‚ç‚¹
- parentæ˜¯ç›´å±çˆ¶èŠ‚ç‚¹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637466556653)

- ç»è¿‡éªŒè¯
  - /parent::\*
    - å°±æ˜¯..
  - //DDD/parent::\*
    - å°±æ˜¯//DDD/..

### ç¥–å…ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637467018257)

- ancestor å’Œ parent
  - ancestor æ˜¯å†ä»£ç¥–å…ˆ
  - parent æ˜¯ç›´æ¥çˆ¶æ¯

### å¼Ÿå¼Ÿ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637467129478)

- åŒä¸€çº§åˆ«ä¸‹çš„åç»­èŠ‚ç‚¹
  - å¼Ÿå¼Ÿ
  - following-sibling::
  - [ËˆsÉªblÉªÅ‹]

### å“¥å“¥

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637486731524)

- åŒä¸€çº§åˆ«ä¸‹çš„å‰é¢çš„èŠ‚ç‚¹
  - å“¥å“¥
  - preceding-sibling::
  - [prÉªËˆsiËdÉªÅ‹]

### åç»­

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637486936577)

- åœ¨é€‰ä¸­èŠ‚ç‚¹ä¹‹åçš„æ‰€æœ‰èŠ‚ç‚¹
  - åç»­
  - åŒ…æ‹¬ä»–çš„å¼Ÿå¼ŸèŠ‚ç‚¹å’Œå¼Ÿå¼ŸèŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹
  - sibling[ËˆsÉªblÉªÅ‹]

### åç»­ 2

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637487043196)

- ä¸ä½†æ˜¯åŒçº§çš„å¼Ÿå¼ŸèŠ‚ç‚¹
- å°±è¿ä¸Šä¸€è¾ˆç”šè‡³æ›´ä¸Šè¾ˆåˆ†ä¸­æ’åé åçš„æ‰€æœ‰åˆ†æ”¯éƒ½ç®—æ•°
  - è¿™å°±æ˜¯åç»­
  - following::
  - ä¸åŒ…å«ç¥–å…ˆèŠ‚ç‚¹

### å°Šé•¿

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637487379082)

- åœ¨é€‰ä¸­èŠ‚ç‚¹ä¹‹å‰çš„æ‰€æœ‰èŠ‚ç‚¹
  - å‰è¾ˆ
  - åŒ…æ‹¬ä»–çš„å“¥å“¥èŠ‚ç‚¹å’Œå“¥å“¥èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹

### å°Šé•¿ 2

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637487474865)

- ä¸ä½†æ˜¯åŒçº§çš„å“¥å“¥
- å°±è¿ä¸Šä¸€è¾ˆè®¾ç½®æ›´ä¸Šå¤‡ä»½ä¸­æ’åé å‰çš„æ‰€æœ‰åˆ†æ”¯éƒ½ç®—æ•°
  - è¿™å°±æ˜¯å‰è¾ˆ
  - preceding::
  - ä¸åŒ…å«ç¥–å…ˆèŠ‚ç‚¹

### è‡ªèº«å’Œæ‰€æœ‰åä»£

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637487610189)

- è‡ªå·±å’Œæ‰€æœ‰åä»£
  - åŒ…æ‹¬è‡ªèº«èŠ‚ç‚¹
  - ä¹ŸåŒ…æ‹¬æ‰€æœ‰åä»£èŠ‚ç‚¹

### è‡ªèº«å’Œæ‰€æœ‰åä»£ 2

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20211121-1637487687688)

- åŒ…æ‹¬è‡ªèº«èŠ‚ç‚¹
- ä¹ŸåŒ…æ‹¬æ‰€æœ‰åä»£èŠ‚ç‚¹
  - descendant-or-self::

### æ€»ç»“

- è¿™æ¬¡æ·±å…¥äº† xpath ä¸­çš„å…ƒç´ é€‰æ‹©
  - ç›´æ¥é€‰æ‹©
    - /html
    - /child::html
    - /child::html/child::body
  - ä»»æ„åä»£
    - //div
    - /descendant::div
  - ä»»æ„å…ƒç´ 
    - //div/\*
  - é€šè¿‡æ’è¡Œé€‰æ‹©
    - /span[1]
    - /div[last()]
    - /h1[first()]
  - å±æ€§é€‰æ‹©
    - //div[@*]
    - //div[not(@*)]
    - //a[@href]
  - å±æ€§å€¼é€‰æ‹©
    - //a[@class='style1']
  - å»å†—ä½™ç©ºæ ¼
    - //div[normalize-space(@id)='mydiv']
  - å­èŠ‚ç‚¹è®¡æ•°
    - //\*[count(a)=2]
    - //div[count(a)<3]
    - //div[count(*)>5]
  - æ ‡ç­¾åå¼€å§‹äº
    - //\*[start-with(name(),'page')]
    - //\*[start-with(name(),'p')]
    - //div[start-with(name(),'p')]
  - æ ‡ç­¾ååŒ…å«
    - //\*[contains(name(),'note')
    - //div[contains(name(),'note')
  - é•¿åº¦
    - //\*[string-length(name())>3]
  - å¹¶é›†
    - //div|//span
  - ç›´æ¥çˆ¶äº²
    - //h1/parent::\*
    - //h2/parent::div
    - //h2/..
  - ç¥–å…ˆ
    - //a[@id='link']/ancestor::\*
  - å¼Ÿå¼Ÿ
    - //h1[@id='å…³ç¾½']/following-siblings::\*
  - å“¥å“¥
    - //h3[@id='å¼ é£']/preceding-siblings::\*
  - åç»­
    - //span[@id='åˆ˜å¤‡']/following::\*
  - å°Šé•¿
    - //span[@id='å…³ç´¢']/preceding::\*
  - è‡ªèº«å’Œæ‰€æœ‰åä»£
    - //span[@id='è¯¸è‘›ç»']/decendant-or-self::\*
- xpath æ˜¯æ•´ä¸ªçˆ¬å–çš„æ ¸å¿ƒ
- å¦‚æœæˆ‘åªæƒ³çˆ¬å–æ–‡æœ¬
- è€Œä¸”æ˜¯è·¨å…ƒç´ åœ°çˆ¬å–æ–‡æœ¬
- æœ‰ä»€ä¹ˆæŠ€å·§ä¹ˆï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´
