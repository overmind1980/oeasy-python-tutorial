---
show: step
version: 1.0
enable_checker: true
---

# æ–‡ä»¶ç±»å‹

## å›å¿†ä¸ŠèŠ‚è¯¾å†…å®¹ğŸ¤”

- ä¸Šæ¬¡äº†è§£äº†ç¼©è¿›çš„å„ç§æ–¹å¼
	- æ­£å¸¸æ¨¡å¼ä¸‹ç”¨ `<<` ç¼©è¿›
	- æ’å…¥æ¨¡å¼ä¸‹ç”¨ `tab` ç¼©è¿›
	- æ˜¾ç¤ºç¼©è¿›æƒ…å†µ `:set listchars=eol:$,tab:>-,space:_`

- æœ‰å…³äºç¼©è¿›å¯¹åº”ç©ºæ ¼æ•°çš„å‚æ•°
  - expandtab
  - shiftwidth
  - tabstop
  - softtabstop
  - autoindent

- ç®€å†™ä¸º `:set noet sw=4 ts=4 sts=4 ai`
- ä¸åŒçš„æ–‡ä»¶ç±»å‹å¯ä»¥å¯¹åº”ä¸åŒçš„ç¼©è¿›é•¿åº¦å—ï¼Ÿï¼ŸğŸ¤”

### æ£€æµ‹æ–‡ä»¶ç±»å‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20200930-1601437263429)

- é¦–å…ˆéœ€è¦æ£€æµ‹æ–‡ä»¶ç±»å‹
- `:filetype` å¯ä»¥è®¾ç½®å½“å‰æ–‡ä»¶ç±»å‹æ£€æµ‹ä¿¡æ¯
	- `:filetype on` æ£€æµ‹æ–‡ä»¶æ‰©å±•å
	- `:filetype off` å–æ¶ˆæ£€æµ‹æ–‡ä»¶æ‰©å±•å
- å¦‚æœæ˜¯`.c`
	- å¹¶ä¸”`:filetype on` 
	- å°±å¯ä»¥æ£€æµ‹æ–‡ä»¶ç±»å‹ä¸º `.c`
	- é‚£æˆ‘æ€ä¹ˆçŸ¥é“ `filetype` æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ
- `:set filetype?`
	- ç»“æœæ˜¯ `filetype=c`
- ä½†æ˜¯å¦‚ä½•å•ç‹¬è®¾ç½® `.c` æ–‡ä»¶ç¼©è¿›ä¸º `8` å‘¢ï¼Ÿ

### æ–‡ä»¶ç±»å‹ç¼©è¿›è®¾ç½®

- æˆ‘ä»¬ä¹¦å†™ä¸€ä¸ª `demo.c`
- å¯ä»¥å‘ç°è¿™ä¸ªæ–‡ä»¶ tab æ˜¯å¯¹åº”ç€ 4 ä¸ªç©ºæ ¼çš„

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20200930-1601438792635)

- å¦‚æœæƒ³å•ç‹¬è®¾ç½® `.c` æ–‡ä»¶ç±»å‹çš„ç¼©è¿›çš„è¯
	- éœ€è¦æ‰“å¼€æ–‡ä»¶ç±»å‹ç¼©è¿›çš„å¼€å…³
	- `:filetype indent on`

### æ‰¾åˆ°ç¼©è¿›é…ç½®æ–‡ä»¶
- ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶çš„ä½ç½®åœ¨ `/usr/share/vim/vim81/indent/`
	- `c` å¯¹åº” `c.vim`
	- `java` å¯¹åº” `java.vim`
	- `html` å¯¹åº” `html.vim`
	- ä¸åŒçš„æ–‡ä»¶ç±»å‹å¯ä»¥è®¾ç½®ä¸åŒçš„ç¼©è¿›
		- `c` ç¼©è¿›ä¸º `8`
		- `java` ç¼©è¿›ä¸º `4`
		- `html` ç¼©è¿›ä¸º `2`
	- æ‰¾åˆ°äº† `/usr/share/vim/vim81/indent/c.vim` å°±å¯ä»¥è®¾ç½®`c`çš„ç¼©è¿›
- åœ¨æœ€ååŠ ä¸Š 
	- `:set et sw=8 ts=8 sts=8 ai`
- ç„¶åé€€å‡ºå¹¶é‡æ–°æ‰“å¼€ `demo.c` 
- å†<kbd>g</kbd> <kbd>g</kbd> <kbd>=</kbd> <kbd>G</kbd>
- å°±å¯ä»¥æŒ‰ç…§æ–°è®¾ç½®çš„ `/usr/share/vim/vim81/indent/c.vim`æ¥é‡æ–°æ§åˆ¶ç¼©è¿›äº†

### æ›´æ”¹æ–‡ä»¶ç±»å‹

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20200930-1601438943963)

- æˆ‘ä»¬æ‰“å¼€ `demo.c` æ—¶,ç³»ç»Ÿä¼šæ£€æµ‹ä»–çš„æ–‡ä»¶ç±»å‹
- ä½†æ˜¯å¦‚æœæˆ‘ä»¬éè¦ `ç¡¬` è¦è¯´ä»–æ˜¯ä¸€ä¸ª `java` æ–‡ä»¶ä¼šå¦‚ä½•å‘¢ï¼ŸğŸ¤ª
- `:set filetype=java`
- æ–‡ä»¶å¯¹äº `include` ä¹‹ç±»çš„è¯­æ³•é«˜äº®æ¶ˆå¤±äº†
- <kbd>g</kbd> <kbd>g</kbd> <kbd>=</kbd> <kbd>G</kbd> 
- è®©æ–‡ä»¶ç¼©è¿›çš„æ•°é‡å˜å›äº† `4`
	- æŒ‰ç…§`java`æ–‡ä»¶ç¼©è¿›çš„è¦æ±‚æ¥åš
- é«˜äº®å¯ä»¥æ ¹æ®æ–‡ä»¶ç±»å‹è€Œä¸åŒä¹ˆï¼ŸğŸ¤”

### æ–‡ä»¶ç±»å‹è¯­æ³•é«˜äº®

```bash
#æ‰¾å‡ºæ‰€æœ‰çš„java.vimæ–‡ä»¶
sudo find / -name "java.vim" ã€€
```
- æ‰¾å‡ºæ‰€æœ‰å’Œ java æœ‰å…³çš„æ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20200930-1601439368435)

- åœ¨ `indent` ä¸‹çš„ `java.vim` è´Ÿè´£ç¼©è¿›
- åœ¨ `syntax` ä¸‹çš„ `java.vim` è´Ÿè´£è¯­æ³•é«˜äº®
- è¯­æ³•é«˜äº®çš„è®¾ç½®åœ¨
	- `/usr/share/vim/vim81/syntax/`ä¸‹é¢

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20200930-1601439571997)

- `:syntax on` å¯ä»¥è®¾ç½®å…³é”®è¯é«˜äº®ï¼Œè¿™ä¸ªæ˜¯æ‰€æœ‰è¯­æ³•é«˜äº®çš„æ ¹å¼€å…³

### æ–‡ä»¶ç±»å‹çš„æ’ä»¶
- é™¤æ­¤ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥åŠ è½½ `java` æ–‡ä»¶ç±»å‹çš„çš„æ’ä»¶ `plugin`
	- æ–‡ä»¶ç±»å‹æ’ä»¶å¯ä»¥è®¾ç½®ä¸€é”®ç¼–è¯‘è¿è¡Œã€è·³è½¬åˆ°å‡½æ•°å®šä¹‰ä¹‹ç±»çš„
	- å‰ææ˜¯ `:set filetype plugin on`
- æ–‡ä»¶ç±»å‹æ’ä»¶çš„è®¾ç½®åœ¨
	- `/usr/share/vim/vim81/ftplugin/`ä¸‹é¢
	- ftplugin = FileType Plugin
- å›å¿†æ–‡ä»¶ç±»å‹ç¼©è¿›å’Œè¯­æ³•
	- åœ¨ `indent` ä¸‹çš„ `java.vim` è´Ÿè´£ç¼©è¿›
	- åœ¨ `syntax` ä¸‹çš„ `java.vim` è´Ÿè´£è¯­æ³•é«˜äº®
- åœ¨ `ftplugin` ä¸‹çš„ `java.vim` 
	- è´Ÿè´£é’ˆå¯¹ `javaæ–‡ä»¶ç±»å‹` çš„æ’ä»¶

### å‘½åè§„åˆ™
- é™¤äº†å¯¹äºæ¯ä¸ªç”¨æˆ·éƒ½å¥½ä½¿çš„é«˜äº®ã€ç¼©è¿›å’Œæ’ä»¶ä¹‹å¤–
- ç”¨æˆ·è¿˜å¯ä»¥è®¾ç½®åªå¯¹äºè‡ªå·±å¥½ä½¿çš„é«˜äº®ã€ç¼©è¿›å’Œæ’ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210725-1627192711494)

- ä»¥ `java` è¯­è¨€çš„æ’ä»¶æ¥ä¸¾ä¾‹
- ç³»ç»Ÿé€šç”¨æ–‡ä»¶å¤¹
	- `/usr/share/vim/vim81/ftplugin/java.vim`
	- `/usr/share/vim/vim81/ftplugin/java_xxx.vim`
	- `/usr/share/vim/vim81/ftplugin/java/xxx.vim`
- ç”¨æˆ·ä¸“ç”¨æ–‡ä»¶å¤¹
	- `~/.vim/ftplugin/java.vim`
	- `~/.vim/ftplugin/java_def.vim`
	- `~/.vim/ftplugin/java/header.vim` 
- ä¸Šé¢æ˜¯å‘½åçš„è§„åˆ™
	- java å¯¹åº”çš„å°±æ˜¯ filetype

### æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Ÿ
- å¦‚æœæ²¡æœ‰æ–‡ä»¶å¤¹çš„è¯å°±è¦æ–°å»º
  - `:!mkdir -p ~/.vim/ftplugin`
  - æ³¨æ„æ˜¯ `ftplugin` è€Œä¸æ˜¯ `plugin`
  - `plugin` é‡Œé¢çš„æ’ä»¶å…¨éƒ¨éƒ½è¢«åŠ è½½
  - `ftplugin` é‡Œé¢çš„æ’ä»¶æ ¹æ®æ–‡ä»¶ç±»å‹åŠ è½½
	
### å°è¯•åˆ†æ–‡ä»¶ç±»å‹è¿›è¡Œæ§åˆ¶

- ä¿å­˜å
- æ‰“å¼€ java æ–‡ä»¶æ—¶
  - çŠ¶æ€æ å‘Šè¯‰æˆ‘è¿™æ˜¯ java æ–‡ä»¶
	- ç¬¬ä¸‰è¡Œ set statusline=[oeasy-java]%F%m 
- æ‰“å¼€ css æ–‡ä»¶æ—¶
  - çŠ¶æ€æ å‘Šè¯‰æˆ‘è¿™æ˜¯ css æ–‡ä»¶
  - ç¬¬ä¸‰è¡Œ set statusline=[oeasy-css]%F%m 
- éƒ½è®¾ç½®å¥½ä¹‹å
- åˆ†åˆ«æ‰“å¼€javaæ–‡ä»¶å’Œcssæ–‡ä»¶

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210725-1627210427860)

### å¼ºè¡ŒæŒ‡å®š

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210725-1627211240763)

- å¦‚æœæˆ‘åè¯´ `css` æ–‡ä»¶æ˜¯ `java` æ–‡ä»¶ä¼šå¦‚ä½•å‘¢ï¼Ÿ
	- å¯ä»¥æ³¨æ„åˆ°çŠ¶æ€æ çš„å˜åŒ–
	- ç”±äºä¸åŒæ–‡ä»¶ç±»å‹ `filetype` çš„ `syntax` æ–‡ä»¶ä¸åŒ
	- ç”¨ `css` çš„è¯­æ³•å»æ ‡æ³¨ `java` çš„é«˜äº®ç»„
	- æ‰€ä»¥é«˜äº®æ˜¾ç¤ºçš„çŠ¶æ€ä¹Ÿä¸åŒ

## æ€»ç»“

- æ ¹æ®æ‰©å±•åæˆ‘ä»¬å¯ä»¥è®¾ç½®æŸäº›ç‰¹å®šç±»å‹æ–‡ä»¶çš„é…ç½®
- ç›¸å…³æ–‡ä»¶ç±»å‹çš„è®¾ç½®æ”¾åœ¨ç›¸åº”çš„æ–‡ä»¶å¤¹é‡Œ
- æ–‡ä»¶ç±»å‹ç¼©è¿›æ–‡ä»¶å¤¹
	- `/usr/share/vim/vim81/indent/`
- æ–‡ä»¶ç±»å‹è¯­æ³•é«˜äº®æ–‡ä»¶å¤¹
	- `/usr/share/vim/vim81/syntax/`
- æ–‡ä»¶ç±»å‹æ’ä»¶æ–‡ä»¶å¤¹
	- ç³»ç»Ÿé€šç”¨æ–‡ä»¶å¤¹
		- `/usr/share/vim/vim81/ftplugin/java.vim`
		- `/usr/share/vim/vim81/ftplugin/java_xxx.vim`
		- `/usr/share/vim/vim81/ftplugin/java/xxx.vim`
	- ç”¨æˆ·ä¸“ç”¨æ’ä»¶æ–‡ä»¶å¤¹
		- `~/.vim/ftplugin/java.vim`
		- `~/.vim/ftplugin/java_def.vim`
		- `~/.vim/ftplugin/java/header.vim` 
- åœ¨ æ–‡ä»¶å¤¹`~/.vim/ftplugin`ä¸­ çš„ `html.vim` çš„è®¾ç½®
	- åªé’ˆå¯¹ `html` 
	- åŒ…æ‹¬æ–‡ä»¶çš„ç¼©è¿›ã€é…è‰²ã€è¯­æ³•é«˜äº®ã€è¡Œå·ã€çŠ¶æ€æ ç­‰
- `:filetype indent on` æ–‡ä»¶ç±»å‹ç¼©è¿›ç”Ÿæ•ˆ
- `:filetype syntax on` æ–‡ä»¶ç±»å‹è¯­æ³•é«˜äº®ç”Ÿæ•ˆ
- `:filetype plugin on` æ–‡ä»¶ç±»å‹æ’ä»¶ç”Ÿæ•ˆ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210805-1628161602098)

- è¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„å—ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹






