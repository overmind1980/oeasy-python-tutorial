---
show: step
version: 1.0
enable_checker: true
---

# çŠ¶æ€æ¨ªæ¡

## å›å¿†ä¸ŠèŠ‚è¯¾å†…å®¹ğŸ¤”

- æˆ‘ä»¬ä¸Šæ¬¡ç ”ç©¶äº†æ ‡å°º
- æ ‡å°º
  - å¼€å¯ `se ru`
  - å…³é—­ `se noru`
- è¡Œå·
  - å¼€å¯ `se nu`
  - å…³é—­ `se nonu`
- å‘½ä»¤ä½ç½®
  - å¼€å¯ `se showcmd`
  - å…³é—­ `se noshowcmd`
- è·³è½¬
	- ç”¨ <kbd>2</kbd><kbd>9</kbd> <kbd>G</kbd> è·³è½¬è¡Œå·
	- ç”¨ <kbd>1</kbd><kbd>9</kbd> <kbd>|</kbd> è·³è½¬åˆ—å·
	- ç”¨ <kbd>2</kbd><kbd>9</kbd> <kbd>%</kbd> è·³åˆ°æ•´ä¸ªæ–‡ä»¶ 29% çš„ä½ç½®

### å‡†å¤‡ç¯å¢ƒ

```bash
# ä¸‹è½½ç´ æ
git clone http://github.com/overmind1980/vimtutorial.git
#è¿›å…¥ç›®å½•
cd vimtutorial
#è¿˜æ˜¯ä»æœ€ç®€å•çš„vimå¼€å§‹è®¾ç½®èµ·
vi -u NONE oeasy.java
```

### è®¾ç½®å…‰æ ‡è¡Œ

- æ¥çœ‹ä¸€ä¸ªå¼€å…³option
- å…‰æ ‡è¡Œ `cursorline`
	- å…‰æ ‡ `cursor`
	- è¡Œ `line`
- `:set cursorline`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210805-1628145706714)

- `h 'cursorline'`
	- ç»™ `cursorline` åŠ äº†å•å¼•å·
	- è¯´æ˜ `cursorline` æ˜¯ä¸€ä¸ªå±æ€§ `option`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210805-1628145808345)

### è®¾ç½®å…‰æ ‡åˆ—

- æœ‰è¡Œå°±æœ‰åˆ—
- å…‰æ ‡è¡Œ `cursorcolumn`
	- å…‰æ ‡ `cursor`
	- è¡Œ `column`
- `:set cursorcolumn`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210805-1628146050682)

- `h 'cursorcolumn'`
	- ç»™ `cursorcolumn` åŠ äº†å•å¼•å·
	- è¯´æ˜ `cursorcolumn` æ˜¯ä¸€ä¸ªå±æ€§ `option`

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210805-1628146058038)

### æ”¹å˜åº•ä¸‹çš„çŠ¶æ€æ¨ªæ¡

- æœ‰äº†è¡Œåˆ—ä½ç½®
- å†é…åˆæ ‡å°ºruler
- å…‰æ ‡ä½ç½®å°±å¾ˆæ˜ç¡®äº†
- åœ¨ `:h ruler` çš„æ—¶å€™
- å¶ç„¶å‘ç°äº†ä¸€ä¸ªæ–°å¤©åœ° `statusline`
	- `statusline` æ„æ€æ˜¯çŠ¶æ€æ¨ªæ¡
	- åœ¨å€’æ•°ç¬¬ 2 è¡Œ
	- `statusline` ä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥ `set` çš„ä¸œè¥¿
	- æˆ‘ä»¬æ¥æŸ¥çœ‹ä¸€ä¸‹æ‰‹å†Œ
	- `:h statusline`
	- å¥½åƒå¯ä»¥ç›´æ¥ç»™ `statusline` èµ‹å€¼
	- æˆ‘ç›´æ¥èµ‹ä¸€ä¸ª `oeasy`
- `:set statusline=oeasy`

- ç„¶åè¿˜éœ€è¦è®¾ç½® `laststatus`
  - è®¾ç½® laststatus = 0ï¼Œä¸æ˜¾å¼çŠ¶æ€è¡Œ
  - è®¾ç½® laststatus = 1ï¼Œä»…å½“çª—å£å¤šäºä¸€ä¸ªæ—¶ï¼Œæ˜¾ç¤ºçŠ¶æ€è¡Œ
  - è®¾ç½® laststatus = 2ï¼Œæ€»æ˜¯æ˜¾å¼çŠ¶æ€è¡Œ
- `:set laststatus=2`

### statuslineä¸Šå¯ä»¥æ”¾ä»€ä¹ˆå‘¢ï¼Ÿ
- `:h 'statusline'`

![](https://labfile.oss.aliyuncs.com/courses/2840/helpStatusLine.png)

### æ˜¾ç¤ºå±æ€§

- é™¤äº†å­—ç¬¦ä¸²å¸¸é‡ä¹‹å¤–æ˜¯å¦èƒ½æ˜¾ç¤ºä¸€äº›åˆ«çš„å±æ€§å‘¢ï¼Ÿ
	- ç»§ç»­ç¿»å¸®åŠ©æ‰‹å†Œ 
	- æ‰¾åˆ°ç›¸å…³çš„ `items`
	- å„ç§ `items` æœ‰ä¸åŒçš„å±æ€§ï¼ˆæ•°å­—ã€æ–‡æœ¬ã€æ ‡å¿—ï¼‰
	- æ¯ä¸ª `item` å¯¹åº”ä¸€ä¸ªå­—æ¯
	- è¿™ä¸ªå­—æ¯éœ€è¦é€šè¿‡ `%` æ¥è¿›è¡Œè½¬ä¹‰
	- `F` å¯¹åº”æ–‡ä»¶å
- `:set statusline=[oeasy]%F`
	- æ­¤æ—¶ï¼ŒçŠ¶æ€æ¡å°±æ˜¾ç¤º `[oeasy]å½“å‰æ–‡ä»¶å`

![](https://labfile.oss.aliyuncs.com/courses/2840/statuslineItem)

### æ ‡å¿—å±æ€§

- ç»§ç»­ç¿»çœ‹å±æ€§
	- `Flag` æ˜¯æ ‡å¿—ä½
	- `m` æ˜¯ä¸€ä¸ªå…³äºæ˜¯å¦å·²ç»ä¿®æ”¹çš„æ ‡å¿—ä½
	- æŠŠ `%m` è¿½åŠ è¿›å…¥ `statusline`
- `:set statusline=[oeasy]%F%m`
- ä¿®æ”¹æ–‡ä»¶åä¼šæ˜¾ç¤ºæœªä¿å­˜çš„ `[+]`
	- è§‚å¯Ÿæ•ˆæœ
- ä¿å­˜å `[+]` ä¼šæ¶ˆå¤±
	- æš—ä¸­è§‚å¯Ÿ... 

![](https://labfile.oss.aliyuncs.com/courses/2840/helpstatusflag.png)

### æ•°å€¼å±æ€§

- æŸ¥åˆ°çŠ¶æ€æ ç»†èŠ‚
	- `N` ä»£è¡¨ `Number` ä»£è¡¨ `item` æ˜¯ä¸€ä¸ªæ•°å€¼ç±»å‹
	- è¡Œå· `l`ã€åˆ—å· `c`ã€ç™¾åˆ†æ¯” `p` éƒ½æ˜¯æ•°å€¼ç±»å‹
	- ç”¨ `[`ã€`]` æŠŠæ•°å€¼å‹å˜é‡åˆ†å¼€
	- `%%` å¯ä»¥æŠŠ `%` è½¬ä¹‰æ˜¾ç¤ºå‡ºæ¥
- `:set statusline=[oeasy]%F%m[%l,%c]%p%%`

![](https://labfile.oss.aliyuncs.com/courses/2840/statusNumber.png)

- çŠ¶æ€æ æ•°å€¼è¿˜å¯ä»¥éšç€å…‰æ ‡å˜åŒ–ğŸ˜†

### æ§åˆ¶å®½åº¦

![](https://labfile.oss.aliyuncs.com/courses/2840/statuswidth.png)

- å¯ä»¥ç”¨æ ¼å¼æ¥æ§åˆ¶å®½åº¦
- `%-0{MinWidth}.{MaxWidth}{item}`
- `%-040.40F`å°±æ˜¯ç”¨ `40` çš„å›ºå®šå®½åº¦æ˜¾ç¤º`F`
- å¦‚æœè¶…è¿‡èŒƒå›´çš„è¯å°±ä¼šæŠŠå‰é¢éƒ¨åˆ†éšè—
- `:set statusline=[oeasy]%-040.40F%m[%l,%c]%p%%`
- ä¸€è¡Œæ€»å…± `80` å­—ç¬¦
- åé¢çš„éƒ¨åˆ†æ€ä¹ˆåŠï¼Ÿ

### æˆç»„

![](https://labfile.oss.aliyuncs.com/courses/2840/statuslineGroupItems )

- æˆ‘ä»¬å¯ä»¥æŠŠè¡Œå’Œåˆ—ç»„æˆä¸€ä¸ª `items group`
- ç”¨ `(`ã€`)` æ¥å°è£…è¿™ä¸ªç»„
	- ç”¨ `%` å¯¹ `(`ã€`)` è¿›è¡Œè½¬ä¹‰
	- `:set statusline=%([%l,%c]%)`
	- è¿™æ ·å°±å¯ä»¥ç»Ÿä¸€è®¾ç½®è¿™ä¸ªæ ‡å°ºç»„çš„å®½åº¦
	- `:set statusline=%-010.10([%l,%c]%)`
		- æ ‡å°ºç»„çš„å®½åº¦å›ºå®šä¸º10
- åŒç†æ–‡ä»¶åå’Œæ–‡ä»¶æ˜¯å¦ä¿®æ”¹ä¹Ÿå¯ä»¥ç¼–æˆä¸€ç»„
	- `:set statusline=%(%F%m%)`

### æœ€ç»ˆæ•´åˆ

![](https://labfile.oss.aliyuncs.com/courses/2840/statusFullString.png)

- æœ€ç»ˆæ•´åˆæ€»å…±åˆ†ä¸ºä¸‰éƒ¨åˆ†
  - æ–‡ä»¶ `%-040.40(%F%m%)`
  - æ ‡å°º `%-030.30([%l,%c]%)`
  - æ¯”ä¾‹ `%p%%`

- å…³äºçŠ¶æ€æ¨ªæ¡è¿˜æœ‰ä¸€ä¸ªæ€»å¼€å…³
  - `:set laststatus=0` å…³é—­
  - `:set laststatus=2` å¼€å¯
    
## æ€»ç»“

- æˆ‘ä»¬è¿™æ¬¡äº†è§£åˆ°äº†çŠ¶æ€æ¨ªæ¡
  - é€šè¿‡è½¬ä¹‰è¡¨ç¤º `item`
  - æ§åˆ¶ `item` å®½åº¦çš„æ–¹æ³•
  - å°† `item` æˆç»„çš„æ–¹æ³•
  - è¿˜æœ‰ä¸€ä¸ªæ€»å¼€å…³ `laststatus`

- ä½†æ˜¯æ¯æ¬¡éƒ½è¦å†™å¾ˆé•¿çš„ä¸€æ®µè¯æ¥é…ç½®å¾ˆéº»çƒ¦å•Š
- æˆ‘ä»¬èƒ½å¦å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œè®© `vim` æ¯æ¬¡è‡ªåŠ¨é…ç½®å¥½å‘¢ï¼ŸğŸ¤”
- ä¸‹æ¬¡å†è¯´ ğŸ‘‹







