---
show: step
version: 1.0
enable_checker: true
---

# æœ¬ç« å›é¡¾

## æˆ‘ä»¬æ¥å›é¡¾ä¸€ä¸‹ğŸ˜Œ

#### ä¸Šä¸€éƒ¨åˆ†æˆ‘ä»¬éƒ½è®²äº†ä»€ä¹ˆ?ğŸ¤”

- yeså‘½ä»¤
- æŒç»­è¾“å‡ºæŸå­—ç¬¦ä¸²

```shell
yes oeasy
```

```checker
- name: æ£€æŸ¥æ˜¯å¦åœ¨å‘½ä»¤å†å²ä¸­æ›¾ç»å‡ºç°è¿‡ uname
  script: |
    cat /home/shiyanlou/.zsh_history | grep "yes oeasy"
  error: æ‚¨è¿˜æ²¡æœ‰å¯¹yesçµé­‚ä¸‰é—®
  timeout: 1
```

#### è¿˜æœ‰ä»€ä¹ˆå¥½ç©çš„å‘½ä»¤å—?ğŸ¤”

## åˆ—å‡ºæ‰€æœ‰åŒ…

```shell
apt list
```

```checker
- name: æ£€æŸ¥æ˜¯å¦åœ¨å‘½ä»¤å†å²ä¸­æ›¾ç»å‡ºç°è¿‡ uname
  script: |
    cat /home/shiyanlou/.zsh_history | grep "apt list"
  error: æ‚¨è¿˜æ²¡æœ‰å¯¹åˆ—å‡ºæ‰€æœ‰åŒ…
  timeout: 1
```

#### è¿™é‡Œå¥½å¤šæ–‡ä»¶å•Š,æˆ‘ä»¬æ‰¾æ‰¾æœ‰æ²¡æœ‰yes

```shell
# æ‰¾åˆ°yeså¯¹åº”ä½ç½®
which yes 
# /usr//bin/yeså±äºå“ªä¸ªåŒ…
dpkg -S /usr/bin/yes
# åœ¨å·²ç»å®‰è£…çš„åŒ…é‡Œé¢æ‰¾åˆ°coreutil
dpkg -l coreutils
# coreutilsåˆ°åº•æ˜¯å¹²ä»€ä¹ˆçš„?
dpkg -s coreutils
# åœ¨å·²å®‰è£…åˆ—è¡¨ä¸­æœç´¢coreutils
apt list coreutils
# åœ¨æºä¸­æœç´¢coreutils
apt search coreutils
```
- dpkgå¯¹åº”debian package æ˜¯ä¼ ç»ŸåŒ…ç®¡ç†
- dpkgæ›´å¤šçš„æ˜¯æœ¬åœ°åŒ…çš„å„ç§å®‰è£…å¸è½½æŸ¥çœ‹
- æ—©å¹´é—´éƒ½æ˜¯é€šè¿‡ftpä¸‹è½½åˆ°æœ¬åœ°,å†dkpgçš„
- aptæ˜¯æ–°çš„åŒ…ç®¡ç†å·¥å…·ğŸ˜
- aptæ›´å¤šçš„æ˜¯ç½‘ç»œåŒ…çš„å®‰è£…å¸è½½æŸ¥çœ‹
- å¦‚æœæœ‰äº›åŒ…ä½ æ˜¯ä»çº¢å¸½ç³»rpmä¸‹è½½çš„
    -   å¯ä»¥ç”¨alienè½¬åŒ–ä¸ºdeb
    -   ç„¶åå®‰è£…debæ–‡ä»¶
- å¯ä»¥ç”¨aptä¸‹å¥½ç©çš„åŒ…å—?ğŸ˜‚

## aptğŸ§©

- aptæ˜¯advanced package toolsçš„æ„æ€
- aptæ˜¯debianç³»å‘è¡Œç‰ˆçš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·
    - çº¢å¸½ç³»çš„yumã€archç³»çš„pacmanä¹Ÿæ˜¯å¾ˆå¥½çš„ç®¡ç†å·¥å…·
    

#### ä¸ºä»€ä¹ˆè¦ç”¨è¿™ä¸ªå·¥å…·ğŸ”§?

- ä¸åŒçš„cpuæ¶æ„è¦ç”¨ä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶
- ä½ å¯ä»¥æœ‰ä¸¤ç§æ–¹æ³•å¾—åˆ°æŸç§æ¶æ„(æ¯”å¦‚mips)çš„äºŒè¿›åˆ¶æ–‡ä»¶
    - ç›´æ¥ä¸‹è½½è¿™ä¸ªæ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
    - ä¸‹è½½è¿™ä¸ªè½¯ä»¶åŒ…çš„æºæ–‡ä»¶,è‡ªå·±ç¼–è¯‘âš™ï¸

#### ä½†æ˜¯è¿™ä¸ªå¾—åˆ°çš„äºŒè¿›åˆ¶æ–‡ä»¶è¿˜æ˜¯æœ‰å¯èƒ½ä¸èƒ½ç”¨
- è½¯ä»¶åŒ…ä¹‹é—´æ˜¯æœ‰ä¾èµ–å…³ç³»çš„
- è¿™ä¸ªè½¯ä»¶åŒ…ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨
- ç”šè‡³è¢«ä¾èµ–çš„è½¯ä»¶åŒ…æ‰€ä¾èµ–çš„è½¯ä»¶åŒ…ä¸å­˜åœ¨
- è¿™å°±å½¢æˆäº†ä¸€æ¡é“¾è·¯
- æˆ‘ä»¬éœ€è¦æŠŠè¿™æ¡é“¾è·¯ä¸Šæ‰€æœ‰çš„è½¯ä»¶åŒ…éƒ½ä¸‹è½½ä¸‹æ¥

### ä»¥ä¸Šåšæ³•å¤ªéº»çƒ¦äº†,æˆ‘ä»¬åªéœ€è¦
- ä½¿ç”¨aptæŠŠç›¸å…³æ“ä½œå°è£…æˆæ¥å£
- æˆ‘ä»¬ç›´æ¥è°ƒç”¨aptå°±å¯ä»¥äº†
- æ‰€ä»¥å«åšé«˜çº§åŒ…ç®¡ç†å·¥å…·
- å½“ç„¶ä½ å¾—æœ‰åœ°æ–¹ä¸‹è½½,è¿™å°±éœ€è¦é•œåƒç«™.

## é•œåƒç«™(mirrors)

#### è½¯ä»¶åŒ…æ”¾åœ¨ç½‘ç»œä¸Š

- debianç³»çš„é•œè±¡åˆ—è¡¨æ˜¯
    - https://www.debian.org/mirror/list
    - è¿™é‡Œé¢å…¶å®å¯¹åº”çš„å°±æ˜¯æˆ‘ä»¬/etc/apt/sources.list

#### é•œåƒç«™ä¸€èˆ¬ä¹Ÿä¸åªæä¾›ä¸€ä¸ªå‘è¡Œç‰ˆçš„é•œåƒ

- ä»¥æ¸…åé•œåƒç«™ä¸ºä¾‹
    - https://mirror.tuna.tsinghua.edu.cn/
    - æœ‰å¥½å¤šå‘è¡Œç‰ˆ
    - ç‚¹å‡»å‘è¡Œç‰ˆæˆ–è½¯ä»¶åŒ…åé¢é—®å·
    - å¯ä»¥è·å¾—sources.listçš„ç›¸å…³æ¸…åæºé…ç½®ä»£ç 
    
![Image text](https://labfile.oss.aliyuncs.com/courses/2712/mirror.png)

#### å®éªŒæ¥¼é‡Œé¢é»˜è®¤çš„æ˜¯é˜¿é‡Œæºä¹Ÿå¾ˆå¥½ç”¨
- æˆ‘ä»¬è¦ä¸‹è½½ä¸€ä¸ªåº”ç”¨linuxlogo
- æˆ‘å…ˆçœ‹çœ‹æˆ‘è®¾ç½®çš„è¿™äº›æºé‡Œé¢æœ‰æ²¡æœ‰ğŸ¤ª



 
### sources.listğŸ—’

#### sources.listè¯­æ³•æ˜¯è¿™æ ·çš„
- deb url distribution component1 component2 component3 [..] componentX
- deb-src url distribution component1 component2 component3 [..] componentX
- debå¯¹åº”äºŒè¿›åˆ¶æ–‡ä»¶
- deb-srcå¯¹åº”æºæ–‡ä»¶
- åœ¨åœ°å€åé¢æœ‰ä¸ªç‰ˆæœ¬å·
- ç‰ˆæœ¬åœ¨dists(distribution)é‡Œé¢å¯ä»¥æ‰¾åˆ°
    - https://mirror.tuna.tsinghua.edu.cn/debian/dists/
    - debianç³»åˆ—ç‰ˆæœ¬å·éƒ½æ˜¯ç©å…·æ€»åŠ¨å‘˜ä¸­çš„è§’è‰²
    - ubuntuç‰ˆæœ¬å·æ¥è‡ªäºåŠ¨ç‰©ğŸ¦Š
    - mainã€contributeæ˜¯æ–‡ä»¶å¤¹çš„åå­—
    - Busterç‰ˆæ˜¯æœ€æ–°çš„ç¨³å®šç‰ˆ,é€‚åˆæ‹¿æ¥ä½¿ç”¨
- ç»´æŠ¤è€…ç»´æŠ¤çš„æºå¤´æ˜¯æºæ–‡ä»¶
    -   æœ‰äº†æºæ–‡ä»¶,å¯ä»¥ç¼–è¯‘æˆåˆ°å„ç§æ¶æ„çš„äºŒè¿›åˆ¶æ–‡ä»¶
    -   ä¿®æ”¹ä¹Ÿæ˜¯,å…ˆä¿®æ”¹æºæ–‡ä»¶
    
####å„ç§ç‰ˆæœ¬çš„ç”Ÿå‘½å‘¨æœŸ
![Image text](https://labfile.oss.aliyuncs.com/courses/2712/release-cycle.png)


### packageğŸ
####è½¯ä»¶åŒ…å‘å¸ƒçš„è¿‡ç¨‹ç”Ÿå‘½å‘¨æœŸ
![Image text](https://labfile.oss.aliyuncs.com/courses/2712/package-lifecycle.png)


```shell
# æœç´¢æºé‡Œé¢æœ‰æ²¡æœ‰linuxlogoè¿™ä¸ªè½¯ä»¶åŒ…
apt search linuxlogo
# çœ‹çœ‹é•œåƒç«™ä¸Šé¢å¯¹äºè¿™ä¸ªè½¯ä»¶åŒ…çš„æè¿°
apt show linuxlogo
# ä¸‹è½½å®‰è£…è¿™ä¸ªè½¯ä»¶åŒ…
apt install linuxlogo
```


- search æŸ¥æ‰¾åˆ°ä½ çš„å½“å‰æ¶æ„æ˜¯å¦å¯ä»¥æœ‰è¿™ä¸ªè½¯ä»¶åŒ…
- show æ˜¾ç¤ºå¼€å‘è€… ç®€ä»‹ å¤§å° æ‰€åœ¨çš„æºçš„ä½ç½®
    - æˆ‘ä»¬å¯ä»¥apt show aptçœ‹çœ‹aptçš„ä¾èµ–å…³ç³»
    - (A æˆ– B) ä¸” C çš„å…³ç³»å†™ä½œ A | B, C
- ç¬¬ä¸‰æ¡æ‰§è¡Œä¸ä¸‹å»,å› ä¸ºæ²¡æœ‰æƒé™

- æˆ‘æ€ä¹ˆæ‰èƒ½è®©ä»–æ‰§è¡Œä¸‹å»å‘¢?ğŸ¤”
- ä¸‹æ¬¡å†è¯´!ğŸ‘‹