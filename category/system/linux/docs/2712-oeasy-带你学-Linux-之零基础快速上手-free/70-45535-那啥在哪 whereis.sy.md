---
show: step
version: 1.0
enable_checker: true
---

# é‚£å•¥åœ¨å“ª whereis

## å›å¿†ä¸Šæ¬¡å†…å®¹ ğŸ˜Œ

> ä¸Šæ¬¡è®²äº† ls çš„å‚æ•° (arguement) å’Œé€‰é¡¹ (option) çš„è®¾ç½®ã€‚

#### ç°åœ¨æˆ‘ä»¬è¦åˆ¶ä½œè¿™æ ·ä¸€ä¸ªåˆ—è¡¨ï¼šğŸ—’

- å¯¹äº /proc è·¯å¾„è¿›è¡Œåˆ—è¡¨
- å¯¹å­è·¯å¾„é€’å½’åˆ—è¡¨
- æ˜¾ç¤ºéšè—æ–‡ä»¶
- æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- å…¶ä¸­å®¹é‡ä½¿ç”¨äººä»¬ç†ŸçŸ¥çš„å•ä½

**å¤§å®¶å¿˜è®°äº†å—ï¼Ÿï¼ï¼ğŸ˜±**

- æ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥æ‰‹å†ŒğŸ“• 

```
ls -lahR /proc
```

- åšå®Œäº†ä¹‹åå¯ä»¥æ€è€ƒ
- ls åˆ°åº•åœ¨å“ªï¼ŸğŸ¤”

## ls åœ¨å“ªï¼ŸğŸ¤”

- æƒ³è¦çŸ¥é“ ls åœ¨å“ªå°±å¾—ç”¨æ–°å‘½ä»¤ whereis
- å‘½ä»¤çš„å‚æ•°æ˜¯ ls
- ç»¼åˆèµ·æ¥å°±æ˜¯ï¼š

```shell
whereis ls
```


- æˆ‘ä»¬å¯ä»¥å¾—åˆ° ls ä¸¤ä¸ªç¡¬ç›˜ä½ç½®ï¼š

```properties
  /bin/ls
  /usr/share/man/man1/ls.1.gz
```

### ä½ç½®
- ä¸ºä»€ä¹ˆ ls åœ¨ç¡¬ç›˜é‡Œï¼ŸğŸ¤”
- `ls` æ–‡ä»¶æœ€å¼€å§‹åœ¨ `/bin` è¿™ä¸ªä½ç½®
- å½“æˆ‘åœ¨å‘½ä»¤è¡Œæ•²å‡»ä¹‹å `ls` å›è½¦ä¹‹å
- æ“ä½œç³»ç»Ÿè¦æ±‚è¿è¡Œ `ls` ç¨‹åº
- æ“ä½œç³»ç»Ÿåˆ†é…å†…å­˜ç©ºé—´ç»™ `ls`
- æ“ä½œç³»ç»ŸæŠŠ `ls` ä»ç¡¬ç›˜åŠ è½½åˆ°å†…å­˜ä¸­
- æ“ä½œç³»ç»Ÿåˆ†é… cpu èµ„æºå»æ‰§è¡Œç¨‹åº
- æœ€ç»ˆæŠŠ `ls` çš„ç»“æœè¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºæµï¼ˆå±å¹•ï¼‰ä¸Š
- ä¸ºä»€ä¹ˆ ls å‘½ä»¤å¯¹åº”ä¸¤ä¸ªä½ç½®å‘¢ ğŸ¤”
### ä½ç½®

- ç¬¬ä¸€ä¸ªçœ‹èµ·æ¥æ˜¯å‘½ä»¤çš„ä½ç½®
- ç¬¬äºŒä¸ªçœ‹èµ·æ¥æ˜¯ä¸€ä¸ªæ–‡ä»¶
- è€Œä¸”åƒä¸€ä¸ªman å‹çš„å¸®åŠ©æ‰‹å†Œ
- æŠŠä»–å½“åšå‚æ•°manä¸€ä¸‹
- å¤±è´¥äº†
- æ€ä¹ˆåŠï¼Ÿ

### æœç´¢æ‰“å¼€gz
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631238746539)

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239299640)

- ç„¶åå»ç›®å½•åº•ä¸‹æ‰¾åˆ°catä¸€ä¸‹
- å¯ä»¥çœ‹åˆ°ç¡®å®æ˜¯å¸®åŠ©ï¼
- å†æ‰¾ä¸ªå‘½ä»¤
- æˆ‘ä»¬å¯ä»¥å¯¹ whereis å‘å‡ºè¯¢é—®

### å‘½ä»¤
```shell
whatis whereis
```
  
> whereis å¯ä»¥å¸®æˆ‘ä»¬å®šä½å‘½ä»¤çš„ä½ç½®

ä½†æ˜¯ whereis æè¿°å¤ªç®€å•äº†ï¼Œæˆ‘ä»¬å¯ä»¥æŸ¥è¯¢ whereis çš„æ‰‹å†Œ manï¼šğŸ“•

```shell
man whereis
```

æˆ‘ä»¬å¯ä»¥æŸ¥è¯¢åˆ° whereis çš„å…·ä½“å†…å®¹ï¼šğŸ“•

![Image text](https://labfile.oss.aliyuncs.com/courses/2712/whereis.png)

- èµ°
- è¯•è¯•é€‰é¡¹çš„åŠŸèƒ½

### äºŒè¿›åˆ¶

```shell
whereis -b ls
```

- b çš„æ„æ€æ˜¯ binary äºŒè¿›åˆ¶
- æŸ¥æ‰¾ whereis äºŒè¿›åˆ¶
- äºŒè¿›åˆ¶æ–‡ä»¶åœ¨/bin é‡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239617122)

### æ–‡æ¡£

```shell
whereis -m ls
```

- m çš„æ„æ€æ˜¯ manual æ–‡æ¡£
- æŸ¥æ‰¾ whereis çš„æ–‡æ¡£
- æ–‡æ¡£åœ¨/usr/share/man é‡Œé¢

- æ€»ç»“æ¥è¯´ï¼š`whereis -b ls` æ˜¯äºŒè¿›åˆ¶å‘½ä»¤
- `whereis -m` å¦ä¸€ä¸ªæ˜¯å¸®åŠ©æ‰‹å†Œ
- è¿™ç³»ç»Ÿä¸æ˜¯å¼€æºçš„ä¹ˆ
- é‚£ ls çš„æºæ–‡ä»¶åœ¨å“ªå‘¢ï¼Ÿ
- è¿™æœ‰ç‚¹å¤æ‚...ğŸ§

### å…ˆæŸ¥æ‰¾ apt çš„æº

- dpkg -S /bin/ls
  - dpkg æ˜¯ Debian Package æ˜¯ Debian çš„åŒ…ç®¡ç†å‘½ä»¤
  - -S æ˜¯åœ¨å·²ç»å®‰è£…çš„åŒ…é‡Œé¢æŸ¥æ‰¾ search
  - /bin/ls æ˜¯å…·ä½“æ–‡ä»¶çš„ä½ç½®
  - å¾—åˆ°ç»“æœæ˜¯ coreutilsï¼ˆæ ¸å¿ƒåº”ç”¨ï¼‰

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239752764)
### è®¾ç½®æº

```shell
sudo vi /etc/apt/sources.list
```

  1. æ‰“å¼€æºçš„apté…ç½®æ–‡ä»¶
  0. apt æ˜¯é«˜çº§åŒ…ç®¡ç†çš„å‘½ä»¤
  0. sudo æ˜¯ä½¿ç”¨ç®¡ç†å‘˜æƒé™
    - vi æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨
    - `/etc/apt/sources.list` æ˜¯æºçš„é…ç½®æ–‡ä»¶
    - ç›®å‰çš„å…‰æ ‡åœ¨ç¬¬ä¸€è¡Œ
  0. ä¾æ¬¡è¾“å…¥ <kbd>4</kbd><kbd>G</kbd>
    - ç§»åŠ¨å…‰æ ‡ç›´æ¥åˆ°ç¬¬å››è¡Œ
    - å…‰æ ‡åœ¨è¡Œé¦–

![source](https://labfile.oss.aliyuncs.com/courses/2712/changeSource.png)

  5. è¾“å…¥2ä¸ª <kbd>x</kbd>
    - åˆ é™¤ä¸¤ä¸ªå­—ç¬¦
    - å–æ¶ˆæ³¨é‡Š
    - ç¡®è®¤deb-srcæºçš„ä½ç½®
  0. ä¾æ¬¡æ‘ä¸‹
    - <kbd>:</kbd>
    - <kbd>w</kbd>
    - <kbd>q</kbd>
    - <kbd>å›è½¦</kbd>
    - ä¿å­˜å¹¶é€€å‡º vi
    
### ç”¨ apt ä¸‹è½½æºä»£ç 


```shell
#è¿è¡Œ `sudo apt update`ï¼ˆæ›´æ–°æºï¼‰
sudo apt update
#è·å¾—æºä»£ç ï¼Œæ³¨æ„ç»“å°¾æœ‰s
sudo apt source coreutils
#åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° `coreutilsXXX` æ–‡ä»¶å¤¹
ls coreutils*
#8.25æ˜¯å¯¹åº”çš„è½¯ä»¶åŒ…çš„ç‰ˆæœ¬å·
#å¯èƒ½å’Œæ‚¨å¯¹åº”çš„ä¸ä¸€æ ·
#cd è¿›å…¥è¿™ä¸ªæ–‡ä»¶å¤¹
cd coreutils-8.25
```
![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631239978617)
### æ‰¾
```
#æŸ¥çœ‹ä¸€ä¸‹ coreutils-8.25 ä¸‹æœ‰ä»€ä¹ˆ
ls 
#è¿›å…¥ `src` æºæ–‡ä»¶æ–‡ä»¶å¤¹ (source)
cd src
#æŸ¥çœ‹ä¸€ä¸‹ src ä¸‹æœ‰ä»€ä¹ˆ
ls 
#å†æ¬¡æ–‡ä»¶å¤¹æŸ¥æ‰¾lsçš„æ–‡ä»¶
#æ‰¾åˆ°äº† `ls.c` æ–‡ä»¶ (ls çš„ c è¯­è¨€æºæ–‡ä»¶ï¼‰
#ls ls.*
```
![ls Source](https://labfile.oss.aliyuncs.com/courses/2712/listsourcefile.png)

### æŸ¥çœ‹

```
#æŸ¥çœ‹è¿™ä¸ªæºæ–‡ä»¶
vi ls.c
```

- åˆ«å°çœ‹ä¸€ä¸ªls
- å±…ç„¶æœ‰4000å¤šè¡Œ

![å›¾ç‰‡æè¿°](https://doc.shiyanlou.com/courses/uid1190679-20210910-1631240124547)

- `:q`å¯ä»¥é€€å‡º

### æ€»ç»“æ€è€ƒ ğŸ¤”
- è¿™æ¬¡æ˜¯where
- å¯ä»¥æ‰¾åˆ°å‘½ä»¤çš„ä½ç½®
- å‘½ä»¤æœ‰ä¸‰ç§ä½ç½®
	- äºŒè¿›åˆ¶ä»£ç  binary
	- æºä»£ç  source
	- å¸®åŠ©æ‰‹å†Œ manual
- æˆ‘ä»¬çœŸçš„å¯ä»¥è·å¾— ls æºä»£ç 
- è¿™å¤ªæ£’äº†ï¼ğŸ‘Š 
- å¯æ˜¯å¦‚æœæœ‰å¤šä¸ªç‰ˆæœ¬çš„å‘½ä»¤æ¯”å¦‚ï¼š
	- python2
	- python3 
- é‚£æˆ‘åˆ°åº•ç”¨çš„æ˜¯é‚£ä¸ªç‰ˆæœ¬çš„ java å‘¢ï¼Ÿ
- æˆ‘ä»¬ä¸‹æ¬¡å†è¯´ã€‚ ğŸ‘‹
